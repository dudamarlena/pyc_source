{"info": {"author": "Jakub Dubec", "author_email": "jakub.dubec@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Environment :: Web Environment", "Framework :: Django :: 2.0", "Framework :: Django :: 2.1", "Framework :: Django :: 2.2", "Framework :: Django :: 3.0", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8", "Programming Language :: Python :: Implementation :: PyPy", "Topic :: Internet :: WWW/HTTP", "Topic :: Internet :: WWW/HTTP :: HTTP Servers", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "# Django API Forms\n\n[![PyPI version](https://badge.fury.io/py/django-api-forms.svg)](https://badge.fury.io/py/django-api-forms)\n[![codecov](https://codecov.io/gh/Sibyx/django_api_forms/branch/master/graph/badge.svg)](https://codecov.io/gh/Sibyx/django_api_forms)\n\n[Django Forms](https://docs.djangoproject.com/en/3.0/topics/forms/) approach in validation of request payload\n(especially for content type like [JSON](https://www.json.org/) or [MessagePack](https://msgpack.org/))\nwithout HTML front-end.\n\n## Motivation\n\nMain idea was to create a simple and declarative way to specify format of expecting request with ability to validate\nthem. Firstly I tried to use [Django Forms](https://docs.djangoproject.com/en/3.0/topics/forms/) to validate my API\nrequest (I use pure Django in my APIs). I have encountered a problem with nesting my requests without huge boilerplate.\nAlso, the whole HTML thing was pretty useless in my RESTful APIs.\n\nI wanted something to:\n\n- define my requests as object (`Form`)\n- pass the request to my defined object (`form = Form.create_from_request(request)`)\n- validate my request `form.is_valid()`\n- extract data `form.clean_data` property\n\nI wanted to keep:\n\n- friendly declarative Django syntax\n([DeclarativeFieldsMetaclass](https://github.com/django/django/blob/master/django/forms/forms.py#L22) is beautiful)\n- [Django Validators](https://docs.djangoproject.com/en/3.0/ref/validators/)\n- [ValidationError](https://docs.djangoproject.com/en/3.0/ref/exceptions/#validationerror)\n\nSo I decided to create simple Python package to cover all my expectations.\n\n## Installation\n\n```shell script\n# Using pip\npip install django-api-forms\n\n# Using pipenv\npipenv install django-api-forms\n\n# Using setup.py\npython setup.py install\n```\n\n## Example\n\n**Simple nested JSON request**\n\n```json\n{\n  \"title\": \"Unknown Pleasures\",\n  \"type\": \"vinyl\",\n  \"artist\": {\n    \"name\": \"Joy Division\",\n    \"genres\": [\n      \"rock\",\n      \"punk\"\n    ],\n    \"members\": 4\n  },\n  \"year\": 1979,\n  \"songs\": [\n    {\n      \"title\": \"Disorder\",\n      \"duration\": \"3:29\"\n    },\n    {\n      \"title\": \"Day of the Lords\",\n      \"duration\": \"4:48\",\n      \"metadata\": {\n        \"_section\": {\n          \"type\": \"ID3v2\",\n          \"offset\": 0,\n          \"byteLength\": 2048\n        },\n        \"header\": {\n          \"majorVersion\": 3,\n          \"minorRevision\": 0,\n          \"flagsOctet\": 0,\n          \"unsynchronisationFlag\": false,\n          \"extendedHeaderFlag\": false,\n          \"experimentalIndicatorFlag\": false,\n          \"size\": 2038\n        }\n      }\n    }\n  ],\n  \"metadata\": {\n    \"created_at\": \"2019-10-21T18:57:03+0100\",\n    \"updated_at\": \"2019-10-21T18:57:03+0100\"\n  }\n}\n\n```\n\n**Django API Forms equivalent + validation**\n\n```python\nfrom enum import Enum\n\nfrom django.core.exceptions import ValidationError\nfrom django.forms import fields\n\nfrom django_api_forms import FieldList, FormField, FormFieldList, DictionaryField, EnumField, AnyField, Form\n\n\nclass AlbumType(Enum):\n    CD = 'cd'\n    VINYL = 'vinyl'\n\n\nclass ArtistForm(Form):\n    name = fields.CharField(required=True, max_length=100)\n    genres = FieldList(field=fields.CharField(max_length=30))\n    members = fields.IntegerField()\n\n\nclass SongForm(Form):\n    title = fields.CharField(required=True, max_length=100)\n    duration = fields.DurationField(required=False)\n    metadata = AnyField(required=False)\n\n\nclass AlbumForm(Form):\n    title = fields.CharField(max_length=100)\n    year = fields.IntegerField()\n    artist = FormField(form=ArtistForm)\n    songs = FormFieldList(form=SongForm)\n    type = EnumField(enum=AlbumType, required=True)\n    metadata = DictionaryField(fields.DateTimeField())\n\n    def clean_year(self):\n        if self.cleaned_data['year'] == 1992:\n            raise ValidationError(\"Year 1992 is forbidden!\", 'forbidden-value')\n        return self.cleaned_data['year']\n\n    def clean(self):\n        if (self.cleaned_data['year'] == 1998) and (self.cleaned_data['artist']['name'] == \"Nirvana\"):\n            raise ValidationError(\"Sounds like a bullshit\", code='time-traveling')\n        return self.cleaned_data\n\n\n\n\"\"\"\nDjango view example\n\"\"\"\ndef create_album(request):\n    form = AlbumForm.create_from_request(request)\n    if not form.is_valid():\n        # Process your validation error\n        print(form.errors)\n\n    # Cleaned valid payload\n    payload = form.cleaned_data\n    print(payload)\n```\n\n---\nMade with \u2764\ufe0f and \u2615\ufe0f by Jakub Dubec & [BACKBONE s.r.o.](https://www.backbone.sk/en/)\n\n# Changelog\n\n## 0.7.1 : 13.04.2020\n\n- **Change** Use [poetry](https://python-poetry.org/) instead of [pipenv](https://github.com/pypa/pipenv)\n- **Change**: Library renamed from `django_api_forms` to `django-api-forms` (cosmetic change without effect)\n\n## 0.7.0 : 03.03.2020\n\n- **Change**: Library renamed from `django_request_formatter` to `django_api_forms`\n- **Change**: Imports in main module `django_api_forms`\n\n## 0.6.0 : 18.02.2020\n\n- **Feature**: `BooleanField` introduced\n\n## 0.5.8 : 07.01.2020\n\n- **Fix**: Pass `Invalid value` as `ValidationError` not as a `string`\n\n## 0.5.7 : 07.01.2020\n\n- **Fix**: Introduced generic `Invalid value` error message, if there is `AttributeError`, `TypeError`, `ValueError`\n\n## 0.5.6 : 01.01.2020\n\n- **Fix**: Fixing issue from version `0.5.5` but this time for real\n- **Change**: Renamed version file from `__version__.py` to `version.py`\n\n## 0.5.5 : 01.01.2020\n\n- **Fix**: Check instance only if there is a value in `FieldList` and `FormFieldList`\n\n## 0.5.4 : 24.12.2019\n\n- **Fix**: Added missing `msgpack`` dependency to `setup.py`\n\n## 0.5.3 : 20.12.2019\n\n- **Feature**: Introduced generic `AnyField`\n\n## 0.5.2 : 19.12.2019\n\n- **Fix**: Skip processing of the `FormField` if value is not required and empty\n\n## 0.5.1 : 19.12.2019\n\n- **Fix**: Process `EnumField` even if it's not marked as required\n\n## 0.5.0 : 16.12.2019\n\n- **Change**: Use native `django.form.fields` if possible\n- **Change**: Removed `kwargs` propagation from release `0.3.0`\n- **Change**: Changed syntax back to `django.forms` compatible (e.g. `form.validate_{key}()` -> `form.clean_{key}()`)\n- **Change**: `FieldList` raises `ValidationError` instead of `RuntimeException` if there is a type  in validation\n- **Change**: Use private properties for internal data in field objects\n- **Fixed**: `FieldList` returns values instead of `None`\n- **Fix**: Fixed validation in `DictionaryField`\n- **Maintenance**: Basic unit tests\n\n## 0.4.3 : 29.11.2019\n\n- **Fix**: Fixed `Form` has no attribute `self._data`\n\n## 0.4.2 : 29.11.2019\n\n- **Fix**: If payload is empty, create empty dictionary to avoid `NoneType` error\n\n## 0.4.1 : 14.11.2019\n\n- **Feature**: Introduced `UUIDField`\n\n## 0.4.0 : 13.11.2019\n\n- **Feature**: Introduced `DictionaryField`\n\n## 0.3.0 : 11.11.2019\n\n- **Feature**: Propagate `kwargs` from `Form.is_valid()` to `Form.validate()` and `Form.validate_{key}()` methods\n\n## 0.2.1 : 4.11.2019\n\n- **Fix**: Fixed `to_python()` in FormFieldList\n\n## 0.2.0 : 31.10.2019\n\n- **Change**: `Form.validate()` replaced by `Form.is_valid()`\n- **Feature**: `Form.validate()` is now used as a last step of form validation and it's aimed to be overwritten if\nneeded\n- **Note**: Unit tests initialization\n\n## 0.1.6 : 24.10.2019\n\n- **Fix**: Non-required EnumField is now working\n- **Feature**: WIP: Initial method for filling objects `Form::fill()`\n\n## 0.1.5 : 23.10.2019\n\n- **Fix**: Assign errors to form before raising `ValidationError`\n\n## 0.1.4 : 23.10.2019\n\n- **Fix**: Do not return empty error records in `Form:errors`\n\n## 0.1.3 : 23.10.2019\n\n- **Fix**: Use custom `DeclarativeFieldsMetaclass` because of custom `Field` class\n- **Fix**: Do not return untouched fields in `Form::payload`\n- **Fix**: Fix for None `default_validators` in `Field`\n\n## 0.1.2 : 22:10.2019\n\n- **Feature**: Support for `validation_{field}` methods in `Form` (initial support)\n\n## 0.1.1 : 22.10.2019\n\n- **Feature**: `EnumField`\n\n## 0.1.0 : 22.10.2019\n\n- **Feature**: First version of `Form` class\n- **Feature**: `CharField`\n- **Feature**: `IntegerField`\n- **Feature**: `FloatField`\n- **Feature**: `DecimalField`\n- **Feature**: `DateField`\n- **Feature**: `TimeField`\n- **Feature**: `DateTimeField`\n- **Feature**: `DurationField`\n- **Feature**: `RegexField`\n- **Feature**: `EmailField`\n- **Feature**: `BooleanField`\n- **Feature**: `RegexField`\n- **Feature**: `FieldList`\n- **Feature**: `FormField`\n- **Feature**: `FormFieldList`\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/Sibyx/django_api_forms", "keywords": "django,forms,request,validation,python", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "django-api-forms", "package_url": "https://pypi.org/project/django-api-forms/", "platform": "", "project_url": "https://pypi.org/project/django-api-forms/", "project_urls": {"Homepage": "https://github.com/Sibyx/django_api_forms"}, "release_url": "https://pypi.org/project/django-api-forms/0.7.1/", "requires_dist": ["Django (>=2.0)", "msgpack"], "requires_python": "", "summary": "Declarative Django request validation", "version": "0.7.1"}, "last_serial": 7009909, "releases": {"0.7.0": [{"comment_text": "", "digests": {"md5": "74c2dd3e23bb3933ef14d1f065deef4e", "sha256": "fea37d81b716d4db53170cfcca5b938588cb89b4f924d1fdaa244de21a47b519"}, "downloads": -1, "filename": "django_api_forms-0.7.0-py3-none-any.whl", "has_sig": false, "md5_digest": "74c2dd3e23bb3933ef14d1f065deef4e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9523, "upload_time": "2020-03-03T14:02:25", "upload_time_iso_8601": "2020-03-03T14:02:25.689474Z", "url": "https://files.pythonhosted.org/packages/dc/f9/4cf81fb5b320a9d8467af8d8d6a29873655c1937860a4ae39cc6368a4986/django_api_forms-0.7.0-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "9f0533a8a358325dcd0898074054c781", "sha256": "99b47533aa8e798388a7a75c4a290f17dd14a3bf0db8c67e75e6a797bbd6beda"}, "downloads": -1, "filename": "django_api_forms-0.7.0.tar.gz", "has_sig": false, "md5_digest": "9f0533a8a358325dcd0898074054c781", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10380, "upload_time": "2020-03-03T14:02:28", "upload_time_iso_8601": "2020-03-03T14:02:28.148675Z", "url": "https://files.pythonhosted.org/packages/34/0d/c351922e28e6cfddcac2c20fc0ca602aa1a3e70b5e3113806632f20f3bba/django_api_forms-0.7.0.tar.gz"}], "0.7.1": [{"comment_text": "", "digests": {"md5": "b8c41edfdf4435af630331bb6899fd8e", "sha256": "2dcc92413285d4f91fa173870f907bb0401a744d084c20be909a3e51b193a85d"}, "downloads": -1, "filename": "django_api_forms-0.7.1-py3-none-any.whl", "has_sig": false, "md5_digest": "b8c41edfdf4435af630331bb6899fd8e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9589, "upload_time": "2020-04-13T13:28:38", "upload_time_iso_8601": "2020-04-13T13:28:38.390102Z", "url": "https://files.pythonhosted.org/packages/81/0a/e7a7c8e656e0a40913b577b2d245e7fa3dcd2782fa052e3306cd6e1706c6/django_api_forms-0.7.1-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "ecef43c2288e5c702a06e428988b117a", "sha256": "907a652f39e8bfcdf7388d24eebd929851624ed05dc50d81aae618c02fa11da2"}, "downloads": -1, "filename": "django-api-forms-0.7.1.tar.gz", "has_sig": false, "md5_digest": "ecef43c2288e5c702a06e428988b117a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10519, "upload_time": "2020-04-13T13:28:39", "upload_time_iso_8601": "2020-04-13T13:28:39.795495Z", "url": "https://files.pythonhosted.org/packages/4a/2e/b06d0a33417d4f24ec6ce85602cfd20ca5dfb6abb6a1b25b4823065db45b/django-api-forms-0.7.1.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "b8c41edfdf4435af630331bb6899fd8e", "sha256": "2dcc92413285d4f91fa173870f907bb0401a744d084c20be909a3e51b193a85d"}, "downloads": -1, "filename": "django_api_forms-0.7.1-py3-none-any.whl", "has_sig": false, "md5_digest": "b8c41edfdf4435af630331bb6899fd8e", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 9589, "upload_time": "2020-04-13T13:28:38", "upload_time_iso_8601": "2020-04-13T13:28:38.390102Z", "url": "https://files.pythonhosted.org/packages/81/0a/e7a7c8e656e0a40913b577b2d245e7fa3dcd2782fa052e3306cd6e1706c6/django_api_forms-0.7.1-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "ecef43c2288e5c702a06e428988b117a", "sha256": "907a652f39e8bfcdf7388d24eebd929851624ed05dc50d81aae618c02fa11da2"}, "downloads": -1, "filename": "django-api-forms-0.7.1.tar.gz", "has_sig": false, "md5_digest": "ecef43c2288e5c702a06e428988b117a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10519, "upload_time": "2020-04-13T13:28:39", "upload_time_iso_8601": "2020-04-13T13:28:39.795495Z", "url": "https://files.pythonhosted.org/packages/4a/2e/b06d0a33417d4f24ec6ce85602cfd20ca5dfb6abb6a1b25b4823065db45b/django-api-forms-0.7.1.tar.gz"}]}