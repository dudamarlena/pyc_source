{"info": {"author": "Fishtown Analytics", "author_email": "info@fishtownanalytics.com", "bugtrack_url": null, "classifiers": [], "description": "## dbt-presto\n\n### Documentation\nFor more information on using Spark with dbt, consult the dbt documentation:\n- [Presto profile](https://docs.getdbt.com/docs/profile-presto)\n\n### Installation\nThis plugin can be installed via pip:\n```\n$ pip install dbt-presto\n```\n\n### Configuring your profile\n\nA dbt profile can be configured to run against Presto using the following configuration:\n\n| Option  | Description                                        | Required?               | Example                  |\n|---------|----------------------------------------------------|-------------------------|--------------------------|\n| method  | The Presto authentication method to use | Optional (default=`none`)  | `none`|`kerberos` |\n| user  | Username for authentication | Required  | `none`|`drew` |\n| password  | Password for authentication | Optional (required if `method` is `ldap|kerberos`)  | `none`|`abc123` |\n| database  | Specify the database to build models into | Required  | `analytics` |\n| schema  | Specify the schema to build models into | Required | `dbt_drew` |\n| host    | The hostname to connect to | Required | `127.0.0.1`  |\n| port    | The port to connect to the host on | Required | `8080` |\n| threads    | How many threads dbt should use | Optional(default=`1`) | `8` |\n\n\n\n**Example profiles.yml entry:**\n```\nmy-presto-db:\n  target: dev\n  outputs:\n    dev:\n      type: presto\n      user: drew\n      host: 127.0.0.1\n      port: 8080\n      database: analytics\n      schema: dbt_drew\n      threads: 8\n```\n\n### Usage Notes\n\n#### Supported Functionality\nDue to the nature of Presto, not all core dbt functionality is supported.\nThe following features of dbt are not implemented on Presto:\n- Archival\n- Incremental models\n\n\nIf you are interested in helping to add support for this functionality in dbt on Presto, please [open an issue](https://github.com/fishtown-analytics/dbt-presto/issues/new)!\n\n#### Required configuration\ndbt fundamentally works by dropping and creating tables and views in databases.\nAs such, the following Presto configs must be set for dbt to work properly on Presto:\n\n```\nhive.metastore-cache-ttl=0s\nhive.metastore-refresh-interval = 5s\nhive.allow-drop-table=true\nhive.allow-rename-table=true\n```\n\n\n### Reporting bugs and contributing code\n\n-   Want to report a bug or request a feature? Let us know on [Slack](http://slack.getdbt.com/), or open [an issue](https://github.com/fishtown-analytics/dbt-presto/issues/new).\n\n### Running tests\nBuild dbt container locally:\n\n```\n./docker/dbt/build.sh\n```\n\nRun a Presto server locally:\n\n```\n./docker/init.bash\n```\n\nIf you see errors while about \"inconsistent state\" while bringing up presto,\nyou may need to drop and re-create the `public` schema in the hive metastore:\n```\n# Example error\n\nInitialization script hive-schema-2.3.0.postgres.sql\nError: ERROR: relation \"BUCKETING_COLS\" already exists (state=42P07,code=0)\norg.apache.hadoop.hive.metastore.HiveMetaException: Schema initialization FAILED! Metastore state would be inconsistent !!\nUnderlying cause: java.io.IOException : Schema script failed, errorcode 2\nUse --verbose for detailed stacktrace.\n*** schemaTool failed ***\n```\n\n**Solution:** Drop (or rename) the public schema to allow the init script to recreate the metastore from scratch. **Only run this against a test Presto deployment. Do not run this in production!**\n```sql\n-- run this against the hive metastore (port forwarded to 10005 by default)\n-- DO NOT RUN THIS IN PRODUCTION!\n\ndrop schema public cascade;\ncreate schema public;\n```\n\nYou probably should be slightly less reckless than this.\n\nRun tests against Presto:\n\n```\n./docker/run_tests.bash\n```\n\nRun the locally-built docker image (from docker/dbt/build.sh):\n```\nexport DBT_PROJECT_DIR=$HOME/... # wherever the dbt project you want to run is\ndocker run -it --mount \"type=bind,source=$HOME/.dbt/,target=/home/dbt_user/.dbt\" --mount=\"type=bind,source=$DBT_PROJECT_DIR,target=/usr/app\" --network dbt-net dbt-presto /bin/bash\n```\n\n## Code of Conduct\n\nEveryone interacting in the dbt project's codebases, issue trackers, chat rooms, and mailing lists is expected to follow the [PyPA Code of Conduct](https://www.pypa.io/en/latest/code-of-conduct/).\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/fishtown-analytics/dbt", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "dbt-presto", "package_url": "https://pypi.org/project/dbt-presto/", "platform": "", "project_url": "https://pypi.org/project/dbt-presto/", "project_urls": {"Homepage": "https://github.com/fishtown-analytics/dbt"}, "release_url": "https://pypi.org/project/dbt-presto/0.16.0/", "requires_dist": ["dbt-core (==0.16.0)", "presto-python-client (==0.7.0)"], "requires_python": "", "summary": "The presto adpter plugin for dbt (data build tool)", "version": "0.16.0"}, "last_serial": 6979188, "releases": {"0.14.0": [{"comment_text": "", "digests": {"md5": "903de8bd686200ef420053df584da60f", "sha256": "a1e0300c630d341dd676e8db3ac2922ee51cb7027c710e3f1d38ad75e15135ed"}, "downloads": -1, "filename": "dbt_presto-0.14.0-py3-none-any.whl", "has_sig": false, "md5_digest": "903de8bd686200ef420053df584da60f", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 10139, "upload_time": "2019-07-18T13:07:10", "upload_time_iso_8601": "2019-07-18T13:07:10.814833Z", "url": "https://files.pythonhosted.org/packages/9d/9e/3eb541aba79068d875983b0eb3bd05262e2b48d942be6c2ffee0312c6a93/dbt_presto-0.14.0-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "974edb9fc62abd599353bf8a67fa691b", "sha256": "20c687b8a02acd3a8d79b3be8d6f1eb9b799a6422c41ce172656d0b4d5142cb4"}, "downloads": -1, "filename": "dbt-presto-0.14.0.tar.gz", "has_sig": false, "md5_digest": "974edb9fc62abd599353bf8a67fa691b", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9474, "upload_time": "2019-07-18T13:07:12", "upload_time_iso_8601": "2019-07-18T13:07:12.858613Z", "url": "https://files.pythonhosted.org/packages/6f/2f/a9ca3f07daad0262470c1df690d84f0e0b657ff31b7d8983c32f37b8ad90/dbt-presto-0.14.0.tar.gz"}], "0.15.3": [{"comment_text": "", "digests": {"md5": "fab5d9e75aa1c5aecaac2b960756fe0d", "sha256": "fab6b8c7d242ede16a48f3baf1e9a94dac06a13843d315ed4bce12feadb2e88b"}, "downloads": -1, "filename": "dbt_presto-0.15.3-py3-none-any.whl", "has_sig": false, "md5_digest": "fab5d9e75aa1c5aecaac2b960756fe0d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 11236, "upload_time": "2020-03-23T22:09:36", "upload_time_iso_8601": "2020-03-23T22:09:36.138755Z", "url": "https://files.pythonhosted.org/packages/15/b5/7de7511b7c90ee40015e2f3a65f56609b57626ff17830d2024b06d5bc33d/dbt_presto-0.15.3-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "7b2ff21eb4904965e07d2f7db7a3c449", "sha256": "a2315207c54ce99e2ddbe0e31ca02dc9cd60a5aae27827af4167dc22865d845f"}, "downloads": -1, "filename": "dbt-presto-0.15.3.tar.gz", "has_sig": false, "md5_digest": "7b2ff21eb4904965e07d2f7db7a3c449", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 10142, "upload_time": "2020-03-23T22:09:37", "upload_time_iso_8601": "2020-03-23T22:09:37.674123Z", "url": "https://files.pythonhosted.org/packages/c5/55/1163598016a735a91c85b509df558d6655c8909e6e93f316ab04edfa5675/dbt-presto-0.15.3.tar.gz"}], "0.16.0": [{"comment_text": "", "digests": {"md5": "fc825a949e18031bbd151dc777a0ebc3", "sha256": "ffa764a96fcc94da24e23562ea60ede0c919376d0251113494103c9ced4ef6ae"}, "downloads": -1, "filename": "dbt_presto-0.16.0-py3-none-any.whl", "has_sig": false, "md5_digest": "fc825a949e18031bbd151dc777a0ebc3", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 2987, "upload_time": "2020-04-08T17:02:07", "upload_time_iso_8601": "2020-04-08T17:02:07.896713Z", "url": "https://files.pythonhosted.org/packages/6a/f6/5b1a16bde818b66e8b9b66bf83f032212a6c9dda0c6aaad52b292dcb0b75/dbt_presto-0.16.0-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "a9ad4a65b6561dec06e57b7ad3c9582c", "sha256": "5e24acafd470c89dbcc8615870da7dce0a5c840976852fa0aebcb3ef317056ad"}, "downloads": -1, "filename": "dbt-presto-0.16.0.tar.gz", "has_sig": false, "md5_digest": "a9ad4a65b6561dec06e57b7ad3c9582c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3664, "upload_time": "2020-04-08T17:02:09", "upload_time_iso_8601": "2020-04-08T17:02:09.199528Z", "url": "https://files.pythonhosted.org/packages/c8/13/7d2a99690d86106df86cb6da498457345f03bfcb341c40170d913f7c9648/dbt-presto-0.16.0.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "fc825a949e18031bbd151dc777a0ebc3", "sha256": "ffa764a96fcc94da24e23562ea60ede0c919376d0251113494103c9ced4ef6ae"}, "downloads": -1, "filename": "dbt_presto-0.16.0-py3-none-any.whl", "has_sig": false, "md5_digest": "fc825a949e18031bbd151dc777a0ebc3", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 2987, "upload_time": "2020-04-08T17:02:07", "upload_time_iso_8601": "2020-04-08T17:02:07.896713Z", "url": "https://files.pythonhosted.org/packages/6a/f6/5b1a16bde818b66e8b9b66bf83f032212a6c9dda0c6aaad52b292dcb0b75/dbt_presto-0.16.0-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "a9ad4a65b6561dec06e57b7ad3c9582c", "sha256": "5e24acafd470c89dbcc8615870da7dce0a5c840976852fa0aebcb3ef317056ad"}, "downloads": -1, "filename": "dbt-presto-0.16.0.tar.gz", "has_sig": false, "md5_digest": "a9ad4a65b6561dec06e57b7ad3c9582c", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 3664, "upload_time": "2020-04-08T17:02:09", "upload_time_iso_8601": "2020-04-08T17:02:09.199528Z", "url": "https://files.pythonhosted.org/packages/c8/13/7d2a99690d86106df86cb6da498457345f03bfcb341c40170d913f7c9648/dbt-presto-0.16.0.tar.gz"}]}