{"info": {"author": "Chris Laws", "author_email": "clawsicus@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3.6", "Topic :: Software Development :: Libraries :: Python Modules", "Topic :: System :: Monitoring"], "description": ".. image:: https://github.com/claws/aioprometheus/workflows/Python%20Package%20Workflow/badge.svg?branch=master\n    :target: https://github.com/claws/aioprometheus/actions?query=branch%3Amaster\n\n.. image:: https://img.shields.io/pypi/v/aioprometheus.svg\n    :target: https://pypi.python.org/pypi/aioprometheus\n\n.. image:: https://img.shields.io/badge/code%20style-black-000000.svg\n  :target: https://github.com/ambv/black\n\naioprometheus\n=============\n\n`aioprometheus` is a Prometheus Python client library for asyncio-based\napplications. It provides metrics collection and serving capabilities,\nsupports multiple data formats and pushing metrics to a gateway.\n\nThe project documentation can be found on\n`ReadTheDocs <http://aioprometheus.readthedocs.org/>`_.\n\n\nInstall\n-------\n\n.. code-block:: console\n\n    $ pip install aioprometheus\n\nA Prometheus Push Gateway client and ASGI service are also provided, but the\ndependencies are not installed by default. You can install them alongside\n`aioprometheus` by running:\n\n.. code-block:: console\n\n    $ pip install aioprometheus[aiohttp]\n\n\nExample\n-------\n\nThe example below shows a single Counter metric collector being created\nand exposed via a HTTP endpoint.\n\n.. code-block:: python\n\n    #!/usr/bin/env python\n    \"\"\"\n    This example demonstrates how a single Counter metric collector can be created\n    and exposed via a HTTP endpoint.\n    \"\"\"\n    import asyncio\n    import socket\n    from aioprometheus import Counter, Service\n\n\n    if __name__ == \"__main__\":\n\n        async def main(svr: Service) -> None:\n\n            events_counter = Counter(\n                \"events\", \"Number of events.\", const_labels={\"host\": socket.gethostname()}\n            )\n            svr.register(events_counter)\n            await svr.start(addr=\"127.0.0.1\", port=5000)\n            print(f\"Serving prometheus metrics on: {svr.metrics_url}\")\n\n            # Now start another coroutine to periodically update a metric to\n            # simulate the application making some progress.\n            async def updater(c: Counter):\n                while True:\n                    c.inc({\"kind\": \"timer_expiry\"})\n                    await asyncio.sleep(1.0)\n\n            await updater(events_counter)\n\n        loop = asyncio.get_event_loop()\n        svr = Service()\n        try:\n            loop.run_until_complete(main(svr))\n        except KeyboardInterrupt:\n            pass\n        finally:\n            loop.run_until_complete(svr.stop())\n        loop.close()\n\nIn this simple example the counter metric is tracking the number of\nwhile loop iterations executed by the updater coroutine. In a realistic\napplication a metric might track the number of requests, etc.\n\nFollowing typical ``asyncio`` usage, an event loop is instantiated first\nthen a metrics service is instantiated. The metrics service is responsible\nfor managing metric collectors and responding to metrics requests.\n\nThe service accepts various arguments such as the interface and port to bind\nto. A collector registry is used within the service to hold metrics\ncollectors that will be exposed by the service. The service will create a new\ncollector registry if one is not passed in.\n\nA counter metric is created and registered with the service. The service is\nstarted and then a coroutine is started to periodically update the metric\nto simulate progress.\n\nThe example script can be run using:\n\n.. code-block:: console\n\n    (venv) $ cd examples\n    (venv) $ python simple-example.py\n    Serving prometheus metrics on: http://127.0.0.1:5000/metrics\n\nIn another terminal fetch the metrics using the ``curl`` command line tool\nto verify they can be retrieved by Prometheus server.\n\nBy default metrics will be returned in plan text format.\n\n.. code-block:: console\n\n    $ curl http://127.0.0.1:5000/metrics\n    # HELP events Number of events.\n    # TYPE events counter\n    events{host=\"alpha\",kind=\"timer_expiry\"} 33\n\nSimilarly, you can request metrics in binary format, though this will be hard\nto read on the command line.\n\n.. code-block:: console\n\n    $ curl http://127.0.0.1:5000/metrics -H \"ACCEPT: application/vnd.google.protobuf; proto=io.prometheus.client.MetricFamily; encoding=delimited\"\n\nThe metrics service also responds to requests sent to its ``/`` route. The\nresponse is simple HTML. This route can be useful as a Kubernetes ``/healthz``\nstyle health indicator as it does not incur any overhead within the service\nto serialize a full metrics response.\n\n.. code-block:: console\n\n    $ curl http://127.0.0.1:5000/\n    <html><body><a href='/metrics'>metrics</a></body></html>\n\nThe aioprometheus package provides a number of convenience decorator\nfunctions that can assist with updating metrics.\n\nThe ``examples`` directory contains many examples showing how to use the\naioprometheus package. The ``app-example.py`` file will likely be of interest\nas it provides a more representative application example than the simple\nexample shown above.\n\nExamples in the ``examples/frameworks`` directory show how aioprometheus can\nbe used within various web application frameworks without needing to create a\nseparate aioprometheus.Service endpoint to handle metrics. The FastAPI example\nis shown below.\n\n.. code-block:: python\n\n    #!/usr/bin/env python\n    \"\"\"\n    Sometimes you may not want to expose Prometheus metrics from a dedicated\n    Prometheus metrics server but instead want to use an existing web framework.\n\n    This example uses the registry from the aioprometheus package to add\n    Prometheus instrumentation to a FastAPI application. In this example a registry\n    and a counter metric is instantiated and gets updated whenever the \"/\" route\n    is accessed. A '/metrics' route is added to the application using the standard\n    web framework method. The metrics route renders Prometheus metrics into the\n    appropriate format.\n\n    Run:\n\n      $ pip install fastapi uvicorn\n      $ uvicorn fastapi_example:app\n\n    \"\"\"\n\n    from aioprometheus import render, Counter, Registry\n    from fastapi import FastAPI, Header, Response\n    from typing import List\n\n\n    app = FastAPI()\n    app.registry = Registry()\n    app.events_counter = Counter(\"events\", \"Number of events.\")\n    app.registry.register(app.events_counter)\n\n\n    @app.get(\"/\")\n    async def hello():\n        app.events_counter.inc({\"path\": \"/\"})\n        return \"hello\"\n\n\n    @app.get(\"/metrics\")\n    async def handle_metrics(response: Response, accept: List[str] = Header(None)):\n        content, http_headers = render(app.registry, accept)\n        return Response(content=content, media_type=http_headers[\"Content-Type\"])\n\n\n\nLicense\n-------\n\n`aioprometheus` is released under the MIT license.\n\n`aioprometheus` originates from the (now deprecated)\n`prometheus python <https://github.com/slok/prometheus-python>`_ package which\nwas released under the MIT license. `aioprometheus` continues to use the MIT\nlicense and contains a copy of the original MIT license from the\n`prometheus-python` project as instructed by the original license.\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/claws/aioprometheus", "keywords": "prometheus,monitoring,metrics", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "aioprometheus", "package_url": "https://pypi.org/project/aioprometheus/", "platform": "", "project_url": "https://pypi.org/project/aioprometheus/", "project_urls": {"Homepage": "https://github.com/claws/aioprometheus"}, "release_url": "https://pypi.org/project/aioprometheus/19.11.0/", "requires_dist": ["prometheus-metrics-proto (>=18.1.1)", "quantile-python (>=1.1)", "aiohttp (>=3.3.2) ; extra == 'aiohttp'"], "requires_python": "", "summary": "A Prometheus Python client library for asyncio-based applications", "version": "19.11.0"}, "last_serial": 6998708, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "619b34fe9ced4676719f9905044ddc78", "sha256": "874eeb4678cab11d70f9db4142f66b2f46ad4fb9435df192b3d1eed58efd2caa"}, "downloads": -1, "filename": "aioprometheus-0.0.1.tar.gz", "has_sig": false, "md5_digest": "619b34fe9ced4676719f9905044ddc78", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 17637, "upload_time": "2016-06-20T11:25:14", "upload_time_iso_8601": "2016-06-20T11:25:14.867732Z", "url": "https://files.pythonhosted.org/packages/e7/99/08b474720291c3385e2d31cbfa446905b9c465e76a42d189f0e4be2ec908/aioprometheus-0.0.1.tar.gz"}], "16.6.1": [{"comment_text": "", "digests": {"md5": "40857bb52003047541ec0f19ab41e644", "sha256": "dd764f62df5b53d591a36552e72a0283ca5720ba6cd318a6cba78d18d2227099"}, "downloads": -1, "filename": "aioprometheus-16.6.1.tar.gz", "has_sig": false, "md5_digest": "40857bb52003047541ec0f19ab41e644", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 30275, "upload_time": "2016-06-26T04:30:39", "upload_time_iso_8601": "2016-06-26T04:30:39.389242Z", "url": "https://files.pythonhosted.org/packages/0a/98/c93e897d2bc182f9b889f28f064abbbbe2eccb1e723826e5ceddf9dd4ed7/aioprometheus-16.6.1.tar.gz"}], "16.7.31": [{"comment_text": "", "digests": {"md5": "c3215c5aaec241c753d2037bedb36f38", "sha256": "99afa4be58ac4ecc756e3f62f77c1925bae300a89e2b0e364c1fa242ffc169c9"}, "downloads": -1, "filename": "aioprometheus-16.7.31.tar.gz", "has_sig": false, "md5_digest": "c3215c5aaec241c753d2037bedb36f38", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31779, "upload_time": "2016-07-31T14:24:12", "upload_time_iso_8601": "2016-07-31T14:24:12.904298Z", "url": "https://files.pythonhosted.org/packages/c6/ce/d63d9f8b5a013ac5b1d3a02bdcd99840700674edcf0f3e985f3049d2f6fe/aioprometheus-16.7.31.tar.gz"}], "16.8.3": [{"comment_text": "", "digests": {"md5": "1e5894bc63035adf931444efa66c14ae", "sha256": "0267c4d786c1baaa21225cf50048228f57d082678b43b3b735a9cbb5cb94432e"}, "downloads": -1, "filename": "aioprometheus-16.8.3.tar.gz", "has_sig": false, "md5_digest": "1e5894bc63035adf931444efa66c14ae", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 33001, "upload_time": "2016-08-03T13:41:52", "upload_time_iso_8601": "2016-08-03T13:41:52.145889Z", "url": "https://files.pythonhosted.org/packages/3f/36/0b35beb9837d11b201b63fb7db7d13f71f9139638b130bb3b933c380fb82/aioprometheus-16.8.3.tar.gz"}], "16.8.5": [{"comment_text": "", "digests": {"md5": "44fe28cea022af3204f76606f05a3df8", "sha256": "9b8071e15ded46c7c574ed2c7eabebdd1455b3dac5935d99ec81333ef2b4d6fd"}, "downloads": -1, "filename": "aioprometheus-16.8.5.tar.gz", "has_sig": false, "md5_digest": "44fe28cea022af3204f76606f05a3df8", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 33632, "upload_time": "2016-08-05T08:09:26", "upload_time_iso_8601": "2016-08-05T08:09:26.128630Z", "url": "https://files.pythonhosted.org/packages/2e/22/42326a61fd51a54f3a4e81b34293c1955ccf6c1e36f010fe79374c4f6198/aioprometheus-16.8.5.tar.gz"}], "16.8.6": [{"comment_text": "", "digests": {"md5": "0b4bdbc9f949d45bc38a5e2684614781", "sha256": "f2b34cc1dee833d783df5c90eec076ea5da17d98f82b722cc164cf369346042d"}, "downloads": -1, "filename": "aioprometheus-16.8.6.tar.gz", "has_sig": false, "md5_digest": "0b4bdbc9f949d45bc38a5e2684614781", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 34511, "upload_time": "2016-08-21T11:58:06", "upload_time_iso_8601": "2016-08-21T11:58:06.649550Z", "url": "https://files.pythonhosted.org/packages/cb/0f/c12ee8dfb1f5793ec72e05937eff8cddf88f11c851476e8fda262ae5f5e7/aioprometheus-16.8.6.tar.gz"}], "16.8.7": [{"comment_text": "", "digests": {"md5": "762524156a8eea321fb5ad97176b323d", "sha256": "76d7f7de29a5fccccf034a02a11a858f9355605f2557c85cc48e9af453f7f05c"}, "downloads": -1, "filename": "aioprometheus-16.8.7.tar.gz", "has_sig": false, "md5_digest": "762524156a8eea321fb5ad97176b323d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 34507, "upload_time": "2016-10-18T09:42:33", "upload_time_iso_8601": "2016-10-18T09:42:33.017201Z", "url": "https://files.pythonhosted.org/packages/a9/0b/ff0ec3a9474aabfee368865223e303a19a784deb64abc18a8dfb9537f610/aioprometheus-16.8.7.tar.gz"}], "17.4.8": [{"comment_text": "", "digests": {"md5": "d09005f6302a2a86b25daa5d50dbd391", "sha256": "beb65caff6bb9470dbee2819fee4c41e3fdab85d803e8703bc1d2474ef24104f"}, "downloads": -1, "filename": "aioprometheus-17.4.8.tar.gz", "has_sig": false, "md5_digest": "d09005f6302a2a86b25daa5d50dbd391", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 31804, "upload_time": "2017-04-08T05:38:04", "upload_time_iso_8601": "2017-04-08T05:38:04.089158Z", "url": "https://files.pythonhosted.org/packages/47/fa/333b61906ac16130501b1e2554a5018d5f734a3d155c047fbcf6a1a876c2/aioprometheus-17.4.8.tar.gz"}], "17.6.1": [{"comment_text": "", "digests": {"md5": "31aab722c435be82dd18a2b713362878", "sha256": "10d4132665df9e30fb8c69690f61c864bb2c1bc57d371683c7fd7a24bb35dccb"}, "downloads": -1, "filename": "aioprometheus-17.6.1-py3-none-any.whl", "has_sig": false, "md5_digest": "31aab722c435be82dd18a2b713362878", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 24342, "upload_time": "2017-06-25T11:24:53", "upload_time_iso_8601": "2017-06-25T11:24:53.925952Z", "url": "https://files.pythonhosted.org/packages/14/02/85043321c050b7f6c010400586cbbea05895e8420b80a8b2cadcd8da9ec0/aioprometheus-17.6.1-py3-none-any.whl"}], "18.1.1": [{"comment_text": "", "digests": {"md5": "53832ec9d0e5f45b555542a4dc63db3a", "sha256": "d88f16f2662bbfe4ffc3acb6d1d80f1c2d384cdff09782289a63c6fadca5debd"}, "downloads": -1, "filename": "aioprometheus-18.1.1-py3-none-any.whl", "has_sig": false, "md5_digest": "53832ec9d0e5f45b555542a4dc63db3a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 23998, "upload_time": "2018-01-04T10:52:03", "upload_time_iso_8601": "2018-01-04T10:52:03.702261Z", "url": "https://files.pythonhosted.org/packages/fd/5a/42970cdc26e5bb6a9de28acb396c6ba4717230d628e448a52d421d7c9f14/aioprometheus-18.1.1-py3-none-any.whl"}], "18.1.2": [{"comment_text": "", "digests": {"md5": "6d0729c21b7a9d68115130a397f8b44a", "sha256": "75ed1d5b70c54b4763e42e38be962257d914175c31f0e7fc52e1e391874cf4f0"}, "downloads": -1, "filename": "aioprometheus-18.1.2-py3-none-any.whl", "has_sig": false, "md5_digest": "6d0729c21b7a9d68115130a397f8b44a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 21306, "upload_time": "2018-04-25T10:57:48", "upload_time_iso_8601": "2018-04-25T10:57:48.189558Z", "url": "https://files.pythonhosted.org/packages/1e/aa/6bd3d2014ed64b752a859274d536a1758a8fac8c3d208cc67b67595bf4ba/aioprometheus-18.1.2-py3-none-any.whl"}], "18.1.3": [{"comment_text": "", "digests": {"md5": "535b579665f142ab2842c2edb4c499bf", "sha256": "bc5cc750785f91b1e2cb6230596bdc07e012acf98c66e17835f7ba204943ab3e"}, "downloads": -1, "filename": "aioprometheus-18.1.3-py3-none-any.whl", "has_sig": false, "md5_digest": "535b579665f142ab2842c2edb4c499bf", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 21656, "upload_time": "2018-04-26T12:08:11", "upload_time_iso_8601": "2018-04-26T12:08:11.271538Z", "url": "https://files.pythonhosted.org/packages/51/cd/93d66fee8ada9812b2e4a774504980e9cab46b5e5db7b6aaa2d5b65de39a/aioprometheus-18.1.3-py3-none-any.whl"}], "18.1.4": [{"comment_text": "", "digests": {"md5": "0f15123902bbc645865bbd8061cb6a21", "sha256": "544b8dc65beb54c08d47eccc5fae475d7ee37eb6a2654965496d44b7bf8971d5"}, "downloads": -1, "filename": "aioprometheus-18.1.4-py3-none-any.whl", "has_sig": false, "md5_digest": "0f15123902bbc645865bbd8061cb6a21", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 22235, "upload_time": "2018-06-25T22:45:39", "upload_time_iso_8601": "2018-06-25T22:45:39.575571Z", "url": "https://files.pythonhosted.org/packages/75/d6/415cd931a3a7d0d762fdcaa58dee407608cfd6b79a9e8e832a1dbad39116/aioprometheus-18.1.4-py3-none-any.whl"}], "18.7.1": [{"comment_text": "", "digests": {"md5": "c127c7a8b36000e5896499645faa76e3", "sha256": "654b8e5bd126e6c3de666da84620c412dbfa39d1280c9f1c31dc4bca3237cb22"}, "downloads": -1, "filename": "aioprometheus-18.7.1-py3-none-any.whl", "has_sig": false, "md5_digest": "c127c7a8b36000e5896499645faa76e3", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 23526, "upload_time": "2018-07-23T22:23:55", "upload_time_iso_8601": "2018-07-23T22:23:55.156377Z", "url": "https://files.pythonhosted.org/packages/0e/51/fbfb3db75cbb8ced3ec410525a073effaf56d7e960218a6980d0f6a47fd0/aioprometheus-18.7.1-py3-none-any.whl"}], "19.10.0": [{"comment_text": "", "digests": {"md5": "fb7a249c4359069ec3fe84a7fee13e90", "sha256": "c8c0a708fd3c6714665b5db1b5b4e2312bbc33dbcf943e175727df435f846d6f"}, "downloads": -1, "filename": "aioprometheus-19.10.0-py3-none-any.whl", "has_sig": false, "md5_digest": "fb7a249c4359069ec3fe84a7fee13e90", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 23551, "upload_time": "2019-10-21T12:08:06", "upload_time_iso_8601": "2019-10-21T12:08:06.031902Z", "url": "https://files.pythonhosted.org/packages/7d/1b/be925e8c56e650c94b24b87778806e9813f14f73d518c9e5f8f294281295/aioprometheus-19.10.0-py3-none-any.whl"}], "19.11.0": [{"comment_text": "", "digests": {"md5": "197836830c17aeaaca3172b1be2e71ff", "sha256": "e89800afc2989ec59d1911b69334905a0dd57cb91f9afda1ddac19346b670e3d"}, "downloads": -1, "filename": "aioprometheus-19.11.0-py3-none-any.whl", "has_sig": false, "md5_digest": "197836830c17aeaaca3172b1be2e71ff", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 25192, "upload_time": "2020-04-11T08:42:07", "upload_time_iso_8601": "2020-04-11T08:42:07.967216Z", "url": "https://files.pythonhosted.org/packages/23/46/ba682c3c099c022242c55a64556b098db738f930fa77e2dd25cccf6cdada/aioprometheus-19.11.0-py3-none-any.whl"}]}, "urls": [{"comment_text": "", "digests": {"md5": "197836830c17aeaaca3172b1be2e71ff", "sha256": "e89800afc2989ec59d1911b69334905a0dd57cb91f9afda1ddac19346b670e3d"}, "downloads": -1, "filename": "aioprometheus-19.11.0-py3-none-any.whl", "has_sig": false, "md5_digest": "197836830c17aeaaca3172b1be2e71ff", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 25192, "upload_time": "2020-04-11T08:42:07", "upload_time_iso_8601": "2020-04-11T08:42:07.967216Z", "url": "https://files.pythonhosted.org/packages/23/46/ba682c3c099c022242c55a64556b098db738f930fa77e2dd25cccf6cdada/aioprometheus-19.11.0-py3-none-any.whl"}]}