{"info": {"author": "DIT", "author_email": "", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Environment :: Web Environment", "Framework :: Django", "Framework :: Django :: 1.11", "Framework :: Django :: 2.0", "Framework :: Django :: 2.1", "Framework :: Django :: 2.2", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: English", "Operating System :: OS Independent", "Programming Language :: Python :: 3.6", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "# directory-components\n\n[![code-climate-image]][code-climate]\n[![circle-ci-image]][circle-ci]\n[![codecov-image]][codecov]\n[![pypi-image]][pypi]\n[![semver-image]][semver]\n\n**Reusable components used across the GREAT platform for the Department for International Trade.**\n\n---\n\n## Installation\n\n    pip install directory-components\n\n## Development\n\n    $ git clone https://github.com/uktrade/directory-components\n    $ cd directory-components\n    $ [create virtual environment and activate]\n    $ make install_requirements\n\n\nTo test cookies locally add this to your /etc/hosts:\n\n```\n127.0.0.1       components.trade.great\n```\n\nThen visit the demo at `components.trade.great:9013`\n\n### Commands\n\n| Command                       | Description |\n| ----------------------------- | ------------|\n| make clean                    | Delete pyc files |\n| make pytest                   | Run all tests. Run `pip install '.[test]' first` |\n| make pytest test_foo.py       | Run all tests in file called test_foo.py |\n| make pytest -- --last-failed` | Run the last tests to fail |\n| make pytest -- -k foo         | Run the test called foo |\n| make pytest -- <foo>          | Run arbitrary pytest command |\n| make flake8                   | Run linting |\n| make manage <foo>             | Run arbitrary management command |\n| make webserver                | Run the demo development web server. Run `pip install '.[demo]' first` |\n| make requirements             | Compile the requirements file |\n| make install_requirements     | Installed the compile requirements file |\n| make css                      | Compile scss to css |\n| make publish                  | Publish the package to PyPI |\n\n## Features\n\n### Environment variables\n\n| Environment variable | Notes |\n|--------------------------------------------------- |------------------------------------------------|\n| `FEATURE_MAINTENANCE_MODE_ENABLED`                 | Controls `MaintenanceModeMiddleware`.          |\n| `FEATURE_FLAGS`                                    | Place to store the service's feature flags.    |\n| `DIRECTORY_COMPONENTS_VAULT_DOMAIN`                | Hashicorp vault domain. For diffing vaults.    |\n| `DIRECTORY_COMPONENTS_VAULT_ROOT_PATH`             | Hashicorp vault root path. For diffing vaults. |\n| `DIRECTORY_COMPONENTS_VAULT_PROJECT`               | Hashicorp vault project. For diffing vaults.   |\n| `DIRECTORY_COMPONENTS_VAULT_IGNORE_SETTINGS_REGEX` | Settings to ignore when diffing vaults.        |\n\n### Middleware\n\nMiddleware can be found in `great_components.middleware.FooBar`.\n\n| Middleware | Notes |\n|------------|-------|\n| `MaintenanceModeMiddleware`         | Redirects to http://sorry.great.gov.uk if `FEATURE_MAINTENANCE_MODE_ENABLED` is `true`.|\n| `NoCacheMiddlware`                  | Prevents any page in the service from caching pages of logged in users. |\n| `PrefixUrlMiddleware`               | Redirects use from unprefixed url to prefixed url. |\n\n\n### Context processors\n\nMiddleware can be found in `great_components.context_processors.foo_bar`.\n\n| Processor | Context variable name | Notes |\n|-----------|-----------------------|-------|\n| `sso_processor` | | Exposes the state of the SSO user. |\n| `analytics` | `great_components_analytics` | GA details. Used by base template. |\n| `header_footer_processor` | `header_footer_urls` | Urls used by base template's header and footer. |\n| `urls_processor` | `great_components_urls` | More urls used by base template's header and footer. |\n| `feature_flags` | `feature_flags` | Exposes the service's feature flags. |\n\n### Exception handlers\n\nAdd the following to your urls.py for directory components templates to be used on 404 and 500\n\n```\nhandler404 = 'great_components.views.handler404'\n\nhandler500 = 'great_components.views.handler500'\n```\n\nWithout doing this the 500 and 400 pages would not receive context data provided by context processors\n\n## Settings janitor\n\nManagement commands are provided to assist in the maintenance of settings. Install by `pip install directory-components[janitor]` and then add the following to `settings.py`:\n\n    if some_predicate_is_met:  # feature flagged so it's not used in prod\n        INSTALLED_APPS.append('great_components.janitor')\n\n### Diff vaults\n\nYou can diff the vaults of two environments by running the following.\n\n    manage.py vault_diff \\\n        --token=<token> \\\n        --domain=<domain> \\\n        --root=<root> \\\n        --project=<project> \\\n        --environment_a=<environment_a> \\\n        --environment_b=<environment_b>\n\nFor simplicity once you set the `DIRECTORY_COMPONENTS_VAULT_DOMAIN`, `DIRECTORY_COMPONENTS_VAULT_PROJECT`, and `DIRECTORY_COMPONENTS_VAULT_ROOT_PATH` that simplifies to\n\n    manage.py environment_diff \\\n        --token=<token> \\\n        --environment_a=<environment_a> \\\n        --environment_b=<environment_b>\n\n### Update vaults\n\nYou can batch update the vaults of all your environments by running the following\n\n    manage.py vault_update -- \\\n        --token=<token> \\\n        --domain=<domain> \\\n        --root=<root> \\\n        --mutator='path.to.function'\n\n`mutator` is the path to a function relative to the project root. The call signature is `secrets=dict, path=str`. The return dict will be uploaded to vault.\n\n\nFor simplicity once you set the `DIRECTORY_COMPONENTS_VAULT_DOMAIN`, and `DIRECTORY_COMPONENTS_VAULT_ROOT_PATH` that simplifies to:\n\n    manage.py vault_update \\\n        --token=<token> \\\n        --mutator='path.to.function'\n\n### Detect settings orphans\n\nYou can detect settings that are either unused in the codebase, redundant because they're explicitly set to the default django value, or obsolete because they're set in the vault but not used anywhere:\n\n    manage.py settings_shake \\\n        --token=<token> \\\n        --root=<root> \\\n        --domain=<domain> \\\n        --project=<project> \\\n        --environment=<environment>\n\nFor simplicity once you set the `DIRECTORY_COMPONENTS_VAULT_DOMAIN`, `DIRECTORY_COMPONENTS_VAULT_PROJECT`, and `DIRECTORY_COMPONENTS_VAULT_ROOT_PATH` that simplifies to\n\n    manage.py settings_shake \\\n        --token=<token> \\\n        --environment=<environment>\n\n\n## Publish to PyPI\n\nThe package should be published to PyPI on merge to master. If you need to do it locally then get the credentials from rattic and add the environment variables to your host machine:\n\n| Setting                      |\n| ----------------------------- |\n| `DIRECTORY_PYPI_USERNAME`     |\n| `DIRECTORY_PYPI_PASSWORD`     |\n\n\nThen run the following command:\n\n    make publish\n\n\n[code-climate-image]: https://codeclimate.com/github/uktrade/directory-components/badges/issue_count.svg\n[code-climate]: https://codeclimate.com/github/uktrade/directory-components\n\n[circle-ci-image]: https://circleci.com/gh/uktrade/directory-components/tree/master.svg?style=shield\n[circle-ci]: https://circleci.com/gh/uktrade/directory-components/tree/master\n\n[codecov-image]: https://codecov.io/gh/uktrade/directory-components/branch/master/graph/badge.svg\n[codecov]: https://codecov.io/gh/uktrade/directory-components\n\n[pypi-image]: https://badge.fury.io/py/directory-components.svg\n[pypi]: https://badge.fury.io/py/directory-components\n\n[semver-image]: https://img.shields.io/badge/Versioning%20strategy-SemVer-5FBB1C.svg\n[semver]: https://semver.org\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/uktrade/great-components", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "great-components", "package_url": "https://pypi.org/project/great-components/", "platform": "", "project_url": "https://pypi.org/project/great-components/", "project_urls": {"Homepage": "https://github.com/uktrade/great-components"}, "release_url": "https://pypi.org/project/great-components/1.1.0/", "requires_dist": ["django (<3.0a1,>=1.11)", "beautifulsoup4 (<5.0.0,>=4.6.0)", "directory-constants (<21.0.0,>=20.3.0)", "jsonschema (<4.0.0,>=3.0.1)", "lorem (==0.1.1) ; extra == 'demo'", "django-environ (==0.4.5) ; extra == 'demo'", "gunicorn (==19.5.0) ; extra == 'demo'", "whitenoise (==3.3.1) ; extra == 'demo'", "django-pygments (==0.3.0) ; extra == 'demo'", "ansicolors (<2.0.0,>=1.1.8) ; extra == 'janitor'", "lorem (==0.1.1) ; extra == 'test'", "ansicolors (==1.1.8) ; extra == 'test'", "codecov (==2.0.9) ; extra == 'test'", "flake8 (==3.7.8) ; extra == 'test'", "pytest-cov (==2.6.1) ; extra == 'test'", "pytest-django (==3.3.0) ; extra == 'test'", "pytest-sugar ; extra == 'test'", "pytest (==3.6.0) ; extra == 'test'", "requests-toolbelt (==0.8.0) ; extra == 'test'", "requests (==2.21.0) ; extra == 'test'", "twine (<2.0.0,>=1.11.0) ; extra == 'test'", "wheel (<1.0.0,>=0.31.0) ; extra == 'test'", "setuptools (<39.0.0,>=38.6.0) ; extra == 'test'", "vulture (<2.0.0,>=1.0.0) ; extra == 'test'", "hvac (<1.0.0,>=0.9.5) ; extra == 'test'"], "requires_python": "", "summary": "Shared components library for Great services.", "version": "1.1.0"}, "last_serial": 6733809, "releases": {"1.0.0": [{"comment_text": "", "digests": {"md5": "b35768aceecaff4a844471c745ea9844", "sha256": "401afd078ff43fbc33ef54512b52d7f126a0b783b634965fe1136c0732614e3f"}, "downloads": -1, "filename": "great_components-1.0.0-py3-none-any.whl", "has_sig": false, "md5_digest": "b35768aceecaff4a844471c745ea9844", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 1775143, "upload_time": "2020-02-20T12:51:44", "upload_time_iso_8601": "2020-02-20T12:51:44.315608Z", "url": "https://files.pythonhosted.org/packages/6e/00/60833eb781f841457dc6932494784e20d23da663a89045c89d35aebb0d29/great_components-1.0.0-py3-none-any.whl"}], "1.1.0": [{"comment_text": "", "digests": {"md5": "90b0271011d83f4b7e3a04becc24487a", "sha256": "4fae22d9afca18e271d24a7b7472243279733b5ec6b0b3204c35d72a579339a4"}, "downloads": -1, "filename": "great_components-1.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "90b0271011d83f4b7e3a04becc24487a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 1775330, "upload_time": "2020-03-02T14:42:03", "upload_time_iso_8601": "2020-03-02T14:42:03.575702Z", "url": "https://files.pythonhosted.org/packages/f6/35/ecc668fa089c3582a256a7ddcccd12e4d3fedb09c89c40cb605912de9461/great_components-1.1.0-py3-none-any.whl"}]}, "urls": [{"comment_text": "", "digests": {"md5": "90b0271011d83f4b7e3a04becc24487a", "sha256": "4fae22d9afca18e271d24a7b7472243279733b5ec6b0b3204c35d72a579339a4"}, "downloads": -1, "filename": "great_components-1.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "90b0271011d83f4b7e3a04becc24487a", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 1775330, "upload_time": "2020-03-02T14:42:03", "upload_time_iso_8601": "2020-03-02T14:42:03.575702Z", "url": "https://files.pythonhosted.org/packages/f6/35/ecc668fa089c3582a256a7ddcccd12e4d3fedb09c89c40cb605912de9461/great_components-1.1.0-py3-none-any.whl"}]}