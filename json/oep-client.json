{"info": {"author": "Christian Winger", "author_email": "c.winger@oeko.de", "bugtrack_url": null, "classifiers": ["Operating System :: OS Independent", "Programming Language :: Python :: 3"], "description": "# OEP Client\n\nThis tool tries to make data sharing with the OEP as easy as possible. Common tasks are:\n\n* creating a table\n* uploading data\n* updating a table's metadata\n* downloading data\n* retrieving a table's metadata \n* deleting a table (that you created)\n\nYou can also always just use the API `(TODO: link to documentation)` directly if your tasks are more complex.  \n\n## Notes for Windows Users\n\nAll the example commands below use `python3`, because we need python 3. Under Windows, it's most likely to be `python.exe` or just `python`.\n \n\n## Installation\n\nInstall package `oep-client` from python package index with pip:\n\n```bash\npython3 -m pip install --upgrade oep-client\n```\n\n## Authentification\n\nYou need to be [registered on the OEP platform](https://openenergy-platform.org/user/register) and have a valid API token.\nYou can find your token in your user profile on the OEP under _Your Security Information_.\n\n## Test\n\nThere is a short test script that creates a table on the platform, uploads data and metadata, downloads them again \nand finally deletes the table.\n\nYou can run it either directly from the command prompt\n\n```\noep-client --test --token API_TOKEN\n```\n\n`TODO: example output if everything is ok`\n\n\n## Notes on Data and Metadata\n\nSupported filetypes for input data are: xslx, csv, json\n\nMetadata must be a json file that complies with the metadata specification of the OEP `(TODO: link)` \n\n## Notes on Usage\n\nAll tasks can be executed either directly as a comand line script (CLI) `oep-client` that comes with this package, or in a python environment.\n\nThe CLI is very handy for standardized tasks as it requires just one command line, but is somewhat limited when for instance your input data is not in a very specific format.\nTo see avaiblabe command line options, use\n```\noep-client --help\n```\n\nIn a python environment, you have more flexibility to prepare / clean your data before uploading it.\n\n## Notes on Names\n\n`TODO: schema.tablename, but upload only in model_draft ...`\n\n\n# Using the CLI\n\n## Creating a table\n\nRequires a valid metadata file.\n\nYou need to specify names and data types of your columns in the metadata, which also must be valid [post-gres data types](https://www.postgresql.org/docs/9.5/datatype.html \"postgres data types\").\n\nExample (excerpt):\n```\n{\n  \"resources\": [\n    {\n      \"schema\": {\n        \"fields\": [\n          {\n            \"name\": \"id\",\n            \"type\": \"bigserial\"\n          },\n          {\n            \"name\": \"field_1\",\n            \"type\": \"character vaying(32)\",\n            \"description\": \"column description\",\n            \"unit\": \"unit name\"\n          }\n        ]\n      }\n    }\n  ]\n}\n```\n\n```bash\noep-client -t API_TOKEN -n TABLE_NAME -m METADATA --create \n```\n\n## Uploading data\n\n```bash\noep-client -t API_TOKEN -n TABLE_NAME --upload-data FILENAME \n```\nif  `FILENAME` is a \n* `xlsx`, you *have to* also specify `--sheet SHEETNAME`  \n* `csv`, you *may* also specify  `--delimiter DELIMITER` and or  `--encoding ENCODING`  \n\n## Updating a table's metadata\n\nRequires a valid metadata file.\n\n```bash\noep-client -t API_TOKEN -n TABLE_NAME -m METADATA --update-metadata  \n```\n\nyou can also add use `--validate` to check if the metadata file is valid according to the OEP metadata specification\n\n## Downloading data\n\nNote: you do not need an API_TOKEN to downlad data. Also, the table might not be in the `model_draft` schema, in which case you can specify the table name as  `schema_name.table_name`  \n\n```bash\noep-client -n TABLE_NAME FILENAME\n```\nif  `FILENAME` is a \n* `xlsx`, you *have to* also specify `--sheet SHEETNAME`  \n* `csv`, you *may* also specify  `--delimiter DELIMITER` and or  `--encoding ENCODING`\n\n## Retrieving a table's metadata \n\nNote: you do not need an API_TOKEN to downlad metadata. Also, the table might not be in the `model_draft` schema, in which case you can specify the table name as  `schema_name.table_name`  \n\n```bash\noep-client -n TABLE_NAME --download-metadata FILENAME \n```\n\n## Deleting a table (that you created)\n\n```bash\noep-client -t API_TOKEN -n TABLE_NAME --delete\n```\n\n\n\n# Using the Package in Python\n\nAll examples assume that you import the package and create a client instance first:\n```\nfrom oep_client import OepClient\ncl = OepClient(token='API_TOKEN', ...)\n```\n\n`... TODO` \n\n\n# More Information - Use the API without the oep-client\n\nThis document describes how to upload data to the [OEP](https://openenergy-platform.org \"OEP\") using Python and the REST-API.\n## Create and upload data table(s)\n* The REST-API can be used with any language than can make HTTP(s) requests.\n\n* Most requests require you to add an authorization header: \nAuthorization: `Token API_TOKEN`, where you substitute `API_TOKEN` with your token.\n\n* All requests (and most responses) will use json data as payload. A paylpad is the actual data content of the request.\n\n* An example is provided below. For it, we use python and the [requests package](https://2.python-requests.org/en/master/ \"Python request package\"). All requests will use a requests session with the authorization header.\n\n```\nimport requests\nAPI_URL = 'https://openenergy-platform.org/api/v0'\nsession = requests.Session()\nsession.headers = {'Authorization': 'Token %s' % API_TOKEN}\n``` \n* The requests in the following sections use roughly the same pattern: \n    * Prepare your request payload as a json object\n    * Prepare your request url\n    * Send your request using the correct verb (get, post, put, delete)\n    * Check if the request was successful\n\n### Create a new table\n* You will create the tables at first in the [_model_draft_](https://openenergy-platform.org/dataedit/view/model_draft) schema. After a successful review later, the table will be moved to the final target schema.\n\n* You need to specify the name of the new table (`TABLE_NAME`), which should be a valid\npost-gresql table name, without spaces, ideally only containing lower case letters, numbers and underscores.\n\n* \n\n# make request and check using PUT\nres = session.put(url, json=data)\nres.raise_for_status()  # check: throws exception if not successful\n```\n### Upload data\n* To upload data, you must first load it into a json structure as a [list](https://www.w3schools.com/python/python_lists.asp \"python lists\") representing data rows, each of which is a [dictionary](https://www.w3schools.com/python/python_dictionaries.asp \"python dictionary\") mapping column names to values.\n\n* In the example, we will use [pandas](https://pypi.org/project/pandas/ \"pandas\") to read data from an Excel workbook (`WORKBOOK, WORKSHEET`) into a [data frame](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html \"data frame\") which we will then convert into a json object. Please note that this step will most likely require some modification to accommodate the specifics of your in-put data.\n\n* In addition to that, at the end, you need to load your data into the specified json structure.\n\n* After that, the data can be uploaded making a request to the API:\n```\n# load data into dataframe, convert into json\ndf = pd.read_excel(WORKBOOK, WORKSHEET)\nrecords = df.to_json(orient='records')\nrecords = json.loads(records)\n\n# prepare request payload\ndata = {'query': records}\n\n# prepare api url\nurl = API_URL + '/schema/model_draft/tables/' + TABLE_NAME + '/rows/new'\n\n# make request\nres = session.post(url, json=data)\nres.raise_for_status()  # check", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/wingechr/oep-client", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "oep-client", "package_url": "https://pypi.org/project/oep-client/", "platform": "", "project_url": "https://pypi.org/project/oep-client/", "project_urls": {"Homepage": "https://github.com/wingechr/oep-client"}, "release_url": "https://pypi.org/project/oep-client/0.2.1/", "requires_dist": null, "requires_python": "", "summary": "client side tool for openenergy platform", "version": "0.2.1"}, "last_serial": 6942167, "releases": {"0.0.0": [{"comment_text": "", "digests": {"md5": "66df2ce100ec90282f418e5ef56626d0", "sha256": "ef318fc4545cebe7b6d16d00469a06984371368e260086f29eb14d780a1eabc7"}, "downloads": -1, "filename": "oep-client-0.0.0.tar.gz", "has_sig": false, "md5_digest": "66df2ce100ec90282f418e5ef56626d0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 1120, "upload_time": "2020-03-30T06:45:30", "upload_time_iso_8601": "2020-03-30T06:45:30.360929Z", "url": "https://files.pythonhosted.org/packages/4a/3f/2a27efe245d329791eb673f64981557a86f5327461a0c241cce13f9ee305/oep-client-0.0.0.tar.gz"}], "0.1.0": [{"comment_text": "", "digests": {"md5": "be80f3a8e1659b2f4266948b8bab8f2f", "sha256": "e17d3bfc81d4eb56c24220ddb46ccba6ed7e59e8d7ffbce67e290214d8cea842"}, "downloads": -1, "filename": "oep-client-0.1.0.tar.gz", "has_sig": false, "md5_digest": "be80f3a8e1659b2f4266948b8bab8f2f", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6892, "upload_time": "2020-03-30T13:10:01", "upload_time_iso_8601": "2020-03-30T13:10:01.849928Z", "url": "https://files.pythonhosted.org/packages/3a/87/ec5f89365c5f6fa673e84cfbbe08cdde895871d776025ef8ad95585c98b4/oep-client-0.1.0.tar.gz"}], "0.1.1": [{"comment_text": "", "digests": {"md5": "16f66d7c6647113435038e88b571d1e3", "sha256": "4dd955d8ccec0c41eadb3b089a05acca2e02fdb80ca518f1034b71fe49bf3f3c"}, "downloads": -1, "filename": "oep-client-0.1.1.tar.gz", "has_sig": false, "md5_digest": "16f66d7c6647113435038e88b571d1e3", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7233, "upload_time": "2020-04-03T07:32:14", "upload_time_iso_8601": "2020-04-03T07:32:14.539618Z", "url": "https://files.pythonhosted.org/packages/e0/27/37f0bf76fa4c8949e55a6a8104d8a9c0c6ab72c84ec4d543d373eb8ffa06/oep-client-0.1.1.tar.gz"}], "0.1.2": [{"comment_text": "", "digests": {"md5": "7998cf81cf78a73010a1461144e859d0", "sha256": "0a68e8c6d33743422a307a3a55873eee4806aaaa9d6dbffc1cf118d74a20b647"}, "downloads": -1, "filename": "oep-client-0.1.2.tar.gz", "has_sig": false, "md5_digest": "7998cf81cf78a73010a1461144e859d0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 7292, "upload_time": "2020-04-03T07:59:42", "upload_time_iso_8601": "2020-04-03T07:59:42.400018Z", "url": "https://files.pythonhosted.org/packages/64/db/303d61e363e44523b52ef07021a4b0c60c657ebbbdbde716e894e95fba41/oep-client-0.1.2.tar.gz"}], "0.2.0": [{"comment_text": "", "digests": {"md5": "c7beb4a15f34339baaee20262c74ce6a", "sha256": "cca142e7d4cd3c6f4dfbb3131159c69a1334eeba9d014ea29ec620d1058a1bcb"}, "downloads": -1, "filename": "oep-client-0.2.0.tar.gz", "has_sig": false, "md5_digest": "c7beb4a15f34339baaee20262c74ce6a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8977, "upload_time": "2020-04-03T08:37:08", "upload_time_iso_8601": "2020-04-03T08:37:08.227870Z", "url": "https://files.pythonhosted.org/packages/2a/dd/d78d4b53998cbe923c42b5a5412c97327acf1d1874bee3ca34902c6005eb/oep-client-0.2.0.tar.gz"}], "0.2.1": [{"comment_text": "", "digests": {"md5": "cabe4b02d6a4927ca6b3adc3b1f72dfe", "sha256": "51ef25b7205adbb52318d4e51e9a4776401236067586f6b1109121702538b6ef"}, "downloads": -1, "filename": "oep-client-0.2.1.tar.gz", "has_sig": false, "md5_digest": "cabe4b02d6a4927ca6b3adc3b1f72dfe", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9620, "upload_time": "2020-04-03T09:23:49", "upload_time_iso_8601": "2020-04-03T09:23:49.856220Z", "url": "https://files.pythonhosted.org/packages/0c/2d/cd044741878e731a090343080822af16b72ea6fe91ebcaac5b4334ad7798/oep-client-0.2.1.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "cabe4b02d6a4927ca6b3adc3b1f72dfe", "sha256": "51ef25b7205adbb52318d4e51e9a4776401236067586f6b1109121702538b6ef"}, "downloads": -1, "filename": "oep-client-0.2.1.tar.gz", "has_sig": false, "md5_digest": "cabe4b02d6a4927ca6b3adc3b1f72dfe", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9620, "upload_time": "2020-04-03T09:23:49", "upload_time_iso_8601": "2020-04-03T09:23:49.856220Z", "url": "https://files.pythonhosted.org/packages/0c/2d/cd044741878e731a090343080822af16b72ea6fe91ebcaac5b4334ad7798/oep-client-0.2.1.tar.gz"}]}