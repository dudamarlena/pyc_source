{"info": {"author": "Olivier Dalang", "author_email": "olivier.dalang@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Framework :: Django :: 2.2", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Natural Language :: English", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.7"], "description": "# Django Too Simple Queue\n\n[![PyPI version](https://badge.fury.io/py/django-toosimple-q.svg)](https://pypi.org/project/django-toosimple-q/) ![Workflow](https://github.com/olivierdalang/django-toosimple-q/workflows/ci/badge.svg)\n\nThis packages provides a simplistic task queue and scheduler for Django.\n\nIf execution of your tasks is mission critical, do not use this library, and turn to more complex solutions such as Celery, as this package doesn't guarantee task execution nor unique execution.\n\nIt is geared towards basic apps, where simplicity primes over reliability. The package offers simple decorator syntax, including cron-like schedules.\n\nFeatures :\n\n- no celery/redis/rabbitmq/whatever... just Django !\n- clean decorator syntax to register tasks and schedules\n- simple queuing syntax\n- cron-like scheduling\n- tasks.py autodiscovery\n- django admin integration\n\nLimitations :\n\n- probably not extremely reliable because of race conditions\n- no multithreading yet (but running multiple workers should work)\n\n## Installation\n\nInstall the library :\n```shell\n$ pip install django-toosimple-q\n```\n\nEnable the app in `settings.py` :\n```python\nINSTALLED_APPS = [\n    ...\n    'django_toosimple_q',\n    ...\n]\n```\n\n## Quickstart\n\nTasks need to be registered using the `@register_task()` decorator. Once registered, they can be added to the queue by calling the `.queue()` function.\n\n```python\nfrom django_toosimple_q.decorators import register_task\n\n# Register a task\n@register_task()\ndef my_task(name):\n    return f\"Hello {name} !\"\n\n# Enqueue tasks\nmy_task.queue(\"John\")\nmy_task.queue(\"Peter\")\n```\n\nRegistered tasks can be scheduled from code using this cron-like syntax :\n```python\nfrom django_toosimple_q.decorators import register_task, schedule\n\n# Register and schedule tasks\n@schedule(cron=\"30 8 * * *\", args=['John'])\n@register_task()\ndef morning_routine(name):\n    return f\"Good morning {name} !\"\n```\n\nTo consume the tasks, you need to run at least one worker :\n```shell\n$ python manage.py worker\n```\nThe workers will take care of adding scheduled tasks to the queue when needed, and will execute the tasks.\n\nThe package autoloads `tasks.py` from all installed apps. While this is the recommended place to define your tasks, you can do so from anywhere in your code.\n\n## Advanced usage\n\n### Tasks\n\nYou can optionnaly give a custom name to your tasks. This is required when your task is defined in a local scope.\n```python\n@register_task(\"my_favourite_task\")\ndef my_task(name):\n    return f\"Good morning {name} !\"\n```\n\nYou can set task priorities.\n```python\n@register_task(priority=0)\ndef my_favourite_task(name):\n    return f\"Good bye {name} !\"\n\n@register_task(priority=1)\ndef my_other_task(name):\n    return f\"Hello {name} !\"\n\n# Enqueue tasks\nmy_other_task.queue(\"John\")\nmy_favourite_task.queue(\"Peter\")  # will be executed before the other one\n```\n\nYou can mark a task as `unique=True` if the task shouldn't be queued again if already queued with the same arguments. This is usefull for tasks such as cleaning or refreshing.\n\n```python\n@register_task(unique=True)\ndef cleanup():\n    ...\n\ncleanup.queue()\ncleanup.queue()  # this will be ignored as long as the first one is still queued\n```\n\nYou can assign tasks to specific queues, and then have your worker only consume tasks from specific queues using `--queue myqueue` or `--exclude_queue myqueue`. By default, workers consume all tasks.\n\n```python\n@register_task(queue='long_running')\ndef long_task():\n    ...\n\n@register_task()\ndef short_task():\n    ...\n\n# Then run those with these workers, so that long\n# running tasks don't prevent short running tasks\n# from being run :\n# manage.py worker --exclude_queue long_running\n# manage.py worker\n```\n\n### Schedules\n\nBy default, `last_run` is set to `now()` on schedule creation. This means they will only run on next cron occurence. If you need your schedules to be run as soon as possible after initialisation, you can specify `last_run=None`.\n\n```python\n@schedule(cron=\"30 8 * * *\", last_run=None)\n@register_task()\ndef my_task(name):\n    return f\"Good morning {name} !\"\n```\n\nBy default, if some crons where missed (e.g. after a server shutdown or if the workers can't keep up with all tasks), the missed tasks will be lost. If you need the tasks to catch up, set `catch_up=True`.\n\n```python\n@schedule(cron=\"30 8 * * *\", catch_up=True)\n@register_task()\ndef my_task(name):\n    ...\n```\n\nYou may define multiple schedules for the same task. In this case, it is mandatory to specify a unique name :\n\n```python\n@schedule(name=\"morning_routine\", cron=\"30 16 * * *\", args=['morning'])\n@schedule(name=\"afternoon_routine\", cron=\"30 8 * * *\", args=['afternoon'])\n@register_task()\ndef my_task(time):\n    return f\"Good {time} John !\"\n```\n\n## Dev\n\n### Tests\n\n```shell\n$ python manage.py test\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/olivierdalang/django-toosimple-q", "keywords": "django-toosimple-q", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "django-toosimple-q", "package_url": "https://pypi.org/project/django-toosimple-q/", "platform": "", "project_url": "https://pypi.org/project/django-toosimple-q/", "project_urls": {"Homepage": "https://github.com/olivierdalang/django-toosimple-q"}, "release_url": "https://pypi.org/project/django-toosimple-q/0.0.3/", "requires_dist": ["django (>=2.0)", "django-picklefield (~=2.0)", "croniter (~=0.3.30)"], "requires_python": "", "summary": "A simplistic task queue and cron-like scheduler for Django", "version": "0.0.3"}, "last_serial": 6603360, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "d58f76861117ed1a4c55374bf3458d01", "sha256": "b3d59d2532926e7b0916fc4b20361415182bc7b49521e618583e199604c75cec"}, "downloads": -1, "filename": "django_toosimple_q-0.0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "d58f76861117ed1a4c55374bf3458d01", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 11454, "upload_time": "2019-11-01T14:09:14", "upload_time_iso_8601": "2019-11-01T14:09:14.309196Z", "url": "https://files.pythonhosted.org/packages/c5/c2/39d01b943dc33949befbbf51094e08769ea9bd1fe11c3a7c23d0e2d8a318/django_toosimple_q-0.0.1-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "b8fabb85a0e0b2e4f8f1c3174f4fef94", "sha256": "2e522662c860ced39c0600872abd059f4a2ce03cb8d3f0e71662dd80befa1806"}, "downloads": -1, "filename": "django-toosimple-q-0.0.1.tar.gz", "has_sig": false, "md5_digest": "b8fabb85a0e0b2e4f8f1c3174f4fef94", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 8644, "upload_time": "2019-11-01T14:09:16", "upload_time_iso_8601": "2019-11-01T14:09:16.605430Z", "url": "https://files.pythonhosted.org/packages/42/07/50c73a1ebff4d04c5f5f452b90998eff6992f29a1e62a37516dcfeb2459e/django-toosimple-q-0.0.1.tar.gz"}], "0.0.2": [{"comment_text": "", "digests": {"md5": "a0ad7137d885aa908f97c1a3c09e83a2", "sha256": "d7b1115fee28596ac3841c8065646f5f164eb2819bcd30984cbaf1356fe5faac"}, "downloads": -1, "filename": "django_toosimple_q-0.0.2-py3-none-any.whl", "has_sig": false, "md5_digest": "a0ad7137d885aa908f97c1a3c09e83a2", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 15917, "upload_time": "2019-12-04T21:45:31", "upload_time_iso_8601": "2019-12-04T21:45:31.121481Z", "url": "https://files.pythonhosted.org/packages/4b/14/6ae141f1952212d1ec267d7a671b96a080ac6d3afd1a5ab43fc23aa9ff27/django_toosimple_q-0.0.2-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "66de0fbfd007e0c176927cad3ac14413", "sha256": "e8c0c08432ca9d268ef90848528ece1f3d6e6e3c4dfc4a403c3b21fe9f245957"}, "downloads": -1, "filename": "django-toosimple-q-0.0.2.tar.gz", "has_sig": false, "md5_digest": "66de0fbfd007e0c176927cad3ac14413", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 13294, "upload_time": "2019-12-04T21:45:32", "upload_time_iso_8601": "2019-12-04T21:45:32.579401Z", "url": "https://files.pythonhosted.org/packages/19/66/c759dbdeb762cb785476498af12caae166b490c4e149d6b7173b7b27795b/django-toosimple-q-0.0.2.tar.gz"}], "0.0.2b0": [{"comment_text": "", "digests": {"md5": "29eef7a51ac4f1cd6e175a24f4bb811c", "sha256": "627e90b4ea0af1c355beab2fbdbb6d96ecb3114c2fc0c91f5044b21bc4744ba8"}, "downloads": -1, "filename": "django_toosimple_q-0.0.2b0-py3-none-any.whl", "has_sig": false, "md5_digest": "29eef7a51ac4f1cd6e175a24f4bb811c", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 15943, "upload_time": "2019-12-04T21:35:23", "upload_time_iso_8601": "2019-12-04T21:35:23.137626Z", "url": "https://files.pythonhosted.org/packages/be/c9/310350916d5f166ffb670df7abf6d25189b1ff6e06f9a68a7d59d4cb82ee/django_toosimple_q-0.0.2b0-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "5cd721ca34e4797a9e435455dbaf2016", "sha256": "f3e99213148c13341aa97149ea7b407c2ecdb0ef1fb3a4cbd81fbe0367327038"}, "downloads": -1, "filename": "django-toosimple-q-0.0.2b0.tar.gz", "has_sig": false, "md5_digest": "5cd721ca34e4797a9e435455dbaf2016", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 13298, "upload_time": "2019-12-04T21:35:25", "upload_time_iso_8601": "2019-12-04T21:35:25.242204Z", "url": "https://files.pythonhosted.org/packages/d7/87/25d12db2fc6e1d697738579377bd96e07f2e3b898287e29afd01eadc0c09/django-toosimple-q-0.0.2b0.tar.gz"}], "0.0.3": [{"comment_text": "", "digests": {"md5": "1142e9a631a75c922761712786a0073d", "sha256": "16f96478ef717ccad35cc17afb2b82bcb298f455d03772cb7bdf84aef5e2c62c"}, "downloads": -1, "filename": "django_toosimple_q-0.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "1142e9a631a75c922761712786a0073d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 16033, "upload_time": "2020-02-10T15:56:03", "upload_time_iso_8601": "2020-02-10T15:56:03.291873Z", "url": "https://files.pythonhosted.org/packages/8d/54/46cd9047e95d335e76441cc0df145d0e8a567ef8510e9eefe62dea74db14/django_toosimple_q-0.0.3-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "b50787b79b317fe48693ebc6269d6db6", "sha256": "2f11e4b1e06d0e18e8b65ea6d97c4cff068a5a1b04d610f038eb41aa6ac55b11"}, "downloads": -1, "filename": "django-toosimple-q-0.0.3.tar.gz", "has_sig": false, "md5_digest": "b50787b79b317fe48693ebc6269d6db6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 13344, "upload_time": "2020-02-10T15:56:05", "upload_time_iso_8601": "2020-02-10T15:56:05.033687Z", "url": "https://files.pythonhosted.org/packages/23/b9/22b86dcbe780c9d682d587eda48474100b350bc5daaa328ca1c8780073b0/django-toosimple-q-0.0.3.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "1142e9a631a75c922761712786a0073d", "sha256": "16f96478ef717ccad35cc17afb2b82bcb298f455d03772cb7bdf84aef5e2c62c"}, "downloads": -1, "filename": "django_toosimple_q-0.0.3-py3-none-any.whl", "has_sig": false, "md5_digest": "1142e9a631a75c922761712786a0073d", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": null, "size": 16033, "upload_time": "2020-02-10T15:56:03", "upload_time_iso_8601": "2020-02-10T15:56:03.291873Z", "url": "https://files.pythonhosted.org/packages/8d/54/46cd9047e95d335e76441cc0df145d0e8a567ef8510e9eefe62dea74db14/django_toosimple_q-0.0.3-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "b50787b79b317fe48693ebc6269d6db6", "sha256": "2f11e4b1e06d0e18e8b65ea6d97c4cff068a5a1b04d610f038eb41aa6ac55b11"}, "downloads": -1, "filename": "django-toosimple-q-0.0.3.tar.gz", "has_sig": false, "md5_digest": "b50787b79b317fe48693ebc6269d6db6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 13344, "upload_time": "2020-02-10T15:56:05", "upload_time_iso_8601": "2020-02-10T15:56:05.033687Z", "url": "https://files.pythonhosted.org/packages/23/b9/22b86dcbe780c9d682d587eda48474100b350bc5daaa328ca1c8780073b0/django-toosimple-q-0.0.3.tar.gz"}]}