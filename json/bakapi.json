{"info": {"author": "Mat\u011bj Volf", "author_email": "mat.volfik@gmail.com", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Natural Language :: Czech", "Operating System :: OS Independent", "Programming Language :: Python :: 3 :: Only", "Topic :: Education"], "description": "# Bakal\u00e1\u0159i API v3 client\n\n```\nBaka(l\u00e1\u0159i)\n   API\n------\nBakapi\n```\n\nJednoduch\u00fd klient k API Bakal\u00e1\u0159\u016f pro Python.\n\n## Dokumentace\n\n_The code is the documentation. (Pls nau\u010dte m\u011b n\u011bkdo Sphinx)_\n\nModul obsahuje hlavn\u00ed t\u0159\u00eddu `BakapiUser`.\n\nKonstruktor vy\u017eaduje t\u0159i **keyword** argumenty:\n`url`, `username` a `password`. Tyto vyu\u017eije k z\u00edsk\u00e1n\u00ed prvn\u00edho `access_token`u a\n`refresh_token`u.\n\n### Metody instanc\u00ed `BakapiUser`\n\n`send_request(endpoint, method=\"GET\", **kwargs)` zkontroluje platnost\n`access_token`u, p\u0159\u00edpadn\u011b ho obnov\u00ed. Pot\u00e9 po\u0161le po\u017eadavek s autoriza\u010dn\u00edm headrem.\n`kwargs` jsou p\u0159ed\u00e1ny metod\u011b\n[`requests.request`](https://requests.readthedocs.io/en/latest/api/#requests.request).  \nVrac\u00ed [`requests.Response`](https://requests.readthedocs.io/en/latest/api/#requests.Response)\n\n`query_api(endpoint, method=\"GET\", **kwargs)` vol\u00e1 `send_request`, pouze nav\u00edc\nov\u011b\u0159uje, \u017ee dostala validn\u00ed JSON odpov\u011b\u010f.  \nVrac\u00ed naparsovan\u00e1 data jako `dict`\n\n`get_user_info()` z\u00edsk\u00e1 informace o u\u017eivateli, vrac\u00ed `dict` tak, jak ho dostane od\nBakal\u00e1\u0159\u016f. Vypad\u00e1 zhruba takto:\n\n```python\n{'UserUID': '...',\n 'Class': <trida>,\n 'FullName': '...',\n 'SchoolOrganizationName': '...',\n 'SchoolType': None,\n 'UserType': 'student',\n 'UserTypeText': '\u017e\u00e1k',\n 'StudyYear': 1,\n 'EnabledModules': [\n    {'Module': '<nazev modulu>', 'Rights': ['...']}\n  ],\n 'SettingModules': {'...?'}\n}\n```\n\nZn\u00e1m\u00e9 n\u00e1zvy modul\u016f:  \nKomens, Absence, Events, Marks, Timetable, Substitutions, Subjects, Homeworks, Gdpr\n\nT\u0159\u00edda je jednoduch\u00fd `dict`, vypad\u00e1 takto:\n\n```python\n{'Id': '...', 'Abbrev': '...', 'Name': '...'}\n```\n`get_homework()` z\u00edsk\u00e1 seznam v\u0161ech \u00fakol\u016f, vrac\u00ed `dict` tak, jak ho dostane od\nBakal\u00e1\u0159\u016f. Vypad\u00e1 takto:\n\n```python\n{\"Homeworks\": [\n    <ukoly>\n  ]\n}\n```\n\nKa\u017ed\u00fd \u00fakol vypad\u00e1 zhruba takto:\n\n```python\n{'ID': '...',\n 'DateAward': '0001-01-01T00:00:00+01:00',\n 'DateControl': None,\n 'DateDone': '0001-01-01T00:00:00+01:00',\n 'DateStart': '0001-01-01T00:00:00+01:00',\n 'DateEnd': '0001-01-01T00:00:00+01:00',\n 'Content': '...',\n 'Notice': '',\n 'Done': True,\n 'Closed': True,\n 'Electronic': False,\n 'Hour': 6,\n 'Class': <trida>,\n 'Group': <skupina>,\n 'Subject': <predmet>,\n 'Teacher': <ucitel>,\n 'Attachments': [<prilohy>]}\n```\n\nT\u0159\u00edda, skupina, p\u0159edm\u011bt a u\u010ditel jsou jednoduch\u00fd `dict`, viz t\u0159\u00edda u `get_user_info()`\n\nKa\u017ed\u00e1 p\u0159\u00edloha vypad\u00e1 takto:\n\n```python\n{'Id': '...',\n     'Name': '...',\n     'Type': 'mime/type'}\n```\n\n`get_received_komens_messages()` z\u00edsk\u00e1 seznam v\u0161ech p\u0159ijat\u00fdch zpr\u00e1v v Komens, vrac\u00ed\n`dict` tak, jak ho dostane od Bakal\u00e1\u0159\u016f. Vypad\u00e1 takto:\n\n```python\n{\"Messages\": [\n    <zpravy>\n  ]\n}\n```\n\nKa\u017ed\u00e1 zpr\u00e1va vypad\u00e1 zhruba takto:\n\n```python\n{'$type': 'GeneralMessage',\n 'Id': '...',\n 'Title': 'Obecn\u00e1 zpr\u00e1va',\n 'Text': '...',\n 'SentDate': '0001-01-01T00:00:00+01:00',\n 'Sender': <odesilatel>,\n 'Attachments': [<prilohy>],\n 'Read': True,\n 'LifeTime': 'ToRead',\n 'DateFrom': None,\n 'DateTo': None,\n 'Confirmed': True,\n 'CanConfirm': False,\n 'Type': 'OBECNA',\n 'CanAnswer': True,\n 'Hidden': False,\n 'CanHide': True,\n 'RelevantName': '...',\n 'RelevantPersonType': 'teacher|administrator|...?'}\n```\n\nOdes\u00edlatel je jednoduch\u00fd `dict`, viz t\u0159\u00edda u `get_user_info()`\n\nPro form\u00e1t p\u0159\u00edlohy viz \u00fakoly.\n\n`download_attachment(attachment_id)` st\u00e1hne p\u0159\u00edlohu s dan\u00fdm ID.  \nVrac\u00ed dvojici `filename`,\n[`urllib3.response.HTTPResponse`](https://urllib3.readthedocs.io/en/latest/reference/index.html#urllib3.response.HTTPResponse)\n\n**Dokumentace endpoint\u016f je pr\u016fb\u011b\u017en\u011b vytv\u00e1\u0159ena v repozit\u00e1\u0159i\n[bakalari-api/bakalari-api-v3](https://github.com/bakalari-api/bakalari-api-v3)**\n\n## Uk\u00e1zky\n\n### Pou\u017eit\u00ed p\u0159\u00edmo\n\n```python console\n>>> from bakapi import BakapiUser\n>>> u = BakapiUser(url=\"https://bakalari.skola.cz\", username=\"jan_novak\", password=\"honzikovoHeslo\")\n>>> u.get_homework()\n{'Homeworks': [\n  {'ID': 'ABCDEFG',\n   '...': '...',\n   'Attachments': [\n     {'Id': 'EFAAAAG',\n      'Name': 'Ukol.doc',\n      'Type': 'application/msword'}]\n  },\n  '...'\n]}\n>>> with open(\"Ukol.doc\", \"wb\") as fh:\n...   fh.write(u.download_attachment(\"EFAAAAG\").content)\n```\n\n### Pou\u017eit\u00ed jako Mixin\n\nKnihovnu lze tak\u00e9 pou\u017e\u00edt jako Mixin do va\u0161\u00ed vlastn\u00ed classy u\u017eivatele.\n\nPokud nap\u0159\u00edklad chcete ve sv\u00e9 aplikaci ukl\u00e1dat data do datab\u00e1ze pomoc\u00ed SQLAlchemy,\nvytvo\u0159te classu u\u017eivatel takto:\n\n```python\nclass User(BakapiUser, DeclarativeBase):\n    id = Column(Integer, primary_key=True, autoincrement=True)\n\n    # API pou\u017e\u00edv\u00e1 tyto properties:\n    url = Column(String)\n    username = Column(String)\n    token_valid_until = Column(DateTime)\n    refresh_token = Column(String)\n    access_token = Column(String)\n\n    # dal\u0161\u00ed data, kter\u00e1 pou\u017e\u00edv\u00e1 va\u0161e aplikace\n    more_data = Column(String)\n\nu = User(\n    url=\"https://bakalari.skola.cz\",\n    username=\"jan_novak\",\n    password=\"honzikovoHeslo\",\n    more_data=\"neco\"\n)\n```\n\n- Je d\u016fle\u017eit\u00e9, aby BakapiUser byl v seznamu inherited classes prvn\u00ed, proto\u017ee on p\u0159ed\u00e1v\u00e1\nnepot\u0159ebn\u00e9 init parametry. Ostatn\u00ed classy to ale d\u011blat nemus\u00ed (a pr\u00e1v\u011b nap\u0159.\nDeclarativeBase to ned\u011bl\u00e1).\n- Nemus\u00edte definovat metodu `__init__`, ale pokud ji definujete, mus\u00ed volat\n`super().__init__()`\n- Konstruktor p\u0159\u00edj\u00edm\u00e1 t\u0159i povinn\u00e9 keyword argumenty \u2013 `url, username, password`. Cokoliv\ndal\u0161\u00edho po\u0161le d\u00e1l\n\nPro pochopen\u00ed doporu\u010duji\n[tuto StackOverflow answer](https://stackoverflow.com/a/50465583/7292139)\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/mvolfik/bakapi", "keywords": "", "license": "MIT License", "maintainer": "", "maintainer_email": "", "name": "bakapi", "package_url": "https://pypi.org/project/bakapi/", "platform": "", "project_url": "https://pypi.org/project/bakapi/", "project_urls": {"Code": "https://github.com/mvolfik/bakapi", "Documentation": "https://github.com/mvolfik/bakapi/blob/master/README.md", "Homepage": "https://github.com/mvolfik/bakapi", "Issue tracker": "https://github.com/mvolfik/bakapi/issues"}, "release_url": "https://pypi.org/project/bakapi/0.1/", "requires_dist": ["requests"], "requires_python": ">=3.6", "summary": "Bakal\u00e1\u0159i API v3 client", "version": "0.1"}, "last_serial": 6987841, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "a4da251d1910977d027b9171038e1995", "sha256": "805cafc8b999232947df212166e7accbd90a41835aab133fa92b020cc5638758"}, "downloads": -1, "filename": "bakapi-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "a4da251d1910977d027b9171038e1995", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 5747, "upload_time": "2020-04-09T16:57:09", "upload_time_iso_8601": "2020-04-09T16:57:09.473169Z", "url": "https://files.pythonhosted.org/packages/db/65/98af625a9905fec5611f21d19e20c75d762116a8ee732ae7ff4ec750801b/bakapi-0.1-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "4284f54a8d9a5bcd567f6b944bd91537", "sha256": "d9979673cd7e8b5ee75828e916c9fcb09a2e950d93082265ebfc049488040747"}, "downloads": -1, "filename": "bakapi-0.1.tar.gz", "has_sig": false, "md5_digest": "4284f54a8d9a5bcd567f6b944bd91537", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5476, "upload_time": "2020-04-09T16:57:12", "upload_time_iso_8601": "2020-04-09T16:57:12.054190Z", "url": "https://files.pythonhosted.org/packages/04/41/b15955fe820debd430f0b17296a8b97f70ec2abe444e8caaee45361d77bd/bakapi-0.1.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "a4da251d1910977d027b9171038e1995", "sha256": "805cafc8b999232947df212166e7accbd90a41835aab133fa92b020cc5638758"}, "downloads": -1, "filename": "bakapi-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "a4da251d1910977d027b9171038e1995", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 5747, "upload_time": "2020-04-09T16:57:09", "upload_time_iso_8601": "2020-04-09T16:57:09.473169Z", "url": "https://files.pythonhosted.org/packages/db/65/98af625a9905fec5611f21d19e20c75d762116a8ee732ae7ff4ec750801b/bakapi-0.1-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "4284f54a8d9a5bcd567f6b944bd91537", "sha256": "d9979673cd7e8b5ee75828e916c9fcb09a2e950d93082265ebfc049488040747"}, "downloads": -1, "filename": "bakapi-0.1.tar.gz", "has_sig": false, "md5_digest": "4284f54a8d9a5bcd567f6b944bd91537", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5476, "upload_time": "2020-04-09T16:57:12", "upload_time_iso_8601": "2020-04-09T16:57:12.054190Z", "url": "https://files.pythonhosted.org/packages/04/41/b15955fe820debd430f0b17296a8b97f70ec2abe444e8caaee45361d77bd/bakapi-0.1.tar.gz"}]}