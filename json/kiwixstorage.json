{"info": {"author": "kiwix", "author_email": "reg@kiwix.org", "bugtrack_url": null, "classifiers": ["Development Status :: 4 - Beta", "Intended Audience :: Developers", "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)", "Programming Language :: Python", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "kiwixstorage\n============\n\nhelpers for S3 storage, autoconf from URL + Wasabi (wasabisys.com) extras\n\nGoal is mainly to provide a configured s3.client and s3.resource from an URL\nUsers could limit usage to this and use [boto3](https://boto3.amazonaws.com/) directly from there.\n\nA few additional wrappers are in place to simplify common actions.\nAlso, non-S3, wasabi-specific features are exposed directly.\n\n# Usage\n\n``` sh\npip install kiwixstorage\n```\n\n## Connection\n\n``` py\nfrom kiwixstorage import KiwixStorage\nurl = \"https://s3.us-east-1.wasabisys.com/?keyId=x&secretAccessKey=y&bucketName=z\"\ns3 = KiwixStorage(url)\n# test credentials and ensure we can list buckets\nif not s3.check_credentials(list_buckets=True, failsafe=True):\n    return # bad auth\n```\n\n## Scraper use-case\n\n``` py\nonline_url = \"https://xxx\"\nfpath = \"/local/path.ext\"\n# retrieve origin etag\netag = req.headers.get(\"Etag\")\n# check if we have that very same version in store\nif s3.has_matching_object(key=url, etag=etag)\n    # lastest version in our store, download from there (using progress output)\n    s3.download_file(key=url, fpath=fpath, progress=True)\nelse:\n    # download the origin file using your regular tools\n    download_file(url, fpath)\n    # upload it our storage\n    s3.upload_file(fpath=fpath, key=url)\n# now you have a local file of lastest version and the storage is up to date\n```\n\n# Other use cases\n\n``` py\n# create a bucket\nbucket = s3.create_bucket(\"bucket_name\")\n\n# set auto-delete on bucket\ns3.set_bucket_autodelete_after(nb_days=7)\n\n# allow public downloads from bucket\ns3.allow_public_downloads_on()\n\n# upload a file\ns3.upload_file(fpath, \"some/path/file.img\", meta={\"ENCODER_VERSION\": \"v1\"})\n\n# set autodelete on specific file\ns3.set_object_autodelete_on(key, datetime.datetime.now())\n\n# download a file\ns3.download_file(key, fpath)\n\n# get URL for external download\ns3.get_download_url(key)\n\n```\n\n# Resources:\n\n* https://wasabi.com/wp-content/themes/wasabi/docs/API_Guide\n* https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/kiwix/python_storagelib", "keywords": "kiwix zim offline aws s3", "license": "GPLv3+", "maintainer": "", "maintainer_email": "", "name": "kiwixstorage", "package_url": "https://pypi.org/project/kiwixstorage/", "platform": "", "project_url": "https://pypi.org/project/kiwixstorage/", "project_urls": {"Homepage": "https://github.com/kiwix/python_storagelib"}, "release_url": "https://pypi.org/project/kiwixstorage/0.1/", "requires_dist": ["boto3 (<1.13,>=1.12.39)", "requests (<2.24,>=2.23.0)", "aws-requests-auth (<0.5,>=0.4.2)"], "requires_python": ">=3.6", "summary": "Kiwix S3 Cache wrapper to use within Kiwix/OpenZIM projects", "version": "0.1"}, "last_serial": 7011724, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "39a38c04645d30f251f6f7d3b7aa1123", "sha256": "1adc553632ce3e18b091b8f1afd9acf6fb386b7da509cb70edfd63d8388cdefe"}, "downloads": -1, "filename": "kiwixstorage-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "39a38c04645d30f251f6f7d3b7aa1123", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 32019, "upload_time": "2020-04-13T18:03:59", "upload_time_iso_8601": "2020-04-13T18:03:59.413055Z", "url": "https://files.pythonhosted.org/packages/60/3a/bcb440d3fd27fcf127cfd9deb18a18631995b7734f416c72a23bce09c781/kiwixstorage-0.1-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "a464848dccfdc5ba17c8b5c03d6639a8", "sha256": "42f4233d8aaa806ccdbe111f2334dbacaf4aa557bad59891aca0fe36f5282607"}, "downloads": -1, "filename": "kiwixstorage-0.1.tar.gz", "has_sig": false, "md5_digest": "a464848dccfdc5ba17c8b5c03d6639a8", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 31778, "upload_time": "2020-04-13T18:04:02", "upload_time_iso_8601": "2020-04-13T18:04:02.701271Z", "url": "https://files.pythonhosted.org/packages/1e/ab/ab05878b3bb70f696e777a288b71aa54826e9f8242127cbc37e5e3fe577b/kiwixstorage-0.1.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "39a38c04645d30f251f6f7d3b7aa1123", "sha256": "1adc553632ce3e18b091b8f1afd9acf6fb386b7da509cb70edfd63d8388cdefe"}, "downloads": -1, "filename": "kiwixstorage-0.1-py3-none-any.whl", "has_sig": false, "md5_digest": "39a38c04645d30f251f6f7d3b7aa1123", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6", "size": 32019, "upload_time": "2020-04-13T18:03:59", "upload_time_iso_8601": "2020-04-13T18:03:59.413055Z", "url": "https://files.pythonhosted.org/packages/60/3a/bcb440d3fd27fcf127cfd9deb18a18631995b7734f416c72a23bce09c781/kiwixstorage-0.1-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "a464848dccfdc5ba17c8b5c03d6639a8", "sha256": "42f4233d8aaa806ccdbe111f2334dbacaf4aa557bad59891aca0fe36f5282607"}, "downloads": -1, "filename": "kiwixstorage-0.1.tar.gz", "has_sig": false, "md5_digest": "a464848dccfdc5ba17c8b5c03d6639a8", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 31778, "upload_time": "2020-04-13T18:04:02", "upload_time_iso_8601": "2020-04-13T18:04:02.701271Z", "url": "https://files.pythonhosted.org/packages/1e/ab/ab05878b3bb70f696e777a288b71aa54826e9f8242127cbc37e5e3fe577b/kiwixstorage-0.1.tar.gz"}]}