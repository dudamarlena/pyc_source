{"info": {"author": "pik-software", "author_email": "no-reply@pik-software.ru", "bugtrack_url": null, "classifiers": ["Development Status :: 5 - Production/Stable", "Intended Audience :: Developers", "License :: OSI Approved :: MIT License", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Software Development"], "description": "# apiqa-storage #\n\nThis project aim is to provide user storage backend on minio\nfor all apiqa django projects.\n\n## HowToUse ##\n\n* Add `apiqa-storage` to `requirements.txt`.\n\n```\n# Minio file storage\ngit+https://github.com/pik-software/apiqa-storage.git#egg=apiqa-storage\n```\n\n* Add `apiqa_storage` to `INSTALLED_APPS` in settings file.\n\n```python\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    ...,\n    'apiqa_storage'\n]\n```\n\n* Add mixin `ModelWithAttachmentsMixin` to any model. Make and run migrations.\n\n```python\nfrom apiqa_storage.models import ModelWithAttachmentsMixin\n\nclass UserFile(ModelWithAttachmentsMixin, ...):\n    ...\n```\n\n* Add serializer mixin at the beginning and add `attachments`,\n `attachment_ids` to fields.\n\n```python\nfrom apiqa_storage.serializers import AttachmentsSerializerMixin\n\nclass ModelWithAttachmentsSerializer(AttachmentsSerializerMixin, ...):\n    ...\n\n    class Meta:\n        ...\n        fields = (..., 'attachments', 'attachment_ids')\n```\n\n* Add download and upload file urls to urlpatterns.\n\n```python\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('attachments/', include('apiqa_storage.urls')),\n]\n```\n\n* Or add staff download file url to urlpatterns.\n\n```python\nfrom django.urls import path, include\n\nurlpatterns = [  # noqa\n    path('attachments/', include('apiqa_storage.staff_urls')),\n]\n```\n\n* Add clean files task to celery beat config.\n\n```python\nfrom celery.schedules import crontab\nbeat_schedule = {\n    # apiqa-storage clean files\n    'purge_attachments': {\n        'task': 'apiqa_storage.tasks.purge_attachments',\n        'schedule': crontab(hour=5)\n    },\n}\n```\n\n* Add required minio settings. Create bucket on minio!\n[django minio storage usage](https://django-minio-storage.readthedocs.io/en/latest/usage/)\n\n```python\nMINIO_STORAGE_ENDPOINT = 'minio:9000'\nMINIO_STORAGE_ACCESS_KEY = ...\nMINIO_STORAGE_SECRET_KEY = ...\nMINIO_STORAGE_BUCKET_NAME = 'local-static'\n```\n* Other settings\n  * **MINIO_STORAGE_MAX_FILE_SIZE**: File size limit for upload, humanfriendly value. \n  See https://humanfriendly.readthedocs.io/en/latest/readme.html#a-note-about-size-units. Default 100M\n  * **MINIO_STORAGE_MAX_FILE_NAME_LEN**: File name length limit. Use for database char limit. Default 100\n  * **MINIO_STORAGE_MAX_FILES_COUNT**: Limit of files in one object. For example 5 files in ticket. None - is unlimited. Default None\n  * **MINIO_STORAGE_USE_HTTPS**: Use https for connect to minio. Default False\n  * **MINIO_STORAGE_CLEAN_PERIOD**: Delete files without related objects after N days. Default 30\n\n* Run test\n\n```bash\npip install -r requirements.txt\npip install -r requirements.dev.txt\ndocker-compose up\npytest --cov .\n```\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/pik-software/apiqa-storage.git", "keywords": "apiqo django", "license": "", "maintainer": "", "maintainer_email": "", "name": "apiqa-storage", "package_url": "https://pypi.org/project/apiqa-storage/", "platform": "", "project_url": "https://pypi.org/project/apiqa-storage/", "project_urls": {"Bug Reports": "https://gitlab.pik-software.ru/apiqa/apiqa-storage/issues", "Funding": "https://gitlab.pik-software.ru/apiqa/apiqa-storage", "Homepage": "https://github.com/pik-software/apiqa-storage.git", "Say Thanks!": "https://saythanks.io/to/pik_software", "Source": "https://gitlab.pik-software.ru/apiqa/apiqa-storage"}, "release_url": "https://pypi.org/project/apiqa-storage/2.6/", "requires_dist": ["django (>=2.1)", "djangorestframework (>=3.9)", "humanfriendly (>=4.18)", "python-slugify (>=1.2.6)", "minio (==5.0.6)", "celery", "responses (==0.10.5) ; extra == 'dev'", "prospector (==1.1.4) ; extra == 'dev'", "pycodestyle (<2.4.0,>=2.0.0) ; extra == 'dev'", "pylint-django (==0.9.4) ; extra == 'dev'", "pylint (==2.1.1) ; extra == 'dev'", "factory-boy ; extra == 'dev'", "freezegun (==0.3.10) ; extra == 'dev'", "pdbpp (==0.9.2) ; extra == 'dev'", "pytest-xdist (==1.22.2) ; extra == 'dev'", "pytest (==3.8.2) ; extra == 'dev'", "pytest-cov (==2.5.1) ; extra == 'dev'", "pytest-django (==3.4.3) ; extra == 'dev'", "pytest-benchmark (==3.1.1) ; extra == 'dev'", "pytest-mock (==1.9.0) ; extra == 'dev'", "mypy (>=0.600) ; extra == 'dev'", "psycopg2-binary (==2.7.5) ; extra == 'dev'", "dj-database-url (==0.4.2) ; extra == 'dev'", "twine (>=3.1.1) ; extra == 'dev'"], "requires_python": "~=3.6", "summary": "Apiqa user storage backend for django projects", "version": "2.6"}, "last_serial": 6581210, "releases": {"2.5.3": [{"comment_text": "", "digests": {"md5": "5b5bd0fd32bb05775429bc8f37617746", "sha256": "f5094038d0ab5bc93ad7fac425ee826f2640719d8aa81e71566bd7719e916512"}, "downloads": -1, "filename": "apiqa_storage-2.5.3-py3-none-any.whl", "has_sig": false, "md5_digest": "5b5bd0fd32bb05775429bc8f37617746", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": "~=3.6", "size": 14550, "upload_time": "2020-01-17T08:28:50", "upload_time_iso_8601": "2020-01-17T08:28:50.924972Z", "url": "https://files.pythonhosted.org/packages/65/ba/b36fb0a32e1e6626332af12a625592370bfd357d6709bb717a744749006e/apiqa_storage-2.5.3-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "3003a809805199f89f08f3a8cf7c3446", "sha256": "f40f34cd46118551528f6b7d62137ead03c5b6303424b720c07a7f7b3d6e879a"}, "downloads": -1, "filename": "apiqa-storage-2.5.3.tar.gz", "has_sig": false, "md5_digest": "3003a809805199f89f08f3a8cf7c3446", "packagetype": "sdist", "python_version": "source", "requires_python": "~=3.6", "size": 10067, "upload_time": "2020-01-17T08:29:39", "upload_time_iso_8601": "2020-01-17T08:29:39.958981Z", "url": "https://files.pythonhosted.org/packages/71/d4/bd4a5a5557399f284f0c53a670b2c78b570ccc16589cfd9fa6af8f29fbf8/apiqa-storage-2.5.3.tar.gz"}], "2.5.4": [{"comment_text": "", "digests": {"md5": "6f3900aa0ac21b020d457405dced0383", "sha256": "6e5e7ea6427264efcbe435ad4cdc7dddd145af02f2262df53e5b68bf5cf2c722"}, "downloads": -1, "filename": "apiqa_storage-2.5.4-py3-none-any.whl", "has_sig": false, "md5_digest": "6f3900aa0ac21b020d457405dced0383", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": "~=3.6", "size": 14549, "upload_time": "2020-01-17T08:28:53", "upload_time_iso_8601": "2020-01-17T08:28:53.919251Z", "url": "https://files.pythonhosted.org/packages/91/44/dd27978964da702c03f3909cf513003f1004b2cc8aef4c68502d613a745d/apiqa_storage-2.5.4-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "380ab2f9bf13cbe6226cf7f4febbc509", "sha256": "4b91207eb6ce264fbfbd2b099442ec0c3452964a69fccb22c77a0ac08e8fc28b"}, "downloads": -1, "filename": "apiqa-storage-2.5.4.tar.gz", "has_sig": false, "md5_digest": "380ab2f9bf13cbe6226cf7f4febbc509", "packagetype": "sdist", "python_version": "source", "requires_python": "~=3.6", "size": 10072, "upload_time": "2020-01-17T08:29:41", "upload_time_iso_8601": "2020-01-17T08:29:41.394871Z", "url": "https://files.pythonhosted.org/packages/22/3c/1b7970d8f07853f17e7c4aea869e42d498aff2754ce9617a7bdba7ec98fb/apiqa-storage-2.5.4.tar.gz"}], "2.6": [{"comment_text": "", "digests": {"md5": "3016429aea579ad78b053e1bbceac633", "sha256": "d37c0700d938beb3be53450ea8b9b57b8ab5b931088572c9b468dae7721a66d3"}, "downloads": -1, "filename": "apiqa_storage-2.6-py3-none-any.whl", "has_sig": false, "md5_digest": "3016429aea579ad78b053e1bbceac633", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": "~=3.6", "size": 16885, "upload_time": "2020-02-06T10:40:54", "upload_time_iso_8601": "2020-02-06T10:40:54.720463Z", "url": "https://files.pythonhosted.org/packages/0e/07/7f5e23a29b77b500b00ea4f2c4811a0362d6f1081d8d379a73da7e122013/apiqa_storage-2.6-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "9b06bb6419df3321cca76de7d84e7877", "sha256": "fcbc8912d9bdc435c549a678a3e388d8b966a17ee92f76165a83da87f5d83171"}, "downloads": -1, "filename": "apiqa-storage-2.6.tar.gz", "has_sig": false, "md5_digest": "9b06bb6419df3321cca76de7d84e7877", "packagetype": "sdist", "python_version": "source", "requires_python": "~=3.6", "size": 11772, "upload_time": "2020-02-06T10:40:57", "upload_time_iso_8601": "2020-02-06T10:40:57.969125Z", "url": "https://files.pythonhosted.org/packages/fa/2e/fc82d85e6c7b2bcb53808d741004efed56f55819f17dfef8c15478e94f91/apiqa-storage-2.6.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "3016429aea579ad78b053e1bbceac633", "sha256": "d37c0700d938beb3be53450ea8b9b57b8ab5b931088572c9b468dae7721a66d3"}, "downloads": -1, "filename": "apiqa_storage-2.6-py3-none-any.whl", "has_sig": false, "md5_digest": "3016429aea579ad78b053e1bbceac633", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": "~=3.6", "size": 16885, "upload_time": "2020-02-06T10:40:54", "upload_time_iso_8601": "2020-02-06T10:40:54.720463Z", "url": "https://files.pythonhosted.org/packages/0e/07/7f5e23a29b77b500b00ea4f2c4811a0362d6f1081d8d379a73da7e122013/apiqa_storage-2.6-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "9b06bb6419df3321cca76de7d84e7877", "sha256": "fcbc8912d9bdc435c549a678a3e388d8b966a17ee92f76165a83da87f5d83171"}, "downloads": -1, "filename": "apiqa-storage-2.6.tar.gz", "has_sig": false, "md5_digest": "9b06bb6419df3321cca76de7d84e7877", "packagetype": "sdist", "python_version": "source", "requires_python": "~=3.6", "size": 11772, "upload_time": "2020-02-06T10:40:57", "upload_time_iso_8601": "2020-02-06T10:40:57.969125Z", "url": "https://files.pythonhosted.org/packages/fa/2e/fc82d85e6c7b2bcb53808d741004efed56f55819f17dfef8c15478e94f91/apiqa-storage-2.6.tar.gz"}]}