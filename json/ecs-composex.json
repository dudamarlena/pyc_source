{"info": {"author": "John Mille", "author_email": "john@lambda-my-aws.io", "bugtrack_url": null, "classifiers": ["Development Status :: 2 - Pre-Alpha", "Intended Audience :: Developers", "License :: OSI Approved :: BSD License", "Natural Language :: English", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3.8"], "description": "============\nECS ComposeX\n============\n\n.. image:: https://codebuild.eu-west-1.amazonaws.com/badges?uuid=eyJlbmNyeXB0ZWREYXRhIjoiQmdmZGZ3MkJCbDNhYVJvc0oza1orVW4zRjM1N21rdERiZ0NqUXYvSDFXM1Nxb1ROYnJTdDBLc3N3L0FGdm9LVjVkUTlzQkhjR1hZZ2JOTG1GYXB1QTJjPSIsIml2UGFyYW1ldGVyU3BlYyI6Ik5xTGhESjY1ZzVsQ3R4RFMiLCJtYXRlcmlhbFNldFNlcmlhbCI6MX0%3D&branch=master\n\n.. image:: https://img.shields.io/pypi/v/ecs_composex.svg\n        :target: https://pypi.python.org/pypi/ecs_composex\n\n\n.. image:: https://readthedocs.org/projects/ecs-composex/badge/?version=latest\n        :target: https://ecs-composex.readthedocs.io/en/latest/?badge=latest\n        :alt: Documentation Status\n\n`Blog <https://blog.ecs-composex.lambda-my-aws.io/>`_\n\n.. contents::\n\nWhat is it?\n============\n\nECS ComposeX is a tool to generate CFN templates (using the excellent `Troposphere`_ library) which are going to allow\nany developer or cloud engineer to build and publish their applications running in Docker containers on top of AWS ECS.\n\nOnce the templates are generated, you can simply create new stacks, in any AWS region, in any AWS Account, seamlessly.\n\nECS ComposeX aims to be a CLI tool at first for people to run from their laptops or even from their CI/CD pipelines.\nGiven its nature, it is easy to integrate it into AWS Lambda as a library and enable calling upon it to generate all\nthe things from there.\n\n\nWhat you do with it\n===================\n\n1. Take an existing Docker compose file of your services you want to deploy to AWS\n2. Add settings to explain how you want to deploy these services\n3. Add x- sections for extra AWS Resources you want your services to access to perform their tasks\n4. Run ECS ComposeX against your ComposeX file\n5. Deploy\n\n\nFeatures\n========\n\n* Generates all the IAM policies and roles for your microservices to access your extra resources\n    * ECS Task Role and policies. Policies are tailored to allow access to only the necessary resources\n    * ECS Execution Role and policies, allows ECS-Agent to do its job on your behalf\n* Generates the task and service definition based on configuration set in your Docker compose file\n    * Task definition with all defined environment variables\n    * Add predefined variables from Queues, Topics etc. to allow quick lookup of your resources (ie QueueURL, QueueARN)\n    * Service definition with all extra configuration to work with AWS CloudMap or AWS LoadBalancers\n* Deploy onto an ECS Cluster\n    * Use AWS Fargate with no effort in configuration (Default)\n    * Use AWS EC2 SpotFleet if you need hosts control but wan to keep costs under control (optional)\n* Generate the VPC you need to support all the network resources with a predefined 3-Tier layout if you need one\n    * VPC\n    * Subnets (Using the usual 3-Tiers design, Public/App/Storage)\n* Generate only the launch-templates for your hosts and run your containers on EC2 from the template with no effort\n* Monitor all your microservices via AWS CloudWatch (Logs and metrics)\n\n.. note::\n\n    If you do not need extra AWS resources such as SQS queues to be created as part of these microservices deployments, I would recommend to use `AWS ECS CLI`_ which does already a lot of the work for the services.\n    Alternatively, use the AWS CLI v2. It is absolutely smashing-ly awesome and might be just what you need\n    This tool aims to reproduce the original ECS CLI behaviour whilst adding logic for non ECS resources that you want to create in your environment.\n\n\nAWS Account settings and requirements\n=====================================\n\nBecause of my adhesion to using the Cloud Provider's tools for monitoring, logging, etc, some features and options\nare enabled and you would get CloudFormation complain about account level settings not being enabled.\n\nDepending on how you are setting up your AWS account(s) you might have to activate these settings if you haven't already.\n\n.. note::\n\n    It is important that you enable AWS VPC Trunking to allow each service tasks to run within the same SecurityGroup and use the extended number of ENIs per instance.\n    Reference: https://docs.aws.amazon.com/AmazonECS/latest/developerguide/container-instance-eni.html\n    Announcement: https://aws.amazon.com/about-aws/whats-new/2019/06/Amazon-ECS-Improves-ENI-Density-Limits-for-awsvpc-Networking-Mode/\n\n\nECS Settings\n-------------\n\nECS Account settings can be found at https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-account-settings.html\n\n* ECS - VPC Trunking\n* ECS Extended logs and monitoring\n\n.. code-block:: bash\n\n    aws ecs put-account-setting --name awsvpcTrunking --value enabled\n    aws ecs put-account-setting --name serviceLongArnFormat --value enabled\n    aws ecs put-account-setting --name taskLongArnFormat --value enabled\n    aws ecs put-account-setting --name containerInstanceLongArnFormat --value enabled\n    aws ecs put-account-setting --name containerInsights --value enabled\n\nIf you have multiple profiles and use awsume you could iterate over each account and run the above commands to apply it\nfor your profiles as you switch to them.\n\n.. warning::\n\n    If you do not do that as the root user of the account, you will have to enable that for IAM users or roles specifically.\n    A Role/Group/User can have an IAM policy allowing them to put the ecs account settings, but then these settings will only\n    apply to the role / user that ran the command.\n\n\nWhy though?\n===========\n\nMany companies I have worked with struggle with providing a true cloudy experience to their developers and enable them to deploy AWS resources in a controled fashion.\nAnd when they do give poweruser/administrator level of permissions to the developers, they usually have not been trained approprately to understand fundamentals,\nsuch as least privileges and you end up with services which all use the same AWS Access and Secret keys (yes, I witnessed it recently) and these keys stay around for\neternity (seen 1000+ days).\nAs an AWS Cloud Engineer, this scares the hell out of me and I feel like this is the first thing I need to fix.\nAs an automation engineer, I wanted a tool that allows developers to keep using Docker compose, as they very often do, so they can't run their workload on their\nlaptops for quick testing and application testing.\nBut, \"It works on my laptop\" is something that in 2020 is simply unacceptable to companies deploying microservices.\n\nTherefore, combining my love for least privileges and therefore IAM instance capability to implement it, and the need for a tool going these extra miles,\nI decided to simply go for it.\n\n.. _later on:\n\nA lot of you probably would prefer to use some other tools, such as Terraform, but I all heartily believe that cloud\nengineers should use the IaC provided by the Cloud provider. Third party integrations are coming, including for example\nthe excellent AWS CFN registries where we already see partners like DataDog provide the ability to create non AWS\nresources as part of the CFN stack and remove the need for custom made code.\n\n\nWhy am I not using AWS CDK?\n===========================\n\nI started this work before AWS CDK came out with any python support, and I am not a developer professionally but I do love developing, and python is my language\nof choice. Troposphere was the obvious choice as the python library to use to build all the CFN templates. I find the way Troposphere has been built is awesome,\nit has a very nice community and is released often. I did a few PRs myself and `Mark Peek`_ is very proactive with PRs, releases come out often.\n\nWill I use CDK in the future? Depends on how many of you are going to use ECS ComposeX and will ask for it.\n\n\nWhy not stick to AWS CFN Templates and CFN macros ?\n====================================================\n\nI love CFN Macros and I think that it is not enough spoken about. Probably because at start, Fn::Transform was not over\nwell documented and importing snippets wasn't working all the time as one would have wanted.\n\nI love CFN and I can write templates very easily in YAML or even in JSON. But, typos are a nightmare and it takes a good\nIDE configuration to make it easy and viable. For small templates, it is fine, but with a lot of conditions, references,\nparameters, imports, it is very easy to mess it up. And when come nested stacks, it is a huge amount of time spent waiting\nand hoping nothing wrong happens in a nested stack.\n\nSo, using python, I can do all the loops I want, and most importantly, I can make super consistent all the titles for\nthe various AWS resources that the templates are going to create. If I make a typo somewhere in a title, this typo goes everywhere,\nand therefore, AWS CFN is happy to resolve, find, GetAttributes etc from it.\n\nThis saves an insane amount of time.\n\nAlso, thanks to using Python and with YAML as a common syntax method to write Docker compose files and AWS templates, we\ncan marry the two very easily.\n\n\nI want to use EKS. Can I use ECS ComposeX?\n==========================================\n\nYou certainly could, but you wouldn't really, or maybe only for the IAM part? If you plan on using EKS, I can't recommend enough to use the AWS\nService Operator for K8s. You can refer to this blog https://aws.amazon.com/blogs/opensource/aws-service-operator-kubernetes-available/ to get more details\nabout it. You will notice a lot of similarities in what ECS ComposeX tries to achieve, but for ECS as opposed to EKS.\n\n\nWhat is next for ECS ComposeX ?\n===============================\n\n* CI/CD for everyone so that any PR is evaluated automatically and possibly merged\n* Add more resources supports (DynamoDB tables, SNS Topics, and then RDS).\n* Enable definition of AppMesh routes from the Docker compose file (gotta dig more into this)\n* Allow to add x-lambdas which would go through git/folder based discovery of existing functions written with SAM and\n  identify resources to be shared(ie, queue between ECS service and a Lambda).\n* Architecture reference for usage in CI/CD\n\nFirst, move this into a CFN Macro, with a simple root template that would take a few settings in and the URL to the Compose file and render all templates within CFN itself via Lambda.\nThen, with the newly released CFN Private Registries, mutate this system to have fully integrated to CFN objects which will resolve all this.\n\n\nLicense and documentation\n==========================\n\n* Free software: BSD license\n* Documentation:\n    * https://docs.ecs-composex.lambda-my-aws.io\n    * https://ecs-composex.readthedocs.io/en/latest\n\nCredits\n=======\n\nThis package would not have been possible without the amazing job done by the AWS CloudFormation team!\n\nThis package would not have been possible without the amazing community around `Troposphere`_!\n\n\nThis package was created with Cookiecutter_ and the `audreyr/cookiecutter-pypackage`_ project template.\n\nDisclaimer\n===========\n\n* I am not an AWS employee\n* I am not being paid by AWS\n* I don't even have AWS shares ..\n* I don't intend to sell anything to anyone\n* I am doing this on my free time because I like doing some functional coding/scriping\n* I am in no way an prod-ready app developer so I am sure a lot of stuff is not the most optimal with my code. PRs welcome.\n* I come learning C in such a way that each function can't be longer than 25 lines, 80 chars wide and 5 functions per file.\n  This obviously is not so realistic in python, but I try to keep my code clean and the function names as clear as possible.\n\n\n.. _Cookiecutter: https://github.com/audreyr/cookiecutter\n.. _`audreyr/cookiecutter-pypackage`: https://github.com/audreyr/cookiecutter-pypackage\n.. _`Mark Peek`: https://github.com/markpeek\n.. _`AWS ECS CLI`: https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ECS_CLI.html\n.. _Troposphere: https://github.com/cloudtools/troposphere\n\n\n=======\nHistory\n=======\n\n0.1.3 (2020-04-13)\n==================\n\nA patch release with a lot of little features added driven by the writing up of the blog to make it easier to have in\na CICD pipeline.\n\nSee overall progress on `GH Project`_\n\n* `Issue 14 <https://github.com/lambda-my-aws/ecs_composex/issues/14>`_\n* `Issue 15 <https://github.com/lambda-my-aws/ecs_composex/issues/15>`_\n\n\n0.1.2 (2020-04-04)\n==================\n\nPatch release aiming to improve the CLI and integration of the Compute layer so that the compute resources creation\nin EC2 are standalone and can be created separately if one so wished to reuse.\n\n `Issue <https://github.com/lambda-my-aws/ecs_composex/issues/7>`_ related to the fix.\n\n `PR <https://github.com/lambda-my-aws/ecs_composex/pull/8>`_ related to the fix.\n\n0.1.1 (2020-04-02)\n==================\n\nAdded tags definition from Docker ComposeX with the x-tags which allows to add tags\nto all resources that support tagging from AWS CFN\n\n.. code-block:: yaml\n\n    x-tags:\n      - name: TagA\n        value: SomeValue\n      - name: CostcCentre\n        value: IamNotPayingForThis\n      - name: Some:Special:Key\n        value: A long weird value\n\nor alternatively in an object/dict format\n\n.. code-block:: yaml\n\n    x-tags:\n      TagA: ValueA\n      TagB: ValueB\n\n0.1.0 (2020-03-24)\n==================\n\n* First release on PyPI.\n    * Working VPC + Cluster + Services\n    * Working expansion of existing Cluster with new VPC\n    * Working expansion of existing VPC and Cluster with new services\n    * IAM working to allow services access to SQS queues\n    * SQS Queues functional with DLQ\n    * Works on Python 3.6, 3.7, 3.8\n    * Working start of build integration in CodeBuild for automated testing\n\n\n.. _GH Project: https://github.com/orgs/lambda-my-aws/projects/3\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/lambda-my-aws/ecs_composex", "keywords": "ecs_composex", "license": "BSD license", "maintainer": "", "maintainer_email": "", "name": "ecs-composex", "package_url": "https://pypi.org/project/ecs-composex/", "platform": "", "project_url": "https://pypi.org/project/ecs-composex/", "project_urls": {"Homepage": "https://github.com/lambda-my-aws/ecs_composex"}, "release_url": "https://pypi.org/project/ecs-composex/0.1.3/", "requires_dist": ["troposphere (==2.6.0)", "boto3 (==1.12.36)"], "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "summary": "Package that generates CFN templates based on a Docker Compose file to generate ECS Cluster,ECS Services and Extra resources such as SQS Queues, SNS Topics etc. that can be accessed via IAM", "version": "0.1.3"}, "last_serial": 7008653, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "37f2cd25d0b4979bdc669c4b664a0fc1", "sha256": "46a7276b06ae06eb57646f3e5b607c4830eea86e372b208531ed7fa8f19cb44f"}, "downloads": -1, "filename": "ecs_composex-0.1.0-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "37f2cd25d0b4979bdc669c4b664a0fc1", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 66504, "upload_time": "2020-03-24T01:02:09", "upload_time_iso_8601": "2020-03-24T01:02:09.364899Z", "url": "https://files.pythonhosted.org/packages/af/ad/44b3781d9890422d85f37d41ace3d4be07db9fa196849d39de1d16690e0b/ecs_composex-0.1.0-py2.py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "499a57d5080474ba85a97c5464f97be5", "sha256": "6522b3b2f02c5f79b30187629348d945ee74c7deb968ed36b78664f31ee7acec"}, "downloads": -1, "filename": "ecs_composex-0.1.0.tar.gz", "has_sig": false, "md5_digest": "499a57d5080474ba85a97c5464f97be5", "packagetype": "sdist", "python_version": "source", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 67185, "upload_time": "2020-03-24T01:02:11", "upload_time_iso_8601": "2020-03-24T01:02:11.154385Z", "url": "https://files.pythonhosted.org/packages/b0/54/e387bf9bc0fbf94610d12fa1dd7088648e7cbfe88f943d9884b2e82babf2/ecs_composex-0.1.0.tar.gz"}], "0.1.1": [{"comment_text": "", "digests": {"md5": "eba95302beddb65219e19d78da682085", "sha256": "75d3cdc6bee005103a274a46144735cdd04ea6d22f76e0e7ec9531fd68eb30d5"}, "downloads": -1, "filename": "ecs_composex-0.1.1-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "eba95302beddb65219e19d78da682085", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 69073, "upload_time": "2020-04-02T01:03:24", "upload_time_iso_8601": "2020-04-02T01:03:24.781682Z", "url": "https://files.pythonhosted.org/packages/85/2e/d826ffa7d9dc69075a67f4ff580b4f728ed3decb29a098a40282117fe39e/ecs_composex-0.1.1-py2.py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "44a77413a1524394fb329b1faa67079e", "sha256": "553dcebd7a865053d4452dc3bf728030018c72882eb3c07e715bbccd338e11e1"}, "downloads": -1, "filename": "ecs_composex-0.1.1.tar.gz", "has_sig": false, "md5_digest": "44a77413a1524394fb329b1faa67079e", "packagetype": "sdist", "python_version": "source", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 69766, "upload_time": "2020-04-02T01:03:26", "upload_time_iso_8601": "2020-04-02T01:03:26.578033Z", "url": "https://files.pythonhosted.org/packages/30/4b/68c607e540cffe008148c361be2c152bbc1b7ab6a106d1c8f2b6a35757ae/ecs_composex-0.1.1.tar.gz"}], "0.1.2": [{"comment_text": "", "digests": {"md5": "405f048242702fb101e53143bb4f4d03", "sha256": "9b9b6284487103bb1d3f0b10f0811e2a079e20fa42c23530808b1cc324cbfac5"}, "downloads": -1, "filename": "ecs_composex-0.1.2-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "405f048242702fb101e53143bb4f4d03", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 70292, "upload_time": "2020-04-05T12:52:36", "upload_time_iso_8601": "2020-04-05T12:52:36.459551Z", "url": "https://files.pythonhosted.org/packages/2e/98/e822ab64d2c1966d075e73583245e07cce2e3d14e7340f1d0f0353f3f9c8/ecs_composex-0.1.2-py2.py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "3378ec76de751383f313256938995dff", "sha256": "f21360717aa4854a34f8cc3a25e2702341793abc21149dd2666b87e73219d536"}, "downloads": -1, "filename": "ecs_composex-0.1.2.tar.gz", "has_sig": false, "md5_digest": "3378ec76de751383f313256938995dff", "packagetype": "sdist", "python_version": "source", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 67057, "upload_time": "2020-04-05T12:52:38", "upload_time_iso_8601": "2020-04-05T12:52:38.165227Z", "url": "https://files.pythonhosted.org/packages/0a/37/60e9199a4c3b34f0bf14b88324e1c2398c77b7cbd866687be51a68655911/ecs_composex-0.1.2.tar.gz"}], "0.1.3": [{"comment_text": "", "digests": {"md5": "2f17b0b10010f95a7de2b20981c1d878", "sha256": "34945236a5afbdaf15cbedf8405a124555131b694ae05e4c1262fe1de8708f6d"}, "downloads": -1, "filename": "ecs_composex-0.1.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "2f17b0b10010f95a7de2b20981c1d878", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 71537, "upload_time": "2020-04-13T09:20:38", "upload_time_iso_8601": "2020-04-13T09:20:38.539092Z", "url": "https://files.pythonhosted.org/packages/23/06/37b956b8d1759329b6713e750aeb42a92ae5d4f8513df48978b06dcbeaf7/ecs_composex-0.1.3-py2.py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "440a489b97a148adbb9bb36b139c0b07", "sha256": "5ebc186f3cb1e0005bb3415de4ff560234dde700ff54b0943095aeadc7581af4"}, "downloads": -1, "filename": "ecs_composex-0.1.3.tar.gz", "has_sig": false, "md5_digest": "440a489b97a148adbb9bb36b139c0b07", "packagetype": "sdist", "python_version": "source", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 72376, "upload_time": "2020-04-13T09:20:40", "upload_time_iso_8601": "2020-04-13T09:20:40.341806Z", "url": "https://files.pythonhosted.org/packages/d5/0e/6eff90a52fba663fd36aa488d6b8c8a3b15d62cad481eca515f4fb1ce81c/ecs_composex-0.1.3.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "2f17b0b10010f95a7de2b20981c1d878", "sha256": "34945236a5afbdaf15cbedf8405a124555131b694ae05e4c1262fe1de8708f6d"}, "downloads": -1, "filename": "ecs_composex-0.1.3-py2.py3-none-any.whl", "has_sig": false, "md5_digest": "2f17b0b10010f95a7de2b20981c1d878", "packagetype": "bdist_wheel", "python_version": "py2.py3", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 71537, "upload_time": "2020-04-13T09:20:38", "upload_time_iso_8601": "2020-04-13T09:20:38.539092Z", "url": "https://files.pythonhosted.org/packages/23/06/37b956b8d1759329b6713e750aeb42a92ae5d4f8513df48978b06dcbeaf7/ecs_composex-0.1.3-py2.py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "440a489b97a148adbb9bb36b139c0b07", "sha256": "5ebc186f3cb1e0005bb3415de4ff560234dde700ff54b0943095aeadc7581af4"}, "downloads": -1, "filename": "ecs_composex-0.1.3.tar.gz", "has_sig": false, "md5_digest": "440a489b97a148adbb9bb36b139c0b07", "packagetype": "sdist", "python_version": "source", "requires_python": "!=2.*, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*, !=3.4.*", "size": 72376, "upload_time": "2020-04-13T09:20:40", "upload_time_iso_8601": "2020-04-13T09:20:40.341806Z", "url": "https://files.pythonhosted.org/packages/d5/0e/6eff90a52fba663fd36aa488d6b8c8a3b15d62cad481eca515f4fb1ce81c/ecs_composex-0.1.3.tar.gz"}]}