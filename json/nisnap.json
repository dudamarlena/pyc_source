{"info": {"author": "Greg Operto", "author_email": "goperto@barcelonabeta.org", "bugtrack_url": null, "classifiers": ["Intended Audience :: Developers", "Intended Audience :: Science/Research", "Operating System :: Unix", "Programming Language :: Python :: 3.7", "Topic :: Scientific/Engineering"], "description": "# nisnap\n\n[![pipeline status](https://gitlab.com/xgrg/nisnap/badges/master/pipeline.svg)](https://gitlab.com/xgrg/nisnap/commits/master)\n[![coverage report](https://gitlab.com/xgrg/nisnap/badges/master/coverage.svg)](https://gitlab.com/xgrg/nisnap/commits/master)\n[![downloads](https://img.shields.io/pypi/dm/nisnap.svg)](https://pypi.org/project/nisnap/)\n[![python versions](https://img.shields.io/pypi/pyversions/nisnap.svg)](https://pypi.org/project/nisnap/)\n[![pypi version](https://img.shields.io/pypi/v/nisnap.svg)](https://pypi.org/project/nisnap/)\n\n\nCreate snapshots of segmentation maps produced by neuroimaging software.\nInspired by tools like [nilearn](https://nilearn.github.io/),\n[visualqc](https://github.com/raamana/visualqc), [fmriprep](https://fmriprep.readthedocs.io/en/stable/) and others.\n\n![example](https://gitlab.com/xgrg/nisnap/raw/master/doc/nisnap.gif)\n\n![example](https://gitlab.com/xgrg/nisnap/raw/master/doc/nisnap2.gif)\n\n\n\n\n## Usage\n\n#### From a Terminal:\n\n```sh\nnisnap c1.nii.gz c2.nii.gz c3.nii.gz --bg /tmp/raw.nii.gz --opacity 50 -o /tmp/snapshot.gif\n\nnisnap labels.nii.gz --bg raw.nii.gz --opacity 50 --axes x --contours -o /tmp/snapshot.gif\n```\n\n```sh\nArguments:\n\n  files                 segmentation map(s) to create snapshots from\n\noptional arguments:\n  --bg BG               background image on which segmentations will be plotted.\n  --axes AXES           choose the direction of the cuts (among 'x', 'y', or 'z')\n  --opacity OPACITY     opacity (in %) of the segmentation maps when plotted over a background image. Only used if a background image is provided.\n  --contours            if True, segmentations will be rendered as contoured regions. If False, will be rendered as superimposed masks.\n  -o OUTPUT, --output OUTPUT\n                        snapshot will be stored in this file. If extension is .gif, snapshot will be rendered as an animation.\n  --config CONFIG       [XNAT mode] XNAT configuration file\n  --nobg                [XNAT mode] no background image. Plots segmentation maps only.\n  -e EXPERIMENT, --experiment EXPERIMENT\n                        [XNAT mode] ID of the experiment to create snapshots from.\n  --resource RESOURCE   [XNAT mode] name of the resource to download\n  --cache               [XNAT mode] skip downloads (e.g. if running for a second time\n  --disable_warnings\n  --verbose\n```\n\n\n#### From IPython/Jupyter Notebook:\n\nExample:\n\n```python\nimport nisnap\nfilepaths = ['c1.nii.gz', 'c2.nii.gz', 'c3.nii.gz']\nbg = 'source.nii.gz'\nnisnap.plot_segment(filepaths, bg=bg, opacity=30, axes='x', animated=True)\n```\n\n#### Reference:\n\n```python\ndef plot_segment(filepaths, axes='xyz', bg=None, opacity=30, slices=None,\n        animated=False, savefig=None, contours=False, rowsize=None,\n        figsize=None, width=2000):\n    \"\"\"Plots a set of segmentation maps/masks.\n\n    Parameters\n    ----------\n    filepaths: a list of str\n        Paths to segmentation maps (between 1 and 3). Must be of same dimensions\n        and in same reference space.\n\n    axes: string, or a tuple of strings\n        Choose the direction of the cuts (among 'x', 'y', or 'z')\n\n    bg: None or str\n        Path to the background image that the masks will be plotted on top of.\n        If nothing is specified, the segmentation maps/masks will be plotted only.\n        The opacity (in %) of the segmentation maps when plotted over a background\n        image. Only used if a background image is provided. Default: 10\n\n    slices: None, or a tuple of floats\n        The indexes of the slices that will be rendered. If None is given, the\n        slices are selected automatically.\n\n    animated: boolean, optional\n        If True, the snapshot will be rendered as an animated GIF.\n        If False, the snapshot will be rendered as a static PNG image. Default:\n        False\n\n    savefig: string, optional\n        Filepath where the resulting snapshot will be created. If None is given,\n        a temporary file will be created and/or the result will be displayed\n        inline in a Jupyter Notebook.\n\n    contours: boolean, optional\n        If True, segmentations will be rendered as contoured regions. If False,\n        will be rendered as superimposed masks. Default: False\n\n    rowsize: None, or int, or dict\n        Set the number of slices per row in the final compiled figure.\n        Default: {'x': 9, 'y': 9, 'z': 6}\n\n    figsize: None, or a 2-uple of floats, or dict\n        Sets the dimensions of one row of slices.\n        Default: {'x': (37, 3), 'y': (40, 3), 'z': (18, 3)}\n\n    width: int, optional\n        Width (in px) of the final compiled figure. Default: 2000.\n\n\n    See Also\n    --------\n    xnat.plot_segment : To plot segmentation maps directly providing their\n        experiment_id on an XNAT instance\n    \"\"\"\n```\n\n### Using XNAT\n\n#### From a Terminal:\n\n```sh\nnisnap --config .xnat.cfg -e EXPERIMENT_ID --resource ASHS --axes A --opacity 50 -o /tmp/test.gif\n```\n\n#### From IPython/Jupyter Notebook:\n\nExample:\n\n```python\nfrom nisnap import xnat\nxnat.plot_segment(config='/home/grg/.xnat.cfg', experiment_id='BBRC_E000',\n  raw=True, opacity=30, axes='x', slices=range(100,120,2), figsize=(15,5),\n  animated=True)\n```\n\n#### Reference:\n\n```python\ndef plot_segment(config, experiment_id, savefig=None, slices=None,\n    resource_name='SPM12_SEGMENT_T2T1_COREG',\n    axes='xyz', raw=True, opacity=10, animated=False, rowsize=None,\n    figsize=None, width=2000, contours=False, cache=False):\n    \"\"\"Download a given experiment/resource from an XNAT instance and create\n    snapshots of this resource along a selected set of slices.\n\n    Parameters\n    ----------\n    config: string\n        Configuration file to the XNAT instance.\n\n    experiment_id : string\n        ID of the experiment from which to download the segmentation maps and\n        raw anatomical image.\n\n    savefig: string, optional\n        Filepath where the resulting snapshot will be created. If None is given,\n        a temporary file will be created and/or the result will be displayed\n        inline in a Jupyter Notebook.\n\n    slices: None, or a tuple of floats\n        The indexes of the slices that will be rendered. If None is given, the\n        slices are selected automatically.\n\n    resource_name: string, optional\n        Name of the resource where the segmentation maps are stored in the XNAT\n        instance. Default: SPM12_SEGMENT_T2T1_COREG\n\n    axes: string, or a tuple of strings\n        Choose the direction of the cuts (among 'x', 'y', 'z')\n\n    raw: boolean, optional\n        If True, the segmentation maps will be plotted over a background image\n        (e.g. anatomical T1 or T2, as in xnat.download_resources). If False,\n        the segmentation maps will be rendered only. Default: True\n\n    opacity: integer, optional\n        The opacity (in %) of the segmentation maps when plotted over a background\n        image. Only used if a background image is provided. Default: 10\n\n    animated: boolean, optional\n        If True, the snapshot will be rendered as an animated GIF.\n        If False, the snapshot will be rendered as a static PNG image. Default:\n        False\n\n    rowsize: None, or int, or dict\n        Set the number of slices per row in the final compiled figure.\n        Default: {'x': 9, 'y': 9, 'z': 6}\n\n    figsize: None, or a 2-uple of floats, or dict\n        Sets the dimensions of one row of slices.\n        Default: {'x': (37, 3), 'y': (40, 3), 'z': (18, 3)}\n\n    width: int, optional\n        Width (in px) of the final compiled figure. Default: 2000.\n\n    contours: boolean, optional\n        If True, segmentations will be rendered as contoured regions. If False,\n        will be rendered as superimposed masks. Default: False\n\n    cache: boolean, optional\n        If False, resources will be normally downloaded from XNAT. If True,\n        download will be skipped and data will be looked up locally.\n        Default: False\n\n    Notes\n    -----\n    Requires an XNAT instance where SPM segmentation maps will be found\n    following a certain data organization in experiment resources named\n    `resource_name`.\n\n    See Also\n    --------\n    xnat.download_resources : To download resources (e.g. segmentation maps +\n        raw images) from an XNAT instance (e.g. prior to snapshot creation)\n    nisnap.plot_segment : To plot segmentation maps directly providing their\n        filepaths\n    \"\"\"\n```\n\n\n```python\ndef download_resources(config, experiment_id, resource_name,  destination,\n    raw=True, cache=False):\n    \"\"\"Download a given experiment/resource from an XNAT instance in a local\n    destination folder.\n\n    Parameters\n    ----------\n    config: string\n        Configuration file to the XNAT instance.\n        See http://xgrg.github.io/first-steps-with-pyxnat/ for more details.\n\n    experiment_id : string\n        ID of the experiment from which to download the segmentation maps and\n        raw anatomical image.\n\n    resource_name: string\n        Name of the resource where the segmentation maps are stored in the XNAT\n        instance.\n\n    destination: string\n        Destination folder where to store the downloaded resources.\n\n    raw: boolean, optional\n        If True, a raw anatomical image will be downloaded along with the\n        target resources. If False, only the resources referred to by\n        `resource_name` will be downloaded. Default: True\n\n    cache: boolean, optional\n        If False, resources will be normally downloaded from XNAT. If True,\n        download will be skipped and data will be looked up locally.\n        Default: False\n\n    Notes\n    -----\n    Requires an XNAT instance where SPM segmentation maps will be found\n    following a certain data organization in experiment resources named\n    `resource_name`.\n\n    See Also\n    --------\n    xnat.plot_segment : To plot segmentation maps directly providing their\n        experiment_id on an XNAT instance\n    nisnap.plot_segment : To plot segmentation maps directly providing their\n        filepaths\n    \"\"\"\n\n```\n\n## How to install\n\n```\npip install nisnap\n```\n\n## Credits\n\nGreg Operto and Jordi Huguet ([BarcelonaBeta Brain Research Center](http://barcelonabeta.org))", "description_content_type": "text/markdown", "docs_url": null, "download_url": "https://gitlab.com/xgrg/nisnap/-/archive/v0.1/nisnap-v0.1.tar.gz", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://gitlab.com/xgrg/nisnap", "keywords": "", "license": "", "maintainer": "", "maintainer_email": "", "name": "nisnap", "package_url": "https://pypi.org/project/nisnap/", "platform": "", "project_url": "https://pypi.org/project/nisnap/", "project_urls": {"Download": "https://gitlab.com/xgrg/nisnap/-/archive/v0.1/nisnap-v0.1.tar.gz", "Homepage": "https://gitlab.com/xgrg/nisnap"}, "release_url": "https://pypi.org/project/nisnap/0.3.3/", "requires_dist": null, "requires_python": "", "summary": "nisnap", "version": "0.3.3"}, "last_serial": 6911636, "releases": {"0.1": [{"comment_text": "", "digests": {"md5": "c24b32bacdee440ae95a4263a4b2bfb6", "sha256": "e6878a1f3f555c082f8739d4daadf3d144126f9b09ab3367c3c619d4add88765"}, "downloads": -1, "filename": "nisnap-0.1.tar.gz", "has_sig": false, "md5_digest": "c24b32bacdee440ae95a4263a4b2bfb6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9219, "upload_time": "2020-03-13T13:54:04", "upload_time_iso_8601": "2020-03-13T13:54:04.756973Z", "url": "https://files.pythonhosted.org/packages/52/5e/80d6e0c6c8d55c969124770c81e5b3f2e908cea962d1c5927f4da484bf41/nisnap-0.1.tar.gz"}], "0.1.post0": [{"comment_text": "", "digests": {"md5": "17910c3066be438f544bafad510cdb3a", "sha256": "ef51d1ac15331ee99b2d9c39c0074ff5f55ff2e4e687d5e1554e2b706af78ad3"}, "downloads": -1, "filename": "nisnap-0.1.post0.tar.gz", "has_sig": false, "md5_digest": "17910c3066be438f544bafad510cdb3a", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 9401, "upload_time": "2020-03-13T23:22:14", "upload_time_iso_8601": "2020-03-13T23:22:14.475202Z", "url": "https://files.pythonhosted.org/packages/05/b6/134599b5d60a19629c5beb3c26c4a1295987675549f87db133ef5c036bbf/nisnap-0.1.post0.tar.gz"}], "0.1b0": [{"comment_text": "", "digests": {"md5": "b0bb2e2efee9853c79b590353a24da0d", "sha256": "57eb1d0e401e54e9fe4b8655a023080bcc566047f8aab1a5cbd48f32abee026f"}, "downloads": -1, "filename": "nisnap-0.1b0.tar.gz", "has_sig": false, "md5_digest": "b0bb2e2efee9853c79b590353a24da0d", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 6558, "upload_time": "2020-03-09T00:08:29", "upload_time_iso_8601": "2020-03-09T00:08:29.602299Z", "url": "https://files.pythonhosted.org/packages/22/a6/f3151c5f045d8aa576a25205d8511dc57d0c0e125c118f04230dd6efada6/nisnap-0.1b0.tar.gz"}], "0.2": [{"comment_text": "", "digests": {"md5": "d6622c270f993c642e88e17ac23fdf03", "sha256": "5acad898ed00411afd5923ec99ed2daaaaee0e18104a804b8d4f5b7562ae4ed1"}, "downloads": -1, "filename": "nisnap-0.2.tar.gz", "has_sig": false, "md5_digest": "d6622c270f993c642e88e17ac23fdf03", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 11860, "upload_time": "2020-03-19T20:50:57", "upload_time_iso_8601": "2020-03-19T20:50:57.468105Z", "url": "https://files.pythonhosted.org/packages/6e/28/3e348e288f19f530820bcb68f960cf6103184ee8d469f7fa4887ec3cbfc3/nisnap-0.2.tar.gz"}], "0.3": [{"comment_text": "", "digests": {"md5": "2a99b73277dc7fa26ce6841dbcda61c0", "sha256": "97ea992f2ea49a8f26d582a8631da34e4c61b118c4168933ce7c55c225f401b7"}, "downloads": -1, "filename": "nisnap-0.3.tar.gz", "has_sig": false, "md5_digest": "2a99b73277dc7fa26ce6841dbcda61c0", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 12288, "upload_time": "2020-03-23T18:51:02", "upload_time_iso_8601": "2020-03-23T18:51:02.407002Z", "url": "https://files.pythonhosted.org/packages/cb/5b/74f8ec7ff345c009506e089a3a9a07c5d3d9a25ea142a31001bb21ef87bf/nisnap-0.3.tar.gz"}], "0.3.3": [{"comment_text": "", "digests": {"md5": "9205ae0d7422cf546269e5d9025cbdc6", "sha256": "1043288521180da306a18ac1c5b9d149fd12abc12d2d5db6114529c268252c48"}, "downloads": -1, "filename": "nisnap-0.3.3.tar.gz", "has_sig": false, "md5_digest": "9205ae0d7422cf546269e5d9025cbdc6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 13260, "upload_time": "2020-03-30T09:15:58", "upload_time_iso_8601": "2020-03-30T09:15:58.649950Z", "url": "https://files.pythonhosted.org/packages/d7/14/aee66a2edddd340bc7707a679c886e41610afb5514d0484622bc9bbfc0c7/nisnap-0.3.3.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "9205ae0d7422cf546269e5d9025cbdc6", "sha256": "1043288521180da306a18ac1c5b9d149fd12abc12d2d5db6114529c268252c48"}, "downloads": -1, "filename": "nisnap-0.3.3.tar.gz", "has_sig": false, "md5_digest": "9205ae0d7422cf546269e5d9025cbdc6", "packagetype": "sdist", "python_version": "source", "requires_python": null, "size": 13260, "upload_time": "2020-03-30T09:15:58", "upload_time_iso_8601": "2020-03-30T09:15:58.649950Z", "url": "https://files.pythonhosted.org/packages/d7/14/aee66a2edddd340bc7707a679c886e41610afb5514d0484622bc9bbfc0c7/nisnap-0.3.3.tar.gz"}]}