{"info": {"author": "madkote", "author_email": "madkote <madkote@bluewin.ch>", "bugtrack_url": null, "classifiers": ["Framework :: AsyncIO", "Intended Audience :: Developers", "Operating System :: OS Independent", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Topic :: Software Development :: Libraries", "Topic :: Software Development :: Libraries :: Python Modules", "Topic :: System :: Logging", "Topic :: Utilities"], "description": "<p align=\"center\">\n    <em>Plugins for FastAPI framework, high performance, easy to learn, fast to code, ready for production</em>\n</p>\n<p align=\"center\">\n<a href=\"https://travis-ci.org/madkote/fastapi-plugins\" target=\"_blank\">\n    <img src=\"https://travis-ci.org/madkote/fastapi_plugins.svg?branch=master\" alt=\"Build Status\">\n</a>\n<a href=\"https://codecov.io/gh/madkote/fastapi-plugins\" target=\"_blank\">\n    <img src=\"https://codecov.io/gh/madkote/fastapi_plugins/branch/master/graph/badge.svg\" alt=\"Coverage\">\n</a>\n<a href=\"https://pypi.org/project/fastapi-plugins\" target=\"_blank\">\n    <img src=\"https://img.shields.io/pypi/v/fastapi_plugins.svg\" alt=\"Package version\">\n</a>\n<a href=\"https://gitter.im/tiangolo/fastapi?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge\" target=\"_blank\">\n    <img src=\"https://badges.gitter.im/tiangolo/fastapi.svg\" alt=\"Join the chat at https://gitter.im/tiangolo/fastapi\">\n</a>\n</p>\n\n# fastapi-plugins\nFastAPI framework plugins\n\n* [Redis](#redis)\n* [Scheduler](#scheduler)\n* Celery\n* MQ\n* Logging\n* Health\n* Common\n\n## Changes\nSee [release notes](CHANGES.md)\n\n## Installation\n```sh\npip install fastapi-plugins\n```\n\n## Plugins\n### Redis\nSupports\n* single instance\n* sentinel\n* fake redis **NOT SUPPORTED NOW**\n\nValid variable are\n* `REDIS_TYPE`\n  * `redis` - single Redis isntance\n  * `sentinel` - Redis cluster\n  * `fake` - by using fake Redis\n* `REDIS_URL` - URL to connect to Redis server. Example\n  `redis://user:password@localhost:6379/2`. Supports protocols `redis://`,\n  `rediss://` (redis over TLS) and `unix://`.\n* `REDIS_HOST` - Redis server host.\n* `REDIS_PORT` - Redis server port. Default is `6379`.\n* `REDIS_PASSWORD` - Redis password for server.\n* `REDIS_DB` - Redis db (zero-based number index). Default is `0`.\n* `REDIS_CONNECTION_TIMEOUT` - Redis connection timeout. Default is `2`.\n* `REDIS_POOL_MINSIZE` - Minimum number of free connection to create in pool. Default is `0`.\n* `REDIS_POOL_MAXSIZE` -  Maximum number of connection to keep in pool. Default is `10`. Must be greater than `0`. `None` is disallowed.\n* `REDIS_SENTINELS` - List or a tuple of Redis sentinel addresses.\n* `REDIS_SENTINEL_MASTER` - The name of the master server in a sentinel configuration. Default is `mymaster`.\n* `REDIS_PRESTART_TRIES` - The number tries to connect to the a Redis instance.\n* `REDIS_PRESTART_WAIT` - The interval in seconds to wait between connection failures on application start.\n\n#### Example\n```python\n# run with `uvicorn demo_app:app`\nimport typing\nimport aioredis\nimport fastapi\nimport pydantic\nimport fastapi_plugins\n\nclass AppSettings(OtherSettings, fastapi_plugins.RedisSettings):\n    api_name: str = str(__name__)\n\napp = fastapi.FastAPI()\nconfig = AppSettings()\n\n@app.get(\"/\")\nasync def root_get(\n        cache: aioredis.Redis=fastapi.Depends(fastapi_plugins.depends_redis),\n) -> typing.Dict:\n    return dict(ping=await cache.ping())\n\n@app.on_event('startup')\nasync def on_startup() -> None:\n    await fastapi_plugins.redis_plugin.init_app(app, config=config)\n    await fastapi_plugins.redis_plugin.init()\n\n@app.on_event('shutdown')\nasync def on_shutdown() -> None:\n    await fastapi_plugins.redis_plugin.terminate()\n```\n\n#### Example with Docker Compose - Redis\n```YAML\nversion: '3.7'\nservices:\n  redis:\n    image: redis\n    ports:\n      - \"6379:6379\"\n  demo_fastapi_plugin:\n    image:    demo_fastapi_plugin\n    environment:\n      - REDIS_TYPE=redis\n      - REDIS_HOST=redis\n      - REDIS_PORT=6379\n    ports:\n      - \"8000:8000\"\n```\n\n#### Example with Docker Compose - Redis Sentinel\n```YAML\nversion: '3.7'\nservices:\n  ...\n  redis-sentinel:\n    ports:\n      - \"26379:26379\"\n    environment:\n      - ...\n    links:\n      - redis-master\n      - redis-slave\n  demo_fastapi_plugin:\n    image:    demo_fastapi_plugin\n    environment:\n      - REDIS_TYPE=sentinel\n      - REDIS_SENTINELS=redis-sentinel:26379\n    ports:\n      - \"8000:8000\"\n```\n\n### Scheduler\nSimple schedule an _awaitable_ job as a task. \n* _long_ running `async` functions (e.g. monitor a file a system or events)\n* gracefully cancel spawned tasks\n\nValid variable are:\n* `AIOJOBS_CLOSE_TIMEOUT` - The timeout in seconds before canceling a task.\n* `AIOJOBS_LIMIT` - The number of concurrent tasks to be executed.\n* `AIOJOBS_PENDING_LIMIT` - The number of pending jobs (waiting fr execution).\n\n\n```python\n# run with `uvicorn demo_app:app`\nimport ...\nimport fastapi_plugins\n\nclass AppSettings(OtherSettings, fastapi_plugins.RedisSettings, fastapi_plugins.SchedulerSettings):\n    api_name: str = str(__name__)\n\napp = fastapi.FastAPI()\nconfig = AppSettings()\n\n@app.post(\"/jobs/schedule/<timeout>\")\nasync def job_post(\n    timeout: int=fastapi.Query(..., title='the job sleep time'),\n    cache: aioredis.Redis=fastapi.Depends(fastapi_plugins.depends_redis),\n    scheduler: aiojobs.Scheduler=fastapi.Depends(fastapi_plugins.depends_scheduler),  # @IgnorePep8\n) -> str:\n    async def coro(job_id, timeout, cache):\n        await cache.set(job_id, 'processing')\n        try:\n            await asyncio.sleep(timeout)\n            if timeout == 8:\n                raise Exception('ugly error')\n        except asyncio.CancelledError:\n            await cache.set(job_id, 'canceled')\n        except Exception:\n            await cache.set(job_id, 'erred')\n        else:\n            await cache.set(job_id, 'success')\n\n    job_id = str(uuid.uuid4()).replace('-', '')\n    await cache.set(job_id, 'pending')\n    await scheduler.spawn(coro(job_id, timeout, cache))\n    return job_id\n\n@app.get(\"/jobs/status/<job_id>\")\nasync def job_get(\n    job_id: str=fastapi.Query(..., title='the job id'),\n    cache: aioredis.Redis=fastapi.Depends(fastapi_plugins.depends_redis),\n) -> typing.Dict:\n    status = await cache.get(job_id)\n    if status is None:\n        raise fastapi.HTTPException(\n            status_code=starlette.status.HTTP_404_NOT_FOUND,\n            detail='Job %s not found' % job_id\n        )\n    return dict(job_id=job_id, status=status)\n\n@app.on_event('startup')\nasync def on_startup() -> None:\n    await fastapi_plugins.redis_plugin.init_app(app, config=config)\n    await fastapi_plugins.redis_plugin.init()\n    await fastapi_plugins.scheduler_plugin.init_app(app=app, config=config)\n    await fastapi_plugins.scheduler_plugin.init()\n\n@app.on_event('shutdown')\nasync def on_shutdown() -> None:\n    await fastapi_plugins.scheduler_plugin.terminate()\n    await fastapi_plugins.redis_plugin.terminate()\n```\n\n### ... more already in progress ...\n\n# Development\nIssues and suggestions are welcome through *issues*\n\n# License\nThis project is licensed under the terms of the MIT license.\n\n\n# Changes\n## 0.3.0 (2020-04-07)\n- Scheduler: tasks scheduler based on `aiojobs`\n## 0.2.1 (2020-04-06)\n- Redis: pre-start\n## 0.2.0 (2019-12-11)\n- Redis: sentinels\n## 0.1.0 (2019-11-20)\n- Initial release: simple redis pool client\n\n\n", "description_content_type": "text/markdown", "docs_url": null, "download_url": "https://github.com/madkote/fastapi-plugins/archive/0.3.0.tar.gz", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/madkote/fastapi-plugins", "keywords": "async,redis,aioredis,json,asyncio,plugin,fastapi", "license": "MIT License", "maintainer": "", "maintainer_email": "", "name": "fastapi-plugins", "package_url": "https://pypi.org/project/fastapi-plugins/", "platform": "any", "project_url": "https://pypi.org/project/fastapi-plugins/", "project_urls": {"Download": "https://github.com/madkote/fastapi-plugins/archive/0.3.0.tar.gz", "Homepage": "https://github.com/madkote/fastapi-plugins"}, "release_url": "https://pypi.org/project/fastapi-plugins/0.3.0/", "requires_dist": ["aiojobs (==0.2.*)", "aioredis (==1.3.*)", "fastapi (>=0.41.*)", "tenacity (>=6.0.*)", "aiojobs (==0.2.*) ; extra == 'test'", "aioredis (==1.3.*) ; extra == 'test'", "fastapi (>=0.41.*) ; extra == 'test'", "tenacity (>=6.0.*) ; extra == 'test'", "bandit ; extra == 'test'", "docker-compose ; extra == 'test'", "flake8 ; extra == 'test'", "m2r ; extra == 'test'", "pytest ; extra == 'test'", "pytest-cov ; extra == 'test'", "tox ; extra == 'test'", "uvicorn ; extra == 'test'"], "requires_python": ">=3.6.0", "summary": "Plugins for FastAPI framework", "version": "0.3.0"}, "last_serial": 6967361, "releases": {"0.1.0": [{"comment_text": "", "digests": {"md5": "b90f3fa566e163f945fb955ea73c0ee7", "sha256": "0f30f4245493a292b23e640c971fd992899f8a3c829abbdd913dcc5b7efa1b54"}, "downloads": -1, "filename": "fastapi_plugins-0.1.0-py3-none-any.whl", "has_sig": false, "md5_digest": "b90f3fa566e163f945fb955ea73c0ee7", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 5724, "upload_time": "2019-11-20T16:13:43", "upload_time_iso_8601": "2019-11-20T16:13:43.427275Z", "url": "https://files.pythonhosted.org/packages/97/75/555c93b235a01d7ee883549b79f318e50456797587118ea1fec154864f4b/fastapi_plugins-0.1.0-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "187a7aeb4e2eeecb806b6ca9f66e545e", "sha256": "7dfe40b132aa7443c3131ebd9eb9b70715e303e2bf441e1874dbf7d24ca98c4c"}, "downloads": -1, "filename": "fastapi-plugins-0.1.0.tar.gz", "has_sig": false, "md5_digest": "187a7aeb4e2eeecb806b6ca9f66e545e", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 5893, "upload_time": "2019-11-20T16:13:46", "upload_time_iso_8601": "2019-11-20T16:13:46.414593Z", "url": "https://files.pythonhosted.org/packages/80/89/dcef75760d2f002562a0414d62a4623afa4ed2e3994f8c935b884bf80de5/fastapi-plugins-0.1.0.tar.gz"}], "0.2.0": [{"comment_text": "", "digests": {"md5": "aaf851d47d68a63132b4dcac943e6348", "sha256": "eab0f229dcc9edb4947ab7af4c6a2d2cc49e69d262aed1ff1fc3f61750179ca3"}, "downloads": -1, "filename": "fastapi_plugins-0.2.0-py3-none-any.whl", "has_sig": false, "md5_digest": "aaf851d47d68a63132b4dcac943e6348", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 6275, "upload_time": "2019-12-11T16:29:33", "upload_time_iso_8601": "2019-12-11T16:29:33.926853Z", "url": "https://files.pythonhosted.org/packages/09/ee/afd85401d9c8ad404ec8e21d278e08fb506a3b0176cda4c895e67b46a1df/fastapi_plugins-0.2.0-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "78c80cd53e168dbbc857394a701949ee", "sha256": "8fb7e41d52c324b1dded29461c0b9f0762c7dd9eb3c9150234d869678eed7971"}, "downloads": -1, "filename": "fastapi-plugins-0.2.0.tar.gz", "has_sig": false, "md5_digest": "78c80cd53e168dbbc857394a701949ee", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 6549, "upload_time": "2019-12-11T16:29:35", "upload_time_iso_8601": "2019-12-11T16:29:35.522755Z", "url": "https://files.pythonhosted.org/packages/54/08/a80932e1a26b2dbdf9067ce07041e0d9f2a232e9fd431af6864d465cf341/fastapi-plugins-0.2.0.tar.gz"}], "0.2.1": [{"comment_text": "", "digests": {"md5": "5e8d704b94e57c86267eaff711fd42fd", "sha256": "cb4554c42c5180bd6d52c633c13579ec7e24bc4da0451233a2e179c6d5dc98f9"}, "downloads": -1, "filename": "fastapi_plugins-0.2.1-py3-none-any.whl", "has_sig": false, "md5_digest": "5e8d704b94e57c86267eaff711fd42fd", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 6412, "upload_time": "2020-04-06T19:58:48", "upload_time_iso_8601": "2020-04-06T19:58:48.768929Z", "url": "https://files.pythonhosted.org/packages/82/f5/c5332404cfe0630800008b152db89ec218d3d0f323bb6a251520fca8a4d2/fastapi_plugins-0.2.1-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "145d18cfc0140600b2f66166595adbc6", "sha256": "f25bd4672bcffa9e17f07827c486af012a36a9b25822498005472a3888b41747"}, "downloads": -1, "filename": "fastapi-plugins-0.2.1.tar.gz", "has_sig": false, "md5_digest": "145d18cfc0140600b2f66166595adbc6", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 6742, "upload_time": "2020-04-06T19:58:50", "upload_time_iso_8601": "2020-04-06T19:58:50.660066Z", "url": "https://files.pythonhosted.org/packages/b4/26/80ab226347ebaa9097807f0e7624717056a8f519934102423e9ff7ec11e0/fastapi-plugins-0.2.1.tar.gz"}], "0.3.0": [{"comment_text": "", "digests": {"md5": "30b5fab50b53466b67474a2bc967d2da", "sha256": "27a320bf8062b9594e4956bb66eefd55e9c34f776a3b7eb21cc9e724fe4089b3"}, "downloads": -1, "filename": "fastapi_plugins-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "30b5fab50b53466b67474a2bc967d2da", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 7537, "upload_time": "2020-04-07T07:54:16", "upload_time_iso_8601": "2020-04-07T07:54:16.138935Z", "url": "https://files.pythonhosted.org/packages/f1/74/2308c94f6d2cb1f353453fcfb6d16b8b051a882c2566213548a9cc7cda3b/fastapi_plugins-0.3.0-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "94ae0d329cef5c5aa980c835e0df097f", "sha256": "4021129d1f2c8571c9a1c53bdb0abe17999efd796696f0d5e28e97b221164506"}, "downloads": -1, "filename": "fastapi-plugins-0.3.0.tar.gz", "has_sig": false, "md5_digest": "94ae0d329cef5c5aa980c835e0df097f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 8047, "upload_time": "2020-04-07T07:54:17", "upload_time_iso_8601": "2020-04-07T07:54:17.537579Z", "url": "https://files.pythonhosted.org/packages/2a/28/b461ef72db7a6654dcd4f05b27dbda8e65021a7fe1b26e79610cf52f3766/fastapi-plugins-0.3.0.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "30b5fab50b53466b67474a2bc967d2da", "sha256": "27a320bf8062b9594e4956bb66eefd55e9c34f776a3b7eb21cc9e724fe4089b3"}, "downloads": -1, "filename": "fastapi_plugins-0.3.0-py3-none-any.whl", "has_sig": false, "md5_digest": "30b5fab50b53466b67474a2bc967d2da", "packagetype": "bdist_wheel", "python_version": "py3", "requires_python": ">=3.6.0", "size": 7537, "upload_time": "2020-04-07T07:54:16", "upload_time_iso_8601": "2020-04-07T07:54:16.138935Z", "url": "https://files.pythonhosted.org/packages/f1/74/2308c94f6d2cb1f353453fcfb6d16b8b051a882c2566213548a9cc7cda3b/fastapi_plugins-0.3.0-py3-none-any.whl"}, {"comment_text": "", "digests": {"md5": "94ae0d329cef5c5aa980c835e0df097f", "sha256": "4021129d1f2c8571c9a1c53bdb0abe17999efd796696f0d5e28e97b221164506"}, "downloads": -1, "filename": "fastapi-plugins-0.3.0.tar.gz", "has_sig": false, "md5_digest": "94ae0d329cef5c5aa980c835e0df097f", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6.0", "size": 8047, "upload_time": "2020-04-07T07:54:17", "upload_time_iso_8601": "2020-04-07T07:54:17.537579Z", "url": "https://files.pythonhosted.org/packages/2a/28/b461ef72db7a6654dcd4f05b27dbda8e65021a7fe1b26e79610cf52f3766/fastapi-plugins-0.3.0.tar.gz"}]}