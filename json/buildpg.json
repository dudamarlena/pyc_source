{"info": {"author": "Samuel Colvin", "author_email": "s@muelcolvin.com", "bugtrack_url": null, "classifiers": ["Development Status :: 3 - Alpha", "Environment :: Console", "Environment :: MacOS X", "Intended Audience :: Developers", "Intended Audience :: Information Technology", "Intended Audience :: System Administrators", "License :: OSI Approved :: MIT License", "Operating System :: POSIX :: Linux", "Operating System :: Unix", "Programming Language :: Python", "Programming Language :: Python :: 3", "Programming Language :: Python :: 3.6", "Programming Language :: Python :: 3.7", "Programming Language :: Python :: 3 :: Only", "Programming Language :: SQL", "Topic :: Internet", "Topic :: Software Development :: Libraries :: Python Modules"], "description": "buildpg\n=======\n\n|BuildStatus| |Coverage| |pypi|\n\nQuery building for the postgresql prepared statements and asyncpg.\n\nLots of more powerful features, including full clause construction, multiple values, logic functions,\nquery pretty-printing and different variable substitution - below is just a very quick summary.\nPlease check the code and tests for examples.\n\nBuilding Queries\n................\n\nSimple variable substitution:\n\n.. code-block:: python\n\n   from buildpg import render\n\n   render('select * from mytable where x=:foo and y=:bar', foo=123, bar='whatever')\n   >> 'select * from mytable where x=$1 and y=$2', [123, 'whatever']\n\n\nUse of ``V`` to substitute constants:\n\n.. code-block:: python\n\n   from buildpg import V, render\n\n   render('select * from mytable where :col=:foo', col=V('x'), foo=456)\n   >> 'select * from mytable where x=$1', [456]\n\n\nComplex logic:\n\n.. code-block:: python\n\n   from buildpg import V, funcs, render\n\n   where_logic = V('foo.bar') == 123\n   if spam_value:\n       where_logic &= V('foo.spam') <= spam_value\n\n   if exclude_cake:\n       where_logic &= funcs.not_(V('foo.cake').in_([1, 2, 3]))\n\n   render('select * from foo :where', where=where_logic)\n   >> 'select * from foo foo.bar = $1 AND foo.spam <= $2 AND not(foo.cake in $3)', [123, 123, ['x', 'y']]\n\n\nValues usage:\n\n.. code-block:: python\n\n   from buildpg import Values, render\n\n   render('insert into the_table (:values__names) values :values', values=Values(a=123, b=456, c='hello'))\n   >> 'insert into the_table (a, b, c) values ($1, $2, $3)', [123, 456, 'hello']\n\n\nWith asyncpg\n............\n\n\nAs a wrapper around *asyncpg*:\n\n.. code-block:: python\n\n   import asyncio\n   from buildpg import asyncpg\n\n   async def main():\n       async with asyncpg.create_pool_b('postgres://postgres@localhost:5432/db') as pool:\n           await pool.fetchval_b('select spam from mytable where x=:foo and y=:bar', foo=123, bar='whatever')\n           >> 42\n\n   asyncio.get_event_loop().run_until_complete(main())\n\n\nBoth the pool and connections have ``*_b`` variants of all common query methods:\n\n- ``execute_b``\n- ``executemany_b``\n- ``fetch_b``\n- ``fetchval_b``\n- ``fetchrow_b``\n- ``cursor_b``\n\n.. |BuildStatus| image:: https://travis-ci.com/samuelcolvin/buildpg.svg?branch=master\n   :target: https://travis-ci.com/samuelcolvin/buildpg\n.. |Coverage| image:: https://codecov.io/gh/samuelcolvin/buildpg/branch/master/graph/badge.svg\n   :target: https://codecov.io/gh/samuelcolvin/buildpg/\n.. |pypi| image:: https://img.shields.io/pypi/v/buildpg.svg\n   :target: https://pypi.org/project/buildpg/\n\n\nOperators\n.........\n\n========================  ==================\nPython operator/function   SQL operator\n========================  ==================\n``&``                     ``AND``\n``|``                     ``OR``\n``=``                     ``=``\n``!=``                    ``!=``\n``<``                     ``<``\n``<=``                    ``<=``\n``>``                     ``>``\n``>=``                    ``>=``\n``+``                     ``+``\n``-``                     ``-``\n``*``                     ``*``\n``/``                     ``/``\n``%``                     ``%``\n``**``                    ``^``\n``-``                     ``-``\n``~``                     ``not(...)``\n``sqrt``                  ``|/``\n``abs``                   ``@``\n``contains``              ``@>``\n``contained_by``          ``<@``\n``overlap``               ``&&``\n``like``                  ``LIKE``\n``ilike``                 ``ILIKE``\n``cat``                   ``||``\n``in_``                   ``in``\n``from_``                 ``from``\n``at_time_zone``          ``AT TIME ZONE``\n``matches``               ``@@``\n``is_``                   ``is``\n``is_not``                ``is not``\n``for_``                  ``for``\n``factorial``             ``!``\n``cast``                  ``::``\n``asc``                   ``ASC``\n``desc``                  ``DESC``\n``comma``                 ``,``\n``on``                    ``ON``\n``as_``                   ``AS``\n========================  ==================\n\nUsage:\n\n.. code-block:: python\n\n   from buildpg import V, S, render\n\n   def show(component):\n       sql, params = render(':c', c=component)\n       print(f'sql=\"{sql}\" params={params}')\n\n   show(V('foobar').contains([1, 2, 3]))\n   #> sql=\"foobar @> $1\" params=[[1, 2, 3]]\n   show(V('foobar') == 4)\n   #> sql=\"foobar = $1\" params=[4]\n   show(~V('foobar'))\n   #> sql=\"not(foobar)\" params=[]\n   show(S(625).sqrt())\n   #> sql=\"|/ $1\" params=[625]\n   show(V('foo').is_not('true'))\n   #> sql=\"foo is not true\" params=[]\n\n\nFunctions\n.........\n\n===========================================  =============\nPython function                              SQL function\n===========================================  =============\n``AND(*args)``                               ``<arg1> and <arg2> ...``\n``OR(*args)``                                ``<arg1> or <arg2> ...``\n``NOT(arg)``                                 ``not(<arg>)``\n``comma_sep(*args)``                         ``<arg1>, <arg2>, ...``\n``count(expr)``                              ``count(expr)``\n``any(arg)``                                 ``any(<arg1>)``\n``now()``                                    ``now()``\n``cast(v, cast_type)``                       ``<v>::<cast_type>``\n``upper(string)``                            ``upper(<string>)``\n``lower(string)``                            ``lower(<string>)``\n``length(string)``                           ``length(<string>)``\n``left(string, n)``                          ``left(<string>, <n>)``\n``right(string, n)``                         ``right(<string>, <n>)``\n``extract(expr)``                            ``extract(<expr>)``\n``sqrt(n)``                                  ``|/<n>``\n``abs(n)``                                   ``@<n>``\n``factorial(n)``                             ``!<n>``\n``position(substring, string)``              ``position(<substring> in <st``...\n``substring(string, pattern, escape=None)``  ``substring(<string> from <pa``...\n``to_tsvector(arg1, document=None)``         ``to_tsvector(<arg1>)``\n``to_tsquery(arg1, text=None)``              ``to_tsquery(<arg1>)``\n===========================================  =============\n\nUsage:\n\n.. code-block:: python\n\n   from buildpg import V, render, funcs\n\n   def show(component):\n      sql, params = render(':c', c=component)\n      print(f'sql=\"{sql}\" params={params}')\n\n   show(funcs.AND(V('x') == 4, V('y') > 6))\n   #> sql=\"x = $1 AND y > $2\" params=[4, 6]\n   show(funcs.position('foo', 'this has foo in it'))\n   #> sql=\"position($1 in $2)\" params=['foo', 'this has foo in it']\n\n\n", "description_content_type": "", "docs_url": null, "download_url": "", "downloads": {"last_day": -1, "last_month": -1, "last_week": -1}, "home_page": "https://github.com/samuelcolvin/buildpg", "keywords": "", "license": "MIT", "maintainer": "", "maintainer_email": "", "name": "buildpg", "package_url": "https://pypi.org/project/buildpg/", "platform": "", "project_url": "https://pypi.org/project/buildpg/", "project_urls": {"Homepage": "https://github.com/samuelcolvin/buildpg"}, "release_url": "https://pypi.org/project/buildpg/0.2.3/", "requires_dist": null, "requires_python": ">=3.6", "summary": "Query building for the postgresql prepared statements and asyncpg.", "version": "0.2.3"}, "last_serial": 6181841, "releases": {"0.0.1": [{"comment_text": "", "digests": {"md5": "8fddc5d595600bd4c4d328a3d62b80c5", "sha256": "7334deaf81f143cace9c9ab67a56dc434cc59b455596dc2d5f47bb54dc16d52a"}, "downloads": -1, "filename": "buildpg-0.0.1-py36-none-any.whl", "has_sig": false, "md5_digest": "8fddc5d595600bd4c4d328a3d62b80c5", "packagetype": "bdist_wheel", "python_version": "py36", "requires_python": ">=3.6", "size": 7577, "upload_time": "2018-06-07T15:42:42", "upload_time_iso_8601": "2018-06-07T15:42:42.514835Z", "url": "https://files.pythonhosted.org/packages/ea/39/b7e76037e9156b609606cfcb8542cf2c785bbc1620748d2b579bece7e9a4/buildpg-0.0.1-py36-none-any.whl"}, {"comment_text": "", "digests": {"md5": "9e56267f8f5667fe88e9ccdc6f0151dc", "sha256": "b1b16973f1332bfd6c3d060456b72b75ce0aa61648fd0f9a7ae02a0fa1d1fa77"}, "downloads": -1, "filename": "buildpg-0.0.1.tar.gz", "has_sig": false, "md5_digest": "9e56267f8f5667fe88e9ccdc6f0151dc", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 5909, "upload_time": "2018-06-07T15:42:43", "upload_time_iso_8601": "2018-06-07T15:42:43.537216Z", "url": "https://files.pythonhosted.org/packages/5c/ba/1d1f10964b3ae3a1190985c6d220fa795b02c05cf2c95faa0801b58ed5bb/buildpg-0.0.1.tar.gz"}], "0.0.2": [{"comment_text": "", "digests": {"md5": "aa6777239d6155b4770b6df59cd791c8", "sha256": "a7f3cbec4d1703cde2f4d1a1c5873480406830b33fb070cd3760b435b0efe8b7"}, "downloads": -1, "filename": "buildpg-0.0.2-py36-none-any.whl", "has_sig": false, "md5_digest": "aa6777239d6155b4770b6df59cd791c8", "packagetype": "bdist_wheel", "python_version": "py36", "requires_python": ">=3.6", "size": 8210, "upload_time": "2018-06-13T11:21:10", "upload_time_iso_8601": "2018-06-13T11:21:10.223167Z", "url": "https://files.pythonhosted.org/packages/db/d5/d2c25ff5f981f9c9965cec809041bd82f8ae1ae9499b39060616bb95f222/buildpg-0.0.2-py36-none-any.whl"}, {"comment_text": "", "digests": {"md5": "81942c86bf9545c138bd5fd6e02fac66", "sha256": "47a0ec960333d650882d1c84c345e274ced21d3a17510a322b6977a02ca3462a"}, "downloads": -1, "filename": "buildpg-0.0.2.tar.gz", "has_sig": false, "md5_digest": "81942c86bf9545c138bd5fd6e02fac66", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 6516, "upload_time": "2018-06-13T11:21:11", "upload_time_iso_8601": "2018-06-13T11:21:11.300677Z", "url": "https://files.pythonhosted.org/packages/d7/5c/5504c26a4eb46b6fe8fa1a970c417d3c9a766d3fbb1bbdb3e203cf6fb329/buildpg-0.0.2.tar.gz"}], "0.1": [{"comment_text": "", "digests": {"md5": "5920811569d01edfdf3b6a16670df226", "sha256": "951d37966adfa6ef622b01abb57ae5fdf759fd95c66be0472180faa06a3bc36b"}, "downloads": -1, "filename": "buildpg-0.1-py36.py37-none-any.whl", "has_sig": false, "md5_digest": "5920811569d01edfdf3b6a16670df226", "packagetype": "bdist_wheel", "python_version": "py36.py37", "requires_python": ">=3.6", "size": 10475, "upload_time": "2019-03-19T17:28:28", "upload_time_iso_8601": "2019-03-19T17:28:28.742596Z", "url": "https://files.pythonhosted.org/packages/72/1a/37cae9cbd03eda62ab45bacb603ce1fce10a8cdaeda5a8d0c49f796a85ba/buildpg-0.1-py36.py37-none-any.whl"}, {"comment_text": "", "digests": {"md5": "d5bc97c2647d6252ee5f32ab49ef2c36", "sha256": "8d322f9397f9c2f26ef122182b0ced2cb7539f5482474417c5f10de3fba62924"}, "downloads": -1, "filename": "buildpg-0.1.tar.gz", "has_sig": false, "md5_digest": "d5bc97c2647d6252ee5f32ab49ef2c36", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 9505, "upload_time": "2019-03-19T17:28:30", "upload_time_iso_8601": "2019-03-19T17:28:30.031831Z", "url": "https://files.pythonhosted.org/packages/bc/8b/60d1f6764c4e0e278cf1dbdc9711c1bf137e1b5974366281dc06612b5831/buildpg-0.1.tar.gz"}], "0.2": [{"comment_text": "", "digests": {"md5": "8d0dd2d3eccf48851e408db0ad3dde5d", "sha256": "d4e648da5c8dde1336d5a91d0305b214a941206f4ac0458bfadfc11aa227be80"}, "downloads": -1, "filename": "buildpg-0.2-py36.py37-none-any.whl", "has_sig": false, "md5_digest": "8d0dd2d3eccf48851e408db0ad3dde5d", "packagetype": "bdist_wheel", "python_version": "py36.py37", "requires_python": ">=3.6", "size": 11478, "upload_time": "2019-05-02T14:11:01", "upload_time_iso_8601": "2019-05-02T14:11:01.050962Z", "url": "https://files.pythonhosted.org/packages/3b/1b/68dbaf295dd49a4c36e19849e71764df71212e9595bb94c0de43291e9e5f/buildpg-0.2-py36.py37-none-any.whl"}, {"comment_text": "", "digests": {"md5": "8c6aabdcdef3258127b6fef3d12a0f02", "sha256": "9e9dcf009fd0605e2b2caf1b224f9382652b8b11b366c2e39178e7ee297f83e0"}, "downloads": -1, "filename": "buildpg-0.2.tar.gz", "has_sig": false, "md5_digest": "8c6aabdcdef3258127b6fef3d12a0f02", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 11699, "upload_time": "2019-05-02T14:11:02", "upload_time_iso_8601": "2019-05-02T14:11:02.417391Z", "url": "https://files.pythonhosted.org/packages/a1/86/82b4a25a378d6d4c5722a6bdadaa3ca0fa66804b695e1150a9233f3a8785/buildpg-0.2.tar.gz"}], "0.2.1": [{"comment_text": "", "digests": {"md5": "3d36a28158d4cee673a03c38982fe6ed", "sha256": "616cc71e45df93a5bfde9f68cb5867574265e1be9e478e2133d574561d839bed"}, "downloads": -1, "filename": "buildpg-0.2.1-py36.py37-none-any.whl", "has_sig": false, "md5_digest": "3d36a28158d4cee673a03c38982fe6ed", "packagetype": "bdist_wheel", "python_version": "py36.py37", "requires_python": ">=3.6", "size": 11573, "upload_time": "2019-05-02T15:15:38", "upload_time_iso_8601": "2019-05-02T15:15:38.498787Z", "url": "https://files.pythonhosted.org/packages/3b/3f/2299b25174d190ec7151e156429290d0b208be684f1531a450766851e69c/buildpg-0.2.1-py36.py37-none-any.whl"}, {"comment_text": "", "digests": {"md5": "06b3e501a5581ba3f6dac50d30d96de2", "sha256": "175eb3e4b7b4b0ff48be1dc01835622ea4c874600ca5a45696bea4a816d642cd"}, "downloads": -1, "filename": "buildpg-0.2.1.tar.gz", "has_sig": false, "md5_digest": "06b3e501a5581ba3f6dac50d30d96de2", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 11804, "upload_time": "2019-05-02T15:15:39", "upload_time_iso_8601": "2019-05-02T15:15:39.580559Z", "url": "https://files.pythonhosted.org/packages/4c/c3/d321bf7b1c60fdd88f51e909039692cd923e62799a4891f5de151285bfbe/buildpg-0.2.1.tar.gz"}], "0.2.2": [{"comment_text": "", "digests": {"md5": "81983acbddd1916855ef5b79d461ba2e", "sha256": "39aad8e4b8c9cb70c03d4754c7751bec40ade7d7181c3779bcd25de708a42afc"}, "downloads": -1, "filename": "buildpg-0.2.2-py36.py37-none-any.whl", "has_sig": false, "md5_digest": "81983acbddd1916855ef5b79d461ba2e", "packagetype": "bdist_wheel", "python_version": "py36.py37", "requires_python": ">=3.6", "size": 11598, "upload_time": "2019-10-29T11:13:02", "upload_time_iso_8601": "2019-10-29T11:13:02.930357Z", "url": "https://files.pythonhosted.org/packages/07/6e/639179c46007d52891d53f3af0327540b91a521c753eda39488d06524cc9/buildpg-0.2.2-py36.py37-none-any.whl"}, {"comment_text": "", "digests": {"md5": "7e09d8f7b708a71492b214e006b2a284", "sha256": "9ee1293e907e5e16e2cb8fd39dc7aedc48044fbc727cbd9ed749010a47928906"}, "downloads": -1, "filename": "buildpg-0.2.2.tar.gz", "has_sig": false, "md5_digest": "7e09d8f7b708a71492b214e006b2a284", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 11013, "upload_time": "2019-10-29T11:13:04", "upload_time_iso_8601": "2019-10-29T11:13:04.876851Z", "url": "https://files.pythonhosted.org/packages/45/b7/a695d900e8455f48b2e668904a176f8ec2b51d5c92640c000d2a6f5a019d/buildpg-0.2.2.tar.gz"}], "0.2.3": [{"comment_text": "", "digests": {"md5": "fcb3390fd6076f7e85fee871c0ed8265", "sha256": "5b0a2e730f9139e76bacb9246630fe7e91658fd14f95a1a3dfd337ff5a7b08c6"}, "downloads": -1, "filename": "buildpg-0.2.3-py36.py37-none-any.whl", "has_sig": false, "md5_digest": "fcb3390fd6076f7e85fee871c0ed8265", "packagetype": "bdist_wheel", "python_version": "py36.py37", "requires_python": ">=3.6", "size": 11602, "upload_time": "2019-11-22T15:14:35", "upload_time_iso_8601": "2019-11-22T15:14:35.790255Z", "url": "https://files.pythonhosted.org/packages/93/6a/e7120d03d563c1a574aab649513698c871f977fc92498d3f10f3a16cfac5/buildpg-0.2.3-py36.py37-none-any.whl"}, {"comment_text": "", "digests": {"md5": "407bffa0e62c0ca5cd3f867a8eae120d", "sha256": "fd503e2024d520d67626482283318362637e573f3ce1f08e1a6544b2d3a4c120"}, "downloads": -1, "filename": "buildpg-0.2.3.tar.gz", "has_sig": false, "md5_digest": "407bffa0e62c0ca5cd3f867a8eae120d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 11016, "upload_time": "2019-11-22T15:14:37", "upload_time_iso_8601": "2019-11-22T15:14:37.411154Z", "url": "https://files.pythonhosted.org/packages/51/27/e1d07f18e9d07c88fd4efb54e57e16e034086a553932cb567201e14d8b8f/buildpg-0.2.3.tar.gz"}]}, "urls": [{"comment_text": "", "digests": {"md5": "fcb3390fd6076f7e85fee871c0ed8265", "sha256": "5b0a2e730f9139e76bacb9246630fe7e91658fd14f95a1a3dfd337ff5a7b08c6"}, "downloads": -1, "filename": "buildpg-0.2.3-py36.py37-none-any.whl", "has_sig": false, "md5_digest": "fcb3390fd6076f7e85fee871c0ed8265", "packagetype": "bdist_wheel", "python_version": "py36.py37", "requires_python": ">=3.6", "size": 11602, "upload_time": "2019-11-22T15:14:35", "upload_time_iso_8601": "2019-11-22T15:14:35.790255Z", "url": "https://files.pythonhosted.org/packages/93/6a/e7120d03d563c1a574aab649513698c871f977fc92498d3f10f3a16cfac5/buildpg-0.2.3-py36.py37-none-any.whl"}, {"comment_text": "", "digests": {"md5": "407bffa0e62c0ca5cd3f867a8eae120d", "sha256": "fd503e2024d520d67626482283318362637e573f3ce1f08e1a6544b2d3a4c120"}, "downloads": -1, "filename": "buildpg-0.2.3.tar.gz", "has_sig": false, "md5_digest": "407bffa0e62c0ca5cd3f867a8eae120d", "packagetype": "sdist", "python_version": "source", "requires_python": ">=3.6", "size": 11016, "upload_time": "2019-11-22T15:14:37", "upload_time_iso_8601": "2019-11-22T15:14:37.411154Z", "url": "https://files.pythonhosted.org/packages/51/27/e1d07f18e9d07c88fd4efb54e57e16e034086a553932cb567201e14d8b8f/buildpg-0.2.3.tar.gz"}]}