# uncompyle6 version 3.7.4
# Python bytecode 2.6 (62161)
# Decompiled from: Python 3.6.9 (default, Apr 18 2020, 01:56:04) 
# [GCC 8.4.0]
# Embedded file name: build/bdist.macosx-10.3-fat/egg/collective/prettysociable/browser/view.py
# Compiled at: 2011-04-17 05:53:23
from Products.Five.browser import BrowserView
from Products.CMFCore.utils import getToolByName

class JavaScript(BrowserView):

    @property
    def prettysociable_properties(self):
        properties_tool = getToolByName(self.context, 'portal_properties')
        return getattr(properties_tool, 'prettysociable_properties', None)

    def __call__(self, request=None, response=None):
        """Returns global configuration for prettySociable taken from
           portal_properties."""
        self.request.response.setHeader('Content-type', 'text/javascript')
        js = 'jq(document).ready(function(){ '
        if getattr(self.prettysociable_properties, 'enable_default', True):
            js += '// add rel tag for all links with class \'prettySociable\'\n                    jq("a.prettySociable").each(function() {\n                        jq(this).attr({\'href\': this.href});\n                        var title = jq(this).attr(\'title\');\n                        if (title == \'\') {\n                            title = jq(this).text();\n                        }\n                        jq(this).attr({"rel": "prettySociable;title:" + title + ";excerpt:;"});\n                    });\n                  '
        if getattr(self.prettysociable_properties, 'enable_h1', True):
            js += '// add link to h1 (acts as permalink)\n                    var thisURL = jQuery.url.attr("source");\n                    jq("h1.documentFirstHeading").wrapInner(\'<a href="\' + thisURL + \'" rel="prettySociable"></a>\');\n                  '
        js += "jq.prettySociable({\n                    animationSpeed: '%(speed)s', /* fast/slow/normal */\n                    opacity: %(opacity)s, /* Value between 0 and 1 */\n                    share_label: 'Drag to share', /* Text displayed when a user rollover an item */\n                    share_on_label: 'Share on ', /* Text displayed when a user rollover a website to share */\n                    hideflash: %(hide_flash)s, /* Hides all the flash object on a page, set to TRUE if flash appears over prettySociable */\n                    hover_padding: %(hover_padding)s,\n                    websites: {\n                        facebook: {\n                            'active': %(facebook_active)s,\n                            'encode': %(facebook_encode)s, // If sharing is not working, try to turn to false\n                            'title': 'Facebook',\n                            'url': 'http://www.facebook.com/share.php?u=',\n                            'icon': '++resource++prettySociable.facebook.png',\n                            'sizes': {'width': %(image_width)s, 'height': %(image_height)s}\n                        },\n                        twitter: {\n                            'active': %(twitter_active)s,\n                            'encode': %(twitter_encode)s, // If sharing is not working, try to turn to false\n                            'title': 'Twitter',\n                            'url': 'http://twitter.com/home?status=',\n                            'icon': '++resource++prettySociable.twitter.png',\n                            'sizes': {'width': %(image_width)s, 'height': %(image_height)s}\n                        },\n                        delicious: {\n                            'active': %(delicious_active)s,\n                            'encode': %(delicious_encode)s, // If sharing is not working, try to turn to false\n                            'title': 'Delicious',\n                            'url': 'http://del.icio.us/post?url=',\n                            'icon': '++resource++prettySociable.delicious.png',\n                            'sizes': {'width': %(image_width)s, 'height': %(image_height)s}\n                        },\n                        digg: {\n                            'active': %(digg_active)s,\n                            'encode': %(digg_encode)s, // If sharing is not working, try to turn to false\n                            'title': 'Digg',\n                            'url': 'http://digg.com/submit?phase=2&url=',\n                            'icon': '++resource++prettySociable.digg.png',\n                            'sizes': {'width': %(image_width)s, 'height': %(image_height)s}\n                        },\n                        linkedin: {\n                            'active': %(linkedin_active)s,\n                            'encode': %(linkedin_encode)s, // If sharing is not working, try to turn to false\n                            'title': 'LinkedIn',\n                            'url': 'http://www.linkedin.com/shareArticle?mini=true&ro=true&url=',\n                            'icon': '++resource++prettySociable.linkedin.png',\n                            'sizes': {'width': %(image_width)s, 'height': %(image_height)s}\n                        },\n                        reddit: {\n                            'active': %(reddit_active)s,\n                            'encode': %(reddit_encode)s, // If sharing is not working, try to turn to false\n                            'title': 'Reddit',\n                            'url': 'http://reddit.com/submit?url=',\n                            'icon': '++resource++prettySociable.reddit.png',\n                            'sizes': {'width': %(image_width)s, 'height': %(image_height)s}\n                        },\n                        stumbleupon: {\n                            'active': %(stumbleupon_active)s,\n                            'encode': %(stumbleupon_encode)s, // If sharing is not working, try to turn to false\n                            'title': 'StumbleUpon',\n                            'url': 'http://stumbleupon.com/submit?url=',\n                            'icon': '++resource++prettySociable.stumbleupon.png',\n                            'sizes': {'width': %(image_width)s, 'height': %(image_height)s}\n                        },\n                        tumblr: {\n                            'active': %(tumblr_active)s,\n                            'encode': %(tumblr_encode)s, // If sharing is not working, try to turn to false\n                            'title': 'tumblr',\n                            'url': 'http://www.tumblr.com/share?v=3&u=',\n                            'icon': '++resource++prettySociable.tumblr.png',\n                            'sizes': {'width': %(image_width)s, 'height': %(image_height)s}\n                        }\n                    }\n                });\n            });\n            " % dict(speed=getattr(self.prettysociable_properties, 'speed', 'normal'), opacity=getattr(self.prettysociable_properties, 'opacity', 0.8), hide_flash=getattr(self.prettysociable_properties, 'hide_flash', True) and 'true' or 'false', hover_padding=getattr(self.prettysociable_properties, 'hover_padding', 0), image_height=getattr(self.prettysociable_properties, 'image_height', 70), image_width=getattr(self.prettysociable_properties, 'image_width', 70), facebook_active=getattr(self.prettysociable_properties, 'facebook_active', True) and 'true' or 'false', facebook_encode=getattr(self.prettysociable_properties, 'facebook_encode', True) and 'true' or 'false', twitter_active=getattr(self.prettysociable_properties, 'twitter_active', True) and 'true' or 'false', twitter_encode=getattr(self.prettysociable_properties, 'twitter_encode', True) and 'true' or 'false', delicious_active=getattr(self.prettysociable_properties, 'delicious_active', True) and 'true' or 'false', delicious_encode=getattr(self.prettysociable_properties, 'delicious_encode', True) and 'true' or 'false', digg_active=getattr(self.prettysociable_properties, 'digg_active', True) and 'true' or 'false', digg_encode=getattr(self.prettysociable_properties, 'digg_encode', True) and 'true' or 'false', linkedin_active=getattr(self.prettysociable_properties, 'linkedin_active', True) and 'true' or 'false', linkedin_encode=getattr(self.prettysociable_properties, 'linkedin_encode', True) and 'true' or 'false', reddit_active=getattr(self.prettysociable_properties, 'reddit_active', True) and 'true' or 'false', reddit_encode=getattr(self.prettysociable_properties, 'reddit_encode', True) and 'true' or 'false', stumbleupon_active=getattr(self.prettysociable_properties, 'stumbleupon_active', True) and 'true' or 'false', stumbleupon_encode=getattr(self.prettysociable_properties, 'stumbleupon_encode', True) and 'true' or 'false', tumblr_active=getattr(self.prettysociable_properties, 'tumblr_active', True) and 'true' or 'false', tumblr_encode=getattr(self.prettysociable_properties, 'tumblr_encode', True) and 'true' or 'false')
        return js