# uncompyle6 version 3.7.4
# Python bytecode 2.7 (62211)
# Decompiled from: Python 3.6.9 (default, Apr 18 2020, 01:56:04) 
# [GCC 8.4.0]
# Embedded file name: build/bdist.linux-x86_64/egg/insights/parsers/tests/test_ceilometer_conf.py
# Compiled at: 2019-05-16 13:41:33
from insights.parsers.ceilometer_conf import CeilometerConf
from insights.tests import context_wrap
ceilometer_content = '\n[DEFAULT]\n#\n# From ceilometer\n#\n# To reduce polling agent load, samples are sent to the notification\n# agent in a batch. To gain higher throughput at the cost of load set\n# this to False. (boolean value)\n#batch_polled_samples = true\n# To reduce large requests at same time to Nova or other components\n# from different compute agents, shuffle start time of polling task.\n# (integer value)\n#shuffle_time_before_polling_task = 0\n# Configuration file for WSGI definition of API. (string value)\n#api_paste_config = api_paste.ini\n# Polling namespace(s) to be used while resource polling (unknown\n# type)\n#polling_namespaces = [\'compute\', \'central\']\n# List of pollsters (or wildcard templates) to be used while polling\n# (unknown type)\n#pollster_list = []\n# Exchange name for Nova notifications. (string value)\n#nova_control_exchange = nova\n# List of metadata prefixes reserved for metering use. (list value)\n#reserved_metadata_namespace = metering.\n# Limit on length of reserved metadata values. (integer value)\n#reserved_metadata_length = 256\n# List of metadata keys reserved for metering use. And these keys are\n# additional to the ones included in the namespace. (list value)\n#reserved_metadata_keys =\n# Inspector to use for inspecting the hypervisor layer. Known\n# inspectors are libvirt, hyperv, vmware, xenapi and powervm. (string\n# value)\n#hypervisor_inspector = libvirt\n# Libvirt domain type. (string value)\n# Allowed values: kvm, lxc, qemu, uml, xen\n#libvirt_type = kvm\n# Override the default libvirt URI (which is dependent on\n# libvirt_type). (string value)\n#libvirt_uri =\n# Dispatcher to process data. (multi valued)\n# Deprecated group/name - [collector]/dispatcher\n#dispatcher = database\n# Number of items to request in each paginated Glance API request\n# (parameter used by glancecelient). If this is less than or equal to\n# 0, page size is not specified (default value in glanceclient is\n# used). (integer value)\n#glance_page_size = 0\n# Exchange name for Ironic notifications. (string value)\n#ironic_exchange = ironic\n# Exchanges name to listen for notifications. (multi valued)\n#http_control_exchanges = nova\n#http_control_exchanges = glance\n#http_control_exchanges = neutron\n#http_control_exchanges = cinder\n# Exchange name for Neutron notifications. (string value)\n# Deprecated group/name - [DEFAULT]/quantum_control_exchange\n#neutron_control_exchange = neutron\n# Allow novaclient\'s debug log output. (boolean value)\n#nova_http_log_debug = false\n# Swift reseller prefix. Must be on par with reseller_prefix in proxy-\n# server.conf. (string value)\n#reseller_prefix = AUTH_\n# Configuration file for pipeline definition. (string value)\n#pipeline_cfg_file = pipeline.yaml\n# Configuration file for event pipeline definition. (string value)\n#event_pipeline_cfg_file = event_pipeline.yaml\n# Refresh Pipeline configuration on-the-fly. (boolean value)\n#refresh_pipeline_cfg = false\n# Refresh Event Pipeline configuration on-the-fly. (boolean value)\n#refresh_event_pipeline_cfg = false\n# Polling interval for pipeline file configuration in seconds.\n# (integer value)\n#pipeline_polling_interval = 20\n# Source for samples emitted on this instance. (string value)\n# Deprecated group/name - [DEFAULT]/counter_source\n#sample_source = openstack\n# Name of this node, which must be valid in an AMQP key. Can be an\n# opaque identifier. For ZeroMQ only, must be a valid host name, FQDN,\n# or IP address. (string value)\n# Timeout seconds for HTTP requests. Set it to None to disable\n# timeout. (integer value)\n#http_timeout = 600\nhttp_timeout = 600\n# DEPRECATED - Database connection string. (string value)\n#database_connection = <None>\n# Path to the rootwrap configuration file touse for running commands\n# as root (string value)\n#rootwrap_config = /etc/ceilometer/rootwrap.conf\n#\n# From oslo.log\n#\n# Print debugging output (set logging level to DEBUG instead of\n# default INFO level). (boolean value)\n#debug = false\ndebug = False\n# If set to false, will disable INFO logging level, making WARNING the\n# default. (boolean value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#verbose = true\nverbose = False\n# The name of a logging configuration file. This file is appended to\n# any existing logging configuration files. For details about logging\n# configuration files, see the Python logging module documentation.\n# (string value)\n# Deprecated group/name - [DEFAULT]/log_config\n#log_config_append = <None>\n# DEPRECATED. A logging.Formatter log message format string which may\n# use any of the available logging.LogRecord attributes. This option\n# is deprecated.  Please use logging_context_format_string and\n# logging_default_format_string instead. (string value)\n#log_format = <None>\n# Format string for %%(asctime)s in log records. Default: %(default)s\n# . (string value)\n#log_date_format = %Y-%m-%d %H:%M:%S\n# (Optional) Name of log file to output to. If no default is set,\n# logging will go to stdout. (string value)\n# Deprecated group/name - [DEFAULT]/logfile\n#log_file = <None>\n# (Optional) The base directory used for relative --log-file paths.\n# (string value)\n# Deprecated group/name - [DEFAULT]/logdir\n#log_dir = <None>\nlog_dir = /var/log/ceilometer\n# Use syslog for logging. Existing syslog format is DEPRECATED and\n# will be changed later to honor RFC5424. (boolean value)\n#use_syslog = false\nuse_syslog = False\n# (Optional) Enables or disables syslog rfc5424 format for logging. If\n# enabled, prefixes the MSG part of the syslog message with APP-NAME\n# (RFC5424). The format without the APP-NAME is deprecated in Kilo,\n# and will be removed in Mitaka, along with this option. (boolean\n# value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#use_syslog_rfc_format = true\n# Syslog facility to receive log lines. (string value)\n#syslog_log_facility = LOG_USER\nsyslog_log_facility = LOG_USER\n# Log output to standard error. (boolean value)\n#use_stderr = true\nuse_stderr = True\n# Format string to use for log messages with context. (string value)\n#logging_context_format_string = %(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [%(request_id)s %(user_identity)s] %(instance)s%(message)s\n# Format string to use for log messages without context. (string\n# value)\n#logging_default_format_string = %(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [-] %(instance)s%(message)s\n# Data to append to log format when level is DEBUG. (string value)\n#logging_debug_format_suffix = %(funcName)s %(pathname)s:%(lineno)d\n# Prefix each line of exception output with this format. (string\n# value)\n#logging_exception_prefix = %(asctime)s.%(msecs)03d %(process)d ERROR %(name)s %(instance)s\n# List of logger=LEVEL pairs. (list value)\n#default_log_levels = amqp=WARN,amqplib=WARN,boto=WARN,qpid=WARN,sqlalchemy=WARN,suds=INFO,oslo.messaging=INFO,iso8601=WARN,requests.packages.urllib3.connectionpool=WARN,urllib3.connectionpool=WARN,websocket=WARN,requests.packages.urllib3.util.retry=WARN,urllib3.util.retry=WARN,keystonemiddleware=WARN,routes.middleware=WARN,stevedore=WARN,taskflow=WARN\n# Enables or disables publication of error events. (boolean value)\n#publish_errors = false\n# The format for an instance that is passed with the log message.\n# (string value)\n#instance_format = "[instance: %(uuid)s] "\n# The format for an instance UUID that is passed with the log message.\n# (string value)\n#instance_uuid_format = "[instance: %(uuid)s] "\n# Enables or disables fatal status of deprecations. (boolean value)\n#fatal_deprecations = false\n#\n# From oslo.messaging\n#\n# Size of RPC connection pool. (integer value)\n# Deprecated group/name - [DEFAULT]/rpc_conn_pool_size\n#rpc_conn_pool_size = 30\n# ZeroMQ bind address. Should be a wildcard (*), an ethernet\n# interface, or IP. The "host" option should point or resolve to this\n# address. (string value)\n#rpc_zmq_bind_address = *\n# MatchMaker driver. (string value)\n#rpc_zmq_matchmaker = local\n# ZeroMQ receiver listening port. (integer value)\n#rpc_zmq_port = 9501\n# Number of ZeroMQ contexts, defaults to 1. (integer value)\n#rpc_zmq_contexts = 1\n# Maximum number of ingress messages to locally buffer per topic.\n# Default is unlimited. (integer value)\n#rpc_zmq_topic_backlog = <None>\n# Directory for holding IPC sockets. (string value)\n#rpc_zmq_ipc_dir = /var/run/openstack\n# Name of this node. Must be a valid hostname, FQDN, or IP address.\n# Must match "host" option, if running Nova. (string value)\n#rpc_zmq_host = localhost\n# Seconds to wait before a cast expires (TTL). Only supported by\n# impl_zmq. (integer value)\n#rpc_cast_timeout = 30\n# Heartbeat frequency. (integer value)\n#matchmaker_heartbeat_freq = 300\n# Heartbeat time-to-live. (integer value)\n#matchmaker_heartbeat_ttl = 600\n# Size of executor thread pool. (integer value)\n# Deprecated group/name - [DEFAULT]/rpc_thread_pool_size\n#executor_thread_pool_size = 64\n# The Drivers(s) to handle sending notifications. Possible values are\n# messaging, messagingv2, routing, log, test, noop (multi valued)\n#notification_driver =\n# AMQP topic used for OpenStack notifications. (list value)\n# Deprecated group/name - [rpc_notifier2]/topics\n#notification_topics = notifications\nnotification_topics = notifications\n# Seconds to wait for a response from a call. (integer value)\n#rpc_response_timeout = 60\n# A URL representing the messaging driver to use and its full\n# configuration. If not set, we fall back to the rpc_backend option\n# and driver specific configuration. (string value)\n#transport_url = <None>\n# The messaging driver to use, defaults to rabbit. Other drivers\n# include qpid and zmq. (string value)\n#rpc_backend = rabbit\nrpc_backend = rabbit\n# The default exchange under which topics are scoped. May be\n# overridden by an exchange name specified in the transport_url\n# option. (string value)\n#control_exchange = openstack\n#\n# From oslo.service.service\n#\n# Enable eventlet backdoor.  Acceptable values are 0, <port>, and\n# <start>:<end>, where 0 results in listening on a random tcp port\n# number; <port> results in listening on the specified port number\n# (and not enabling backdoor if that port is in use); and\n# <start>:<end> results in listening on the smallest unused port\n# number within the specified range of port numbers.  The chosen port\n# is displayed in the service\'s log file. (string value)\n#backdoor_port = <None>\n# Enables or disables logging values of all registered options when\n# starting a service (at DEBUG level). (boolean value)\n#log_options = true\nmeter_dispatcher=database\nevent_dispatcher=database\n[alarm]\n#\n# From ceilometer\n#\n# SSL Client certificate for REST notifier. (string value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#rest_notifier_certificate_file =\n# SSL Client private key for REST notifier. (string value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#rest_notifier_certificate_key =\n# Whether to verify the SSL Server certificate when calling alarm\n# action. (boolean value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#rest_notifier_ssl_verify = true\n# Number of retries for REST notifier (integer value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#rest_notifier_max_retries = 0\n# Period of evaluation cycle, should be >= than configured pipeline\n# interval for collection of underlying meters. (integer value)\n# Deprecated group/name - [alarm]/threshold_evaluation_interval\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#evaluation_interval = 60\nevaluation_interval = 60\n# The topic that ceilometer uses for alarm notifier messages. (string\n# value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#notifier_rpc_topic = alarm_notifier\n# URL to Gnocchi. (string value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#gnocchi_url = http://localhost:8041\n# Record alarm change events. (boolean value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#record_history = true\nrecord_history = True\n# Maximum number of alarms defined for a user. (integer value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#user_alarm_quota = <None>\n# Maximum number of alarms defined for a project. (integer value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#project_alarm_quota = <None>\n# Maximum count of actions for each state of an alarm, non-positive\n# number means no limit. (integer value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#alarm_max_actions = -1\nevaluation_service=ceilometer.alarm.service.SingletonAlarmService\npartition_rpc_topic=alarm_partition_coordination\n[api]\n#\n# From ceilometer\n#\n# The port for the ceilometer API server. (integer value)\n# Minimum value: 1\n# Maximum value: 65535\n# Deprecated group/name - [DEFAULT]/metering_api_port\n#port = 8777\nport = 8777\n# The listen IP for the ceilometer API server. (string value)\n#host = 0.0.0.0\nhost = 192.0.2.10\n# Toggle Pecan Debug Middleware. (boolean value)\n#pecan_debug = false\n# Default maximum number of items returned by API request. (integer\n# value)\n# Minimum value: 1\n#default_api_return_limit = 100\n# Number of workers for api, default value is 1. (integer value)\n# Minimum value: 1\n# Deprecated group/name - [DEFAULT]/api_workers\n#workers = 1\n[central]\n#\n# From ceilometer\n#\n# To reduce polling agent load, samples are sent to the notification\n# agent in a batch. To gain higher throughput at the cost of load set\n# this to False. (boolean value)\n#batch_polled_samples = true\n# To reduce large requests at same time to Nova or other components\n# from different compute agents, shuffle start time of polling task.\n# (integer value)\n#shuffle_time_before_polling_task = 0\n[collector]\n#\n# From ceilometer\n#\n# Address to which the UDP socket is bound. Set to an empty string to\n# disable. (string value)\n#udp_address = 0.0.0.0\nudp_address = 0.0.0.0\n# Port to which the UDP socket is bound. (integer value)\n# Minimum value: 1\n# Maximum value: 65535\n#udp_port = 4952\nudp_port = 4952\n# Requeue the sample on the collector sample queue when the collector\n# fails to dispatch it. This is only valid if the sample come from the\n# notifier publisher. (boolean value)\n#requeue_sample_on_dispatcher_error = false\n# Requeue the event on the collector event queue when the collector\n# fails to dispatch it. (boolean value)\n#requeue_event_on_dispatcher_error = false\n# Enable the RPC functionality of collector. This functionality is now\n# deprecated in favour of notifier publisher and queues. (boolean\n# value)\n#enable_rpc = false\n# Number of workers for collector service. default value is 1.\n# (integer value)\n# Minimum value: 1\n# Deprecated group/name - [DEFAULT]/collector_workers\n#workers = 1\n[compute]\n#\n# From ceilometer\n#\n# Enable work-load partitioning, allowing multiple compute agents to\n# be run simultaneously. (boolean value)\n#workload_partitioning = false\n[coordination]\n#\n# From ceilometer\n#\n# The backend URL to use for distributed coordination. If left empty,\n# per-deployment central agent and per-host compute agent won\'t do\n# workload partitioning and will only function correctly if a single\n# instance of that service is running. (string value)\n#backend_url = <None>\nbackend_url = redis://:chDWmHdH8dyjsmpCWfCEpJR87@192.0.2.7:6379/\n# Number of seconds between heartbeats for distributed coordination.\n# (floating point value)\n#heartbeat = 1.0\n# Number of seconds between checks to see if group membership has\n# changed (floating point value)\n#check_watchers = 10.0\n[database]\n#\n# From ceilometer\n#\n# Number of seconds that samples are kept in the database for (<= 0\n# means forever). (integer value)\n# Deprecated group/name - [database]/time_to_live\n#metering_time_to_live = -1\nmetering_time_to_live = -1\n# Number of seconds that events are kept in the database for (<= 0\n# means forever). (integer value)\n#event_time_to_live = -1\nevent_time_to_live = -1\n# The connection string used to connect to the metering database. (if\n# unset, connection is used) (string value)\n#metering_connection = <None>\n# The connection string used to connect to the alarm database. (if\n# unset, connection is used) (string value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#alarm_connection = <None>\n# Number of seconds that alarm histories are kept in the database for\n# (<= 0 means forever). (integer value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#alarm_history_time_to_live = -1\nalarm_history_time_to_live = -1\n# The connection string used to connect to the event database. (if\n# unset, connection is used) (string value)\n#event_connection = <None>\n# The max length of resources id in DB2 nosql, the value should be\n# larger than len(hostname) * 2 as compute node\'s resource id is\n# <hostname>_<nodename>. (integer value)\n#db2nosql_resource_id_maxlen = 512\n# The name of the replica set which is used to connect to MongoDB\n# database. Add "?replicaSet=myreplicatset" in your connection URI\n# instead. (string value)\n# This option is deprecated for removal.\n# Its value may be silently ignored in the future.\n#mongodb_replica_set =\n#\n# From oslo.db\n#\n# The file name to use with SQLite. (string value)\n# Deprecated group/name - [DEFAULT]/sqlite_db\n#sqlite_db = oslo.sqlite\n# If True, SQLite uses synchronous mode. (boolean value)\n# Deprecated group/name - [DEFAULT]/sqlite_synchronous\n#sqlite_synchronous = true\n# The back end to use for the database. (string value)\n# Deprecated group/name - [DEFAULT]/db_backend\n#backend = sqlalchemy\n# The SQLAlchemy connection string to use to connect to the database.\n# (string value)\n# Deprecated group/name - [DEFAULT]/sql_connection\n# Deprecated group/name - [DATABASE]/sql_connection\n# Deprecated group/name - [sql]/connection\n#connection = <None>\nconnection = mongodb://192.0.2.11:27017,192.0.2.10:27017,192.0.2.12:27017/ceilometer?replicaSet=tripleo\n# The SQLAlchemy connection string to use to connect to the slave\n# database. (string value)\n#slave_connection = <None>\n# The SQL mode to be used for MySQL sessions. This option, including\n# the default, overrides any server-set SQL mode. To use whatever SQL\n# mode is set by the server configuration, set this to no value.\n# Example: mysql_sql_mode= (string value)\n#mysql_sql_mode = TRADITIONAL\n# Timeout before idle SQL connections are reaped. (integer value)\n# Deprecated group/name - [DEFAULT]/sql_idle_timeout\n# Deprecated group/name - [DATABASE]/sql_idle_timeout\n# Deprecated group/name - [sql]/idle_timeout\n#idle_timeout = 3600\nidle_timeout = 3600\n# Minimum number of SQL connections to keep open in a pool. (integer\n# value)\n# Deprecated group/name - [DEFAULT]/sql_min_pool_size\n# Deprecated group/name - [DATABASE]/sql_min_pool_size\n#min_pool_size = 1\nmin_pool_size = 1\n# Maximum number of SQL connections to keep open in a pool. (integer\n# value)\n# Deprecated group/name - [DEFAULT]/sql_max_pool_size\n# Deprecated group/name - [DATABASE]/sql_max_pool_size\n#max_pool_size = <None>\nmax_pool_size = 10\n# Maximum number of database connection retries during startup. Set to\n# -1 to specify an infinite retry count. (integer value)\n# Deprecated group/name - [DEFAULT]/sql_max_retries\n# Deprecated group/name - [DATABASE]/sql_max_retries\n#max_retries = 10\nmax_retries = 10\n# Interval between retries of opening a SQL connection. (integer\n# value)\n# Deprecated group/name - [DEFAULT]/sql_retry_interval\n# Deprecated group/name - [DATABASE]/reconnect_interval\n#retry_interval = 10\nretry_interval = 10\n# If set, use this value for max_overflow with SQLAlchemy. (integer\n# value)\n# Deprecated group/name - [DEFAULT]/sql_max_overflow\n# Deprecated group/name - [DATABASE]/sqlalchemy_max_overflow\n#max_overflow = <None>\nmax_overflow = 20\n# Verbosity of SQL debugging information: 0=None, 100=Everything.\n# (integer value)\n# Deprecated group/name - [DEFAULT]/sql_connection_debug\n#connection_debug = 0\n# Add Python stack traces to SQL as comment strings. (boolean value)\n# Deprecated group/name - [DEFAULT]/sql_connection_trace\n#connection_trace = false\n# If set, use this value for pool_timeout with SQLAlchemy. (integer\n# value)\n# Deprecated group/name - [DATABASE]/sqlalchemy_pool_timeout\n#pool_timeout = <None>\n# Enable the experimental use of database reconnect on connection\n# lost. (boolean value)\n#use_db_reconnect = false\n# Seconds between retries of a database transaction. (integer value)\n#db_retry_interval = 1\n# If True, increases the interval between retries of a database\n# operation up to db_max_retry_interval. (boolean value)\n#db_inc_retry_interval = true\n# If db_inc_retry_interval is set, the maximum seconds between retries\n# of a database operation. (integer value)\n#db_max_retry_interval = 10\n# Maximum retries in case of connection error or deadlock error before\n# error is raised. Set to -1 to specify an infinite retry count.\n# (integer value)\n#db_max_retries = 20\ntime_to_live=-1\n[dispatcher_file]\n#\n# From ceilometer\n#\n# Name and the location of the file to record meters. (string value)\n#file_path = <None>\n# The max size of the file. (integer value)\n#max_bytes = 0\n# The max number of the files to keep. (integer value)\n#backup_count = 0\n[event]\n#\n# From ceilometer\n#\n# Configuration file for event definitions. (string value)\n#definitions_cfg_file = event_definitions.yaml\n# Drop notifications if no event definition matches. (Otherwise, we\n# convert them with just the default traits) (boolean value)\n#drop_unmatched_notifications = false\n# Store the raw notification for select priority levels (info and/or\n# error). By default, raw details are not captured. (multi valued)\n#store_raw =\n[exchange_control]\n#\n# From ceilometer\n#\n# Exchange name for Heat notifications (string value)\n#heat_control_exchange = heat\n# Exchange name for Glance notifications. (string value)\n#glance_control_exchange = glance\n# Exchange name for Magnetodb notifications. (string value)\n#magnetodb_control_exchange = magnetodb\n# Exchange name for Keystone notifications. (string value)\n#keystone_control_exchange = keystone\n# Exchange name for Cinder notifications. (string value)\n#cinder_control_exchange = cinder\n# Exchange name for Data Processing notifications. (string value)\n#sahara_control_exchange = sahara\n# Exchange name for Swift notifications. (string value)\n#swift_control_exchange = swift\n# Exchange name for Magnum notifications. (string value)\n#magnum_control_exchange = magnum\n# Exchange name for DBaaS notifications. (string value)\n#trove_control_exchange = trove\n# Exchange name for Messaging service notifications. (string value)\n#zaqar_control_exchange = zaqar\n'

def test_match():
    result = CeilometerConf(context_wrap(ceilometer_content))
    assert result.data.get('DEFAULT', 'http_timeout') == '600'
    assert result.data.get('DEFAULT', 'log_dir') == '/var/log/ceilometer'
    assert result.data.get('api', 'host') == '192.0.2.10'
    assert result.data.get('coordination', 'backend_url') == 'redis://:chDWmHdH8dyjsmpCWfCEpJR87@192.0.2.7:6379/'
    assert result.data.get('database', 'metering_time_to_live') == '-1'
    assert result.data.get('database', 'connection') == 'mongodb://192.0.2.11:27017,192.0.2.10:27017,192.0.2.12:27017/ceilometer?replicaSet=tripleo'