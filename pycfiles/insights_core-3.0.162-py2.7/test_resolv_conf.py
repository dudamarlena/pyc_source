# uncompyle6 version 3.7.4
# Python bytecode 2.7 (62211)
# Decompiled from: Python 3.6.9 (default, Apr 18 2020, 01:56:04) 
# [GCC 8.4.0]
# Embedded file name: build/bdist.linux-x86_64/egg/insights/parsers/tests/test_resolv_conf.py
# Compiled at: 2019-05-16 13:41:33
from insights.parsers.resolv_conf import ResolvConf
from insights.tests import context_wrap
RESOLVCONF = '\n# This file is being maintained by Puppet.\n# DO NOT EDIT\nsearch a.b.com b.c.com\noptions timeout:2 attempts:2\nnameserver 10.160.224.51\nnameserver 10.160.225.51\nnameserver 10.61.193.11\n'
RESOLVCONF_M = '\n; Generated by NetworkManager\nsearch ttt.com\ndomain ttt.com\nnameserver 192.168.30.1\n'
RESOLV_CONF_NO_ACTIVE = '\nnameserver 192.168.30.1\n'

def test_resolv_conf():
    resolv_info = ResolvConf(context_wrap(RESOLVCONF))
    assert resolv_info.get('search') == ['a.b.com', 'b.c.com']
    assert resolv_info.get('options') == ['timeout:2', 'attempts:2']
    assert resolv_info.get('nameserver') == ['10.160.224.51', '10.160.225.51', '10.61.193.11']
    assert resolv_info.get('active') == 'search'


def test_resolv_conf_m():
    resolv_info = ResolvConf(context_wrap(RESOLVCONF_M))
    assert resolv_info.get('domain') == ['ttt.com']
    assert resolv_info.get('search') == ['ttt.com']
    assert resolv_info.get('nameserver') == ['192.168.30.1']
    assert resolv_info.get('active') == 'domain'


def test_resolv_conf_neither():
    resolv = ResolvConf(context_wrap(RESOLV_CONF_NO_ACTIVE))
    assert resolv['nameserver'] == ['192.168.30.1']
    assert resolv['active'] == ''