# uncompyle6 version 3.7.4
# Python bytecode 2.7 (62211)
# Decompiled from: Python 3.6.9 (default, Apr 18 2020, 01:56:04) 
# [GCC 8.4.0]
# Embedded file name: C:\BitBucket\djmicrosip_apps\djmicrosip_reorden\djmicrosip_reorden\custom_db\sql_queries.py
# Compiled at: 2015-12-08 16:15:26
triggers_activate = {}
triggers_activate['SIC_REORDEN_DOCTO_VE'] = '\n  CREATE OR ALTER TRIGGER SIC_REORDEN_DOCTO_VE FOR DOCTOS_VE\nACTIVE BEFORE UPDATE POSITION 0\nAS\n  DECLARE VARIABLE VALORES VARCHAR(200);\n  DECLARE VARIABLE ALMACEN VARCHAR(200);\n  DECLARE VARIABLE GENERADO INTEGER;\n  DECLARE VARIABLE TIPO_DOCUMENTO CHAR(1);\n  DECLARE VARIABLE MOVTO CHAR(1);\n\n  BEGIN\n    IF  (OLD.APLICADO = \'N\' AND NEW.APLICADO = \'S\' AND NEW.TIPO_DOCTO = \'R\' AND NOT NEW.CLIENTE_ID IS NULL) THEN\n    BEGIN\n        select la.valor_desplegado from libres_rem_ve dp join\n            listas_atributos la on la.lista_atrib_id = dp.almacen\n            where dp.docto_ve_id = new.docto_ve_id  into :ALMACEN;\n\n      if (almacen IS NULL) then\n      begin\n           EXCEPTION ex_dato_es_null \'FAVOR DE INDICAR EL ALMACEN EN DATOS PARTICULARES\';\n      end\n\n      if (almacen <> \'N/A\') then\n      begin\n        GENERADO = 0;\n        VALORES = \'{"FOLIO":"\'|| NEW.FOLIO ||\'","TIPO_DOCUMENTO":"\'||NEW.tipo_docto||\'","MOVTO":"I"}\';\n        /*  PARA CHECAR SI NO SE A GENERADO EL FOLIO ANTES*/\n        IF (EXISTS(SELECT * FROM SIC_PENDINGTASK WHERE PARAMETERS = :VALORES AND APP = \'REORDEN\' )) THEN\n            GENERADO = 1;\n\n        IF (GENERADO = 0) THEN\n        BEGIN\n            INSERT INTO SIC_PENDINGTASK (TYPE, APP, PARAMETERS, INTENTS) VALUES(\'REMISION\', \'REORDEN\', :VALORES,  0);\n        END\n      end\n    END\n    if (new.estatus = \'C\') then\n        begin\n            generado = 0;\n            VALORES = \'{"FOLIO":"\'|| NEW.FOLIO ||\'","TIPO_DOCUMENTO":"\'||NEW.tipo_docto||\'","MOVTO":"C"}\';\n            /*  PARA CHECAR SI NO SE A GENERADO EL FOLIO ANTES*/\n\n            IF (EXISTS(SELECT * FROM SIC_PENDINGTASK WHERE PARAMETERS = :VALORES AND APP = \'REORDEN\' )) THEN\n                GENERADO = 1;\n\n            IF (GENERADO = 0) THEN\n            BEGIN\n                INSERT INTO SIC_PENDINGTASK (TYPE, APP, PARAMETERS, INTENTS) VALUES(\'REMISION\', \'REORDEN\', :VALORES,  0);\n            END\n        end\n END\n  '